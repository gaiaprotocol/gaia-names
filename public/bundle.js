(()=>{"use strict";var e,t,s,n,r,i,o,a={24688:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>v});var r=s(75321),i=s(83501),o=s(49083),a=s(9632),c=s(28393),l=s(3041),h=s(6204),u=s(63871),d=s(62808),f=s(49857),p=s(73224),g=s(3449),m=e([r,i,o,a,c,l,h,u,p,g]);[r,i,o,a,c,l,h,u,p,g]=m.then?(await m)():m;class w{isDevMode;supabaseUrl;supabaseKey;supabaseConnector;init(e){Object.assign(this,e),u.S.init();const t=new a.Jv("gaia-names-auth-token");this.supabaseConnector=new a.OP(e.supabaseUrl,e.supabaseKey,t),l.r.init({chains:[e.isDevMode?d.Z:f.E],walletConnectProjectId:e.walletConnectProjectId,supabaseConnector:this.supabaseConnector}),g.A.supabaseConnector=this.supabaseConnector,p.$.init(e.isDevMode,e.isDevMode,this.supabaseConnector,t),o.vE.goLoggedInUserProfile=async e=>{r.Ix.go(`/${e.name.endsWith(".gaia")?e.name:e.id}`)},o.vE.fetchUser=async e=>{const t=await g.A.fetchNameByWallet(e);return{id:e,name:t?`${t}.gaia`:c.wD.shortenAddress(e),isFallback:!0}},o.vE.getLoggedInUserMenu=async(e,t)=>new i.I(t.isFallback?new i._2({icon:new h.n_,label:"Profile",onClick:()=>{r.Ix.go(`/${t.name.endsWith(".gaia")?t.name:t.id}`),e.remove()}}):new i._2({icon:new h.n_,label:"Profile",onClick:()=>{e.remove()}}))}}const v=new w;n()}catch(e){n(e)}}))},7316:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>o});var r=s(75321),i=e([r]);r=(i.then?(await i)():i)[0];class o extends r.vs{names=["jupiter.gaia","mars.gaia","venus.gaia","saturn.gaia","mercury.gaia","neptune.gaia","pluto.gaia","earth.gaia","moon.gaia","cosmos.gaia","star.gaia","galaxy.gaia","nebula.gaia","comet.gaia","meteor.gaia","yj.gaia"];constructor(){super(".floating-names-background");this.generateRandomNames().forEach((e=>{this.append(this.createFloatingName(e))})),this.append((0,r.el)(".foreground-overlay"))}generateRandomNames(){return this.names.map((e=>({id:Math.random().toString(36).substr(2,9),name:e,x:100*Math.random(),y:100*Math.random(),z:Math.random()})))}getStyleProperties(e){const t=.2+.8*e.z,s=.5+.5*e.z,n=e.z<.3?"3px":"0px";return{position:"absolute",left:`${e.x}%`,top:`${e.y}%`,opacity:`${t}`,transform:`scale(${s})`,filter:`blur(${n})`,zIndex:`${Math.floor(100*e.z)}`}}createFloatingName(e){const t=(0,r.el)("div.name-item",(0,r.el)("div.dot"),(0,r.el)("span.name",e.name));return t.style(this.getStyleProperties(e)),t}}n()}catch(e){n(e)}}))},73061:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>h});var r=s(75321),i=s(83501),o=s(45984),a=s(6204),c=s(52477),l=e([r,i,a,c]);[r,i,a,c]=l.then?(await l)():l;class h extends r.vs{nameInput;resultModal;nameChangeDebouncer=new o.aq(300,(()=>{this.searchNames()}));constructor(){super(".name-search-form"),this.append(this.nameInput=new i.pd(".name",{placeholder:"Search for a name",suffixIcon:(0,r.el)(".icon-container",new a.WI,(new a.vu).onDom("click",(()=>{this.nameInput.value="",this.nameInput.focus()}))),autoCapitalize:"none",onKeyDown:e=>{"."===e.key&&e.preventDefault()},onChange:()=>this.nameChangeDebouncer.execute()}),this.resultModal=new c.A),this.resultModal.addClass("hidden")}async searchNames(){const e=this.nameInput.value.trim().toLowerCase();0===e.length?this.resultModal.addClass("hidden"):(this.resultModal.removeClass("hidden"),this.resultModal.query=e)}}n()}catch(e){n(e)}}))},96858:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>a});var r=s(75321),i=s(8981),o=e([r,i]);[r,i]=o.then?(await o)():o;class a extends r.vs{children=[];constructor(){super(".name-search-result-list")}set names(e){this.clear().append(...e.map((e=>new i.A(e))))}}n()}catch(e){n(e)}}))},8981:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>o});var r=s(75321),i=e([r]);r=(i.then?(await i)():i)[0];class o extends r.vs{constructor(e){super("a.name-search-result-list-item"),this.append(`${e}.gaia`,(0,r.el)(".registered","Registered")),this.onDom("click",(()=>r.Ix.go(`/${e}.gaia`)))}}n()}catch(e){n(e)}}))},52477:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>h});var r=s(75321),i=s(83501),o=s(6204),a=s(3449),c=s(96858),l=e([r,i,o,a,c]);[r,i,o,a,c]=l.then?(await l)():l;class h extends r.vs{searchNonce=0;resultList;availableNameDisplay;constructor(){super(".name-search-result-modal"),this.append(this.resultList=new c.A)}set query(e){this.search(e)}async search(e){this.availableNameDisplay?.remove(),this.searchNonce+=1;const t=this.searchNonce,s=new i.JG.LoadingSpinner;this.addClass("loading").clear(this.resultList).append(s);const n=await a.A.searchNames(e),c=n.some((t=>t.name.toLowerCase()===e.toLowerCase()));if(this.resultList.names=n.map((e=>e.name)),!c){const t=`${e.toLowerCase()}.gaia`;this.availableNameDisplay=(0,r.el)(".available-name-display",(0,r.el)("h3","Available"),(0,r.el)("a.available-name",t,new o.Pt,{onclick:()=>r.Ix.go(`/${t}/register`)})).appendTo(this),this.availableNameDisplay.on("remove",(()=>this.availableNameDisplay=void 0))}t===this.searchNonce&&(s.remove(),this.removeClass("loading"))}}n()}catch(e){n(e)}}))},54027:(e,t,s)=>{s.d(t,{q:()=>n});const n="*"},98699:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>d});var r=s(75321),i=s(3041),o=s(24688),a=s(18811),c=s(23048),l=s(80180),h=s(1361),u=e([r,i,o,a,c,l,h]);async function d(e){o.A.init(e),r.Pe.init(),i.A.init(),r.Ix.add("/",a.A).add("/:name",l.A).add("/:name/register",h.A),c.A.init()}[r,i,o,a,c,l,h]=u.then?(await u)():u,n()}catch(f){n(f)}}))},72484:(e,t,s)=>{s.a(e,(async(e,t)=>{try{var n=s(98699),r=e([n]);n=(r.then?(await r)():r)[0],await(0,n.A)({isDevMode:!1,supabaseUrl:"https://dhzxulywizygtdficytt.supabase.co",supabaseKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRoenh1bHl3aXp5Z3RkZmljeXR0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzAxMTIxNDUsImV4cCI6MjA0NTY4ODE0NX0.xUd8nqcT2aVn1j4x8c-pRbDcFSaIGtkn7SAcmKleBms",walletConnectProjectId:"7538ca3cec20504b06a3338d0e53b028"}),t()}catch(e){t(e)}}),1)},3449:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>c});var r=s(9632),i=s(54027),o=e([r]);r=(o.then?(await o)():o)[0];class a extends r.r0{constructor(){super("gaia_names",i.q)}async fetchNameByWallet(e){const t=await this.fetchSingle((t=>t.eq("wallet_address",e)));return t?.name}async fetchName(e){return this.fetchSingle((t=>t.eq("name",e)))}async searchNames(e){return this.fetch((t=>t.ilike("name",`%${e}%`)))}}const c=new a;n()}catch(e){n(e)}}))},18811:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>u});var r=s(75321),i=s(7993),o=s(24688),a=s(7316),c=s(73061),l=s(23048),h=e([r,o,a,c,l]);[r,o,a,c,l]=h.then?(await h)():h;class u extends r.Ss{constructor(){super(),document.title=(o.A.isDevMode?"(Dev) ":"")+"Gaia Names",l.A.content=this.container=(0,i.a)(),new r.Or(".name-search-form-container").append(new a.A,(0,r.el)("main",(0,r.el)("h2","Gaia Names"),new c.A,(0,r.el)(".credit","Created by ",(0,r.el)("a","Gaia Protocol",{href:"https://gaiaprotocol.com",target:"_blank"}))))}}n()}catch(e){n(e)}}))},23048:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>l});var r=s(75321),i=s(49083),o=s(3041),a=e([r,i,o]);[r,i,o]=a.then?(await a)():a;class c{contentContainer=new r.Or(".layout main");set content(e){this.contentContainer.clear(),this.contentContainer.htmlElement.innerHTML="",this.contentContainer.append(e)}init(){new r.Or(".layout header .buttons").append(new i.mN(o.A,!0)),new r.Or(".layout header a.gaia-protocol-logo").onDom("click",(e=>{e.preventDefault(),r.Ix.go("/")}))}}const l=new c;n()}catch(e){n(e)}}))},80180:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>u});var r=s(75321),i=s(83501),o=s(57882),a=s(24688),c=s(3449),l=s(23048),h=e([r,i,a,c,l]);[r,i,a,c,l]=h.then?(await h)():h;class u extends r.Ss{constructor(){super(),document.title=(a.A.isDevMode?"(Dev) ":"")+"Profile - Gaia Names"}changeData(e){l.A.content=this.container=(0,o.X)(e.name),e.name.endsWith(".gaia")?this.loadName(e.name.replace(".gaia","").toLowerCase()):this.showProfile({wallet_address:e.name,name:e.name})}async loadName(e){const t=(new i.JG.LoadingSpinner).appendTo(this.container),s=await c.A.fetchName(e);s?this.showProfile(s):r.Ix.goWithoutHistory(`/${e}.gaia/register`),t.remove()}showProfile(e){console.log(e)}}n()}catch(e){n(e)}}))},1361:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>p});var r=s(75321),i=s(83501),o=s(49083),a=s(3041),c=s(6204),l=s(77859),h=s(24688),u=s(3449),d=s(23048),f=e([r,i,o,a,c,h,u,d]);[r,i,o,a,c,h,u,d]=f.then?(await f)():f;class p extends r.Ss{constructor(){super(),document.title=(h.A.isDevMode?"(Dev) ":"")+"Register Name - Gaia Names"}changeData(e){d.A.content=this.container=(0,l.E)(e.name),new r.Or(".register-name-view header a.back").onDom("click",(e=>{e.preventDefault(),r.Ix.go("/")})),a.A.isLoggedIn?this.render(e.name.replace(".gaia","").toLowerCase()):r.Ix.goWithoutHistory("/")}async render(e){const t=(new i.JG.LoadingSpinner).appendTo(this.container),[s,n]=await Promise.all([h.A.supabaseConnector.callEdgeFunction("check-god-mode"),u.A.fetchName(e)]);s?n?r.Ix.goWithoutHistory(`/${e}.gaia`):this.showRegisterForm(e):this.showNotEligible(),t.remove()}showNotEligible(){this.container.append((0,r.el)(".not-eligible",(0,r.el)("h2",new c.XA,"God Mode Required"),(0,r.el)("p","To register a GAIA Name, you need to activate God Mode by meeting one of the following requirements:"),(0,r.el)("ul",(0,r.el)("li","Hold 10,000 or more $GAIA"),(0,r.el)("li","Hold at least one The Gods NFT")),(0,r.el)(".buttons",new i.$n({type:i.VQ.Contained,icon:new c.PH,iconPosition:"right",title:"Buy $GAIA",onClick:()=>{new i.Lt({icon:new c.CT,title:"$GAIA Launch Schedule",message:"$GAIA will be launched in Q1 2025.\nStay tuned for more updates!"})}}),new i.$n({type:i.VQ.Contained,icon:new c.PH,iconPosition:"right",title:"Buy The Gods NFT",onClick:()=>{open("https://opensea.io/collection/gaia-protocol-gods")}}))))}showRegisterForm(e){this.container.append((0,r.el)(".register-form",(0,r.el)("p","Would you like to register ",(0,r.el)("b",`${e}.gaia`)," as your wallet name?\nThe name will remain valid only while you maintain ",(0,r.el)("b","God Mode")," by holding either 10,000 $GAIA or at least one The Gods NFT."),(0,r.el)(".buttons",new i.$n({type:i.VQ.Outlined,title:"Cancel",onClick:()=>r.Ix.go("/")}),new i.$n({type:i.VQ.Contained,title:"Register Name",onClick:async()=>{if(await h.A.supabaseConnector.callEdgeFunction("set-gaia-name",{name:e}),a.A.loggedInAddress){const t=await o.$5.getUser(a.A.loggedInAddress);t.name=`${e}.gaia`,o.$5.setUser(t)}r.Ix.go(`/${e}.gaia`)}}))))}}n()}catch(e){n(e)}}))},7993:(e,t,s)=>{s.d(t,{a:()=>r});var n=s(69280);function r(){return(0,n.el)(".intro-view",(0,n.el)("section.name-search-form-container"))}},57882:(e,t,s)=>{s.d(t,{X:()=>r});var n=s(69280);function r(e){return(0,n.el)(".profile-view",(0,n.el)("header",(0,n.el)("h1",e)))}},77859:(e,t,s)=>{s.d(t,{E:()=>r});var n=s(69280);function r(e){return(0,n.el)(".register-name-view",(0,n.el)("header",(0,n.el)("a.back",{href:"/"},(0,n.q)('<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="m313-440 224 224-57 56-320-320 320-320 57 56-224 224h487v80H313Z"/></svg>')),(0,n.el)("h1",`Register ${e}`)))}},34261:(e,t,s)=>{s.r(t),s.d(t,{Headers:()=>o,Request:()=>a,Response:()=>c,default:()=>i,fetch:()=>r});var n=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==s.g)return s.g;throw new Error("unable to locate global object")}();const r=n.fetch,i=n.fetch.bind(n),o=n.Headers,a=n.Request,c=n.Response},65601:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(s(34261)),i=n(s(96860));t.default=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=r.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let s=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then((async e=>{var t,s,n;let r=null,o=null,a=null,c=e.status,l=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(o="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const n=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),i=null===(s=e.headers.get("content-range"))||void 0===s?void 0:s.split("/");n&&i&&i.length>1&&(a=parseInt(i[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(o)&&(o.length>1?(r={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,a=null,c=406,l="Not Acceptable"):o=1===o.length?o[0]:null)}else{const t=await e.text();try{r=JSON.parse(t),Array.isArray(r)&&404===e.status&&(o=[],r=null,c=200,l="OK")}catch(s){404===e.status&&""===t?(c=204,l="No Content"):r={message:t}}if(r&&this.isMaybeSingle&&(null===(n=null==r?void 0:r.details)||void 0===n?void 0:n.includes("0 rows"))&&(r=null,c=200,l="OK"),r&&this.shouldThrowOnError)throw new i.default(r)}return{error:r,data:o,count:a,status:c,statusText:l}}));return this.shouldThrowOnError||(s=s.catch((e=>{var t,s,n;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(s=null==e?void 0:e.stack)&&void 0!==s?s:""}`,hint:"",code:`${null!==(n=null==e?void 0:e.code)&&void 0!==n?n:""}`},data:null,count:null,status:0,statusText:""}}))),s.then(e,t)}}},92535:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(s(95111)),i=n(s(33987)),o=s(17996);class a{constructor(e,{headers:t={},schema:s,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},o.DEFAULT_HEADERS),t),this.schemaName=s,this.fetch=n}from(e){const t=new URL(`${this.url}/${e}`);return new r.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new a(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:n=!1,count:r}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let c;s||n?(o=s?"HEAD":"GET",Object.entries(t).filter((([e,t])=>void 0!==t)).map((([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`])).forEach((([e,t])=>{a.searchParams.append(e,t)}))):(o="POST",c=t);const l=Object.assign({},this.headers);return r&&(l.Prefer=`count=${r}`),new i.default({method:o,url:a,headers:l,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}}t.default=a},96860:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class s extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=s},33987:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(s(76315));class i extends r.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map((e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`)).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:n}={}){let r="";"plain"===n?r="pl":"phrase"===n?r="ph":"websearch"===n&&(r="w");const i=void 0===s?"":`(${s})`;return this.url.searchParams.append(e,`${r}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach((([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)})),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const n=s?`${s}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}}t.default=i},95111:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(s(33987));t.default=class{constructor(e,{headers:t={},schema:s,fetch:n}){this.url=e,this.headers=t,this.schema=s,this.fetch=n}select(e,{head:t=!1,count:s}={}){const n=t?"HEAD":"GET";let i=!1;const o=(null!=e?e:"*").split("").map((e=>/\s/.test(e)&&!i?"":('"'===e&&(i=!i),e))).join("");return this.url.searchParams.set("select",o),s&&(this.headers.Prefer=`count=${s}`),new r.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:s=!0}={}){const n=[];if(this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),s||n.push("missing=default"),this.headers.Prefer=n.join(","),Array.isArray(e)){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(t.length>0){const e=[...new Set(t)].map((e=>`"${e}"`));this.url.searchParams.set("columns",e.join(","))}}return new r.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:n,defaultToNull:i=!0}={}){const o=[`resolution=${s?"ignore":"merge"}-duplicates`];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&o.push(this.headers.Prefer),n&&o.push(`count=${n}`),i||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(t.length>0){const e=[...new Set(t)].map((e=>`"${e}"`));this.url.searchParams.set("columns",e.join(","))}}return new r.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),this.headers.Prefer=s.join(","),new r.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new r.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}},76315:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(s(65601));class i extends r.default{select(e){let t=!1;const s=(null!=e?e:"*").split("").map((e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e))).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:n,referencedTable:r=n}={}){const i=r?`${r}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${void 0===s?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const n=void 0===s?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:n=s}={}){const r=void 0===n?"offset":`${n}.offset`,i=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this.url.searchParams.set(i,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:n=!1,wal:r=!1,format:i="text"}={}){var o;const a=[e?"analyze":null,t?"verbose":null,s?"settings":null,n?"buffers":null,r?"wal":null].filter(Boolean).join("|"),c=null!==(o=this.headers.Accept)&&void 0!==o?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${c}"; options=${a};`,this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}t.default=i},17996:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_HEADERS=void 0;const n=s(52621);t.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`}},61205:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const r=n(s(92535));t.PostgrestClient=r.default;const i=n(s(95111));t.PostgrestQueryBuilder=i.default;const o=n(s(33987));t.PostgrestFilterBuilder=o.default;const a=n(s(76315));t.PostgrestTransformBuilder=a.default;const c=n(s(65601));t.PostgrestBuilder=c.default;const l=n(s(96860));t.PostgrestError=l.default,t.default={PostgrestClient:r.default,PostgrestQueryBuilder:i.default,PostgrestFilterBuilder:o.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:c.default,PostgrestError:l.default}},52621:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,t.version="0.0.0-automated"},49854:(e,t,s)=>{s.d(t,{UU:()=>Tt});class n extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class r extends n{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class i extends n{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class o extends n{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var a;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(a||(a={}));var c=function(e,t,s,n){return new(s||(s=Promise))((function(r,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};class l{constructor(e,{headers:t={},customFetch:n,region:r=a.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=(e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(s.bind(s,34261)).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)})(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return c(this,void 0,void 0,(function*(){try{const{headers:n,method:a,body:c}=t;let l,h={},{region:u}=t;u||(u=this.region),u&&"any"!==u&&(h["x-region"]=u),c&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&("undefined"!=typeof Blob&&c instanceof Blob||c instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",l=c):"string"==typeof c?(h["Content-Type"]="text/plain",l=c):"undefined"!=typeof FormData&&c instanceof FormData?l=c:(h["Content-Type"]="application/json",l=JSON.stringify(c)));const d=yield this.fetch(`${this.url}/${e}`,{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),n),body:l}).catch((e=>{throw new r(e)})),f=d.headers.get("x-relay-error");if(f&&"true"===f)throw new i(d);if(!d.ok)throw new o(d);let p,g=(null!==(s=d.headers.get("Content-Type"))&&void 0!==s?s:"text/plain").split(";")[0].trim();return p="application/json"===g?yield d.json():"application/octet-stream"===g?yield d.blob():"text/event-stream"===g?d:"multipart/form-data"===g?yield d.formData():yield d.text(),{data:p,error:null}}catch(e){return{data:null,error:e}}}))}}var h=s(61205);const{PostgrestClient:u,PostgrestQueryBuilder:d,PostgrestFilterBuilder:f,PostgrestTransformBuilder:p,PostgrestBuilder:g}=h,m={"X-Client-Info":"realtime-js/2.10.7"};var w,v,y,b,_,k;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(w||(w={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(v||(v={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(y||(y={})),function(e){e.websocket="websocket"}(b||(b={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(_||(_={}));class C{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const n=t.getUint8(1),r=t.getUint8(2);let i=this.HEADER_LENGTH+2;const o=s.decode(e.slice(i,i+n));i+=n;const a=s.decode(e.slice(i,i+r));i+=r;return{ref:null,topic:o,event:a,payload:JSON.parse(s.decode(e.slice(i,e.byteLength)))}}}class x{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout((()=>{this.tries=this.tries+1,this.callback()}),this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(k||(k={}));const A=(e,t,s={})=>{var n;const r=null!==(n=s.skipTypes)&&void 0!==n?n:[];return Object.keys(t).reduce(((s,n)=>(s[n]=S(n,e,t,r),s)),{})},S=(e,t,s,n)=>{const r=t.find((t=>t.name===e)),i=null==r?void 0:r.type,o=s[e];return i&&!n.includes(i)?E(i,o):T(o)},E=(e,t)=>{if("_"===e.charAt(0)){const s=e.slice(1,e.length);return j(t,s)}switch(e){case k.bool:return I(t);case k.float4:case k.float8:case k.int2:case k.int4:case k.int8:case k.numeric:case k.oid:return P(t);case k.json:case k.jsonb:return $(t);case k.timestamp:return O(t);case k.abstime:case k.date:case k.daterange:case k.int4range:case k.int8range:case k.money:case k.reltime:case k.text:case k.time:case k.timestamptz:case k.timetz:case k.tsrange:case k.tstzrange:default:return T(t)}},T=e=>e,I=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},P=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},$=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},j=(e,t)=>{if("string"!=typeof e)return e;const s=e.length-1,n=e[s];if("{"===e[0]&&"}"===n){let n;const r=e.slice(1,s);try{n=JSON.parse("["+r+"]")}catch(e){n=r?r.split(","):[]}return n.map((e=>E(t,e)))}return e},O=e=>"string"==typeof e?e.replace(" ","T"):e,L=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class U{constructor(e,t,s={},n=1e4){this.channel=e,this.event=t,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t(null===(s=this.receivedResp)||void 0===s?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},(e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)})),this.timeoutTimer=setTimeout((()=>{this.trigger("timeout",{})}),this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter((t=>t.status===e)).forEach((e=>e.callback(t)))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var R,M,N,D;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(R||(R={}));class z{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},(e=>{const{onJoin:t,onLeave:s,onSync:n}=this.caller;this.joinRef=this.channel._joinRef(),this.state=z.syncState(this.state,e,t,s),this.pendingDiffs.forEach((e=>{this.state=z.syncDiff(this.state,e,t,s)})),this.pendingDiffs=[],n()})),this.channel._on(s.diff,{},(e=>{const{onJoin:t,onLeave:s,onSync:n}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=z.syncDiff(this.state,e,t,s),n())})),this.onJoin(((e,t,s)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:s})})),this.onLeave(((e,t,s)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:s})})),this.onSync((()=>{this.channel._trigger("presence",{event:"sync"})}))}static syncState(e,t,s,n){const r=this.cloneDeep(e),i=this.transformState(t),o={},a={};return this.map(r,((e,t)=>{i[e]||(a[e]=t)})),this.map(i,((e,t)=>{const s=r[e];if(s){const n=t.map((e=>e.presence_ref)),r=s.map((e=>e.presence_ref)),i=t.filter((e=>r.indexOf(e.presence_ref)<0)),c=s.filter((e=>n.indexOf(e.presence_ref)<0));i.length>0&&(o[e]=i),c.length>0&&(a[e]=c)}else o[e]=t})),this.syncDiff(r,{joins:o,leaves:a},s,n)}static syncDiff(e,t,s,n){const{joins:r,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(r,((t,n)=>{var r;const i=null!==(r=e[t])&&void 0!==r?r:[];if(e[t]=this.cloneDeep(n),i.length>0){const s=e[t].map((e=>e.presence_ref)),n=i.filter((e=>s.indexOf(e.presence_ref)<0));e[t].unshift(...n)}s(t,i,n)})),this.map(i,((t,s)=>{let r=e[t];if(!r)return;const i=s.map((e=>e.presence_ref));r=r.filter((e=>i.indexOf(e.presence_ref)<0)),e[t]=r,n(t,r,s),0===r.length&&delete e[t]})),e}static map(e,t){return Object.getOwnPropertyNames(e).map((s=>t(s,e[s])))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce(((t,s)=>{const n=e[s];return t[s]="metas"in n?n.metas.map((e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e))):n,t}),{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(M||(M={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(N||(N={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(D||(D={}));class F{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=v.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new U(this,y.join,this.params,this.timeout),this.rejoinTimer=new x((()=>this._rejoinUntilConnected()),this.socket.reconnectAfterMs),this.joinPush.receive("ok",(()=>{this.state=v.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach((e=>e.send())),this.pushBuffer=[]})),this._onClose((()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=v.closed,this.socket._remove(this)})),this._onError((e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=v.errored,this.rejoinTimer.scheduleTimeout())})),this.joinPush.receive("timeout",(()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=v.errored,this.rejoinTimer.scheduleTimeout())})),this._on(y.reply,{},((e,t)=>{this._trigger(this._replyEventName(t),e)})),this.presence=new z(this),this.broadcastEndpointURL=L(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:r,presence:i,private:o}}=this.params;this._onError((t=>e&&e("CHANNEL_ERROR",t))),this._onClose((()=>e&&e("CLOSED")));const a={},c={broadcast:r,presence:i,postgres_changes:null!==(n=null===(s=this.bindings.postgres_changes)||void 0===s?void 0:s.map((e=>e.filter)))&&void 0!==n?n:[],private:o};this.socket.accessToken&&(a.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:c},a)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",(({postgres_changes:t})=>{var s;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),void 0!==t){const n=this.bindings.postgres_changes,r=null!==(s=null==n?void 0:n.length)&&void 0!==s?s:0,i=[];for(let s=0;s<r;s++){const r=n[s],{filter:{event:o,schema:a,table:c,filter:l}}=r,h=t&&t[s];if(!h||h.event!==o||h.schema!==a||h.table!==c||h.filter!==l)return this.unsubscribe(),void(e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes")));i.push(Object.assign(Object.assign({},r),{id:h.id}))}return this.bindings.postgres_changes=i,void(e&&e("SUBSCRIBED"))}e&&e("SUBSCRIBED")})).receive("error",(t=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(t).join(", ")||"error")))})).receive("timeout",(()=>{e&&e("TIMED_OUT")}))}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this._on(e,t,s)}async send(e,t={}){var s,n;if(this._canPush()||"broadcast"!==e.type)return new Promise((s=>{var n,r,i;const o=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(i=null===(r=null===(n=this.params)||void 0===n?void 0:n.config)||void 0===r?void 0:r.broadcast)||void 0===i?void 0:i.ack)||s("ok"),o.receive("ok",(()=>s("ok"))),o.receive("error",(()=>s("error"))),o.receive("timeout",(()=>s("timed out")))}));{const{event:r,payload:i}=e,o={method:"POST",headers:{Authorization:this.socket.accessToken?`Bearer ${this.socket.accessToken}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:i,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(s=t.timeout)&&void 0!==s?s:this.timeout);return await(null===(n=e.body)||void 0===n?void 0:n.cancel()),e.ok?"ok":"error"}catch(e){return"AbortError"===e.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=v.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(y.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise((s=>{const n=new U(this,y.leave,{},e);n.receive("ok",(()=>{t(),s("ok")})).receive("timeout",(()=>{t(),s("timed out")})).receive("error",(()=>{s("error")})),n.send(),this._canPush()||n.trigger("ok",{})}))}async _fetchWithTimeout(e,t,s){const n=new AbortController,r=setTimeout((()=>n.abort()),s),i=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(r),i}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new U(this,e,t,s);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var n,r;const i=e.toLocaleLowerCase(),{close:o,error:a,leave:c,join:l}=y;if(s&&[o,a,c,l].indexOf(i)>=0&&s!==this._joinRef())return;let h=this._onMessage(i,t,s);if(t&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?null===(n=this.bindings.postgres_changes)||void 0===n||n.filter((e=>{var t,s,n;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(n=null===(s=e.filter)||void 0===s?void 0:s.event)||void 0===n?void 0:n.toLocaleLowerCase())===i})).map((e=>e.callback(h,s))):null===(r=this.bindings[i])||void 0===r||r.filter((e=>{var s,n,r,o,a,c;if(["broadcast","presence","postgres_changes"].includes(i)){if("id"in e){const i=e.id,o=null===(s=e.filter)||void 0===s?void 0:s.event;return i&&(null===(n=t.ids)||void 0===n?void 0:n.includes(i))&&("*"===o||(null==o?void 0:o.toLocaleLowerCase())===(null===(r=t.data)||void 0===r?void 0:r.type.toLocaleLowerCase()))}{const s=null===(a=null===(o=null==e?void 0:e.filter)||void 0===o?void 0:o.event)||void 0===a?void 0:a.toLocaleLowerCase();return"*"===s||s===(null===(c=null==t?void 0:t.event)||void 0===c?void 0:c.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===i})).map((e=>{if("object"==typeof h&&"ids"in h){const e=h.data,{schema:t,table:s,commit_timestamp:n,type:r,errors:i}=e,o={schema:t,table:s,commit_timestamp:n,eventType:r,new:{},old:{},errors:i};h=Object.assign(Object.assign({},o),this._getPayloadRecords(e))}e.callback(h,s)}))}_isClosed(){return this.state===v.closed}_isJoined(){return this.state===v.joined}_isJoining(){return this.state===v.joining}_isLeaving(){return this.state===v.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const n=e.toLocaleLowerCase(),r={type:n,filter:t,callback:s};return this.bindings[n]?this.bindings[n].push(r):this.bindings[n]=[r],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter((e=>{var n;return!((null===(n=e.type)||void 0===n?void 0:n.toLocaleLowerCase())===s&&F.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(y.close,{},e)}_onError(e){this._on(y.error,{},(t=>e(t)))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=v.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=A(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=A(e.columns,e.old_record)),t}}const B=()=>{},q="undefined"!=typeof WebSocket;class G{constructor(e,t){var n;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=m,this.params={},this.timeout=1e4,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=B,this.conn=null,this.sendBuffer=[],this.serializer=new C,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(s.bind(s,34261)).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)},this.endPoint=`${e}/${b.websocket}`,this.httpEndpoint=L(e),(null==t?void 0:t.transport)?this.transport=t.transport:this.transport=null,(null==t?void 0:t.params)&&(this.params=t.params),(null==t?void 0:t.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),(null==t?void 0:t.timeout)&&(this.timeout=t.timeout),(null==t?void 0:t.logger)&&(this.logger=t.logger),(null==t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const r=null===(n=null==t?void 0:t.params)||void 0===n?void 0:n.apikey;if(r&&(this.accessToken=r,this.apiKey=r),this.reconnectAfterMs=(null==t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null==t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null==t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new x((async()=>{this.disconnect(),this.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(null==t?void 0:t.fetch),null==t?void 0:t.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(null==t?void 0:t.worker)||!1,this.workerUrl=null==t?void 0:t.workerUrl}}connect(){if(!this.conn)if(this.transport)this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});else{if(q)return this.conn=new WebSocket(this._endPointURL()),void this.setupConnection();this.conn=new H(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),s.e(369).then(s.t.bind(s,52369,23)).then((({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()}))}}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map((e=>e.unsubscribe())));return this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case w.connecting:return _.Connecting;case w.open:return _.Open;case w.closing:return _.Closing;default:return _.Closed}}isConnected(){return this.connectionState()===_.Open}channel(e,t={config:{}}){const s=new F(`realtime:${e}`,t,this);return this.channels.push(s),s}push(e){const{topic:t,event:s,payload:n,ref:r}=e,i=()=>{this.encode(e,(e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)}))};this.log("push",`${t} ${s} (${r})`,n),this.isConnected()?i():this.sendBuffer.push(i)}setAuth(e){this.accessToken=e,this.channels.forEach((t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(y.access_token,{access_token:e})}))}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find((t=>t.topic===e&&(t._isJoined()||t._isJoining())));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter((t=>t._joinRef()!==e._joinRef()))}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}_onConnMessage(e){this.decode(e.data,(e=>{let{topic:t,event:s,payload:n,ref:r}=e;(r&&r===this.pendingHeartbeatRef||s===(null==n?void 0:n.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${n.status||""} ${t} ${s} ${r&&"("+r+")"||""}`,n),this.channels.filter((e=>e._isMember(t))).forEach((e=>e._trigger(s,n,r))),this.stateChangeCallbacks.message.forEach((t=>t(e)))}))}async _onConnOpen(){if(this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.worker){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this._sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}else this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval((()=>this._sendHeartbeat()),this.heartbeatIntervalMs);this.stateChangeCallbacks.open.forEach((e=>e()))}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach((t=>t(e)))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach((t=>t(e)))}_triggerChanError(){this.channels.forEach((e=>e._trigger(y.error)))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const s=e.match(/\?/)?"&":"?";return`${e}${s}${new URLSearchParams(t)}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach((e=>e())),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}}class H{constructor(e,t,s){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=w.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=s.close}}class J extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function V(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class K extends J{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class W extends J{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Z=function(e,t,s,n){return new(s||(s=Promise))((function(r,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};const X=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(s.bind(s,34261)).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)},Q=e=>{if(Array.isArray(e))return e.map((e=>Q(e)));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach((([e,s])=>{const n=e.replace(/([-_][a-z])/gi,(e=>e.toUpperCase().replace(/[-_]/g,"")));t[n]=Q(s)})),t};var Y=function(e,t,s,n){return new(s||(s=Promise))((function(r,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};const ee=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),te=(e,t,n)=>Y(void 0,void 0,void 0,(function*(){const r=yield Z(void 0,void 0,void 0,(function*(){return"undefined"==typeof Response?(yield Promise.resolve().then(s.bind(s,34261))).Response:Response}));e instanceof r&&!(null==n?void 0:n.noResolveJson)?e.json().then((s=>{t(new K(ee(s),e.status||500))})).catch((e=>{t(new W(ee(e),e))})):t(new W(ee(e),e))}));function se(e,t,s,n,r,i){return Y(this,void 0,void 0,(function*(){return new Promise(((o,a)=>{e(s,((e,t,s,n)=>{const r={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?r:(r.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),n&&(r.body=JSON.stringify(n)),Object.assign(Object.assign({},r),s))})(t,n,r,i)).then((e=>{if(!e.ok)throw e;return(null==n?void 0:n.noResolveJson)?e:e.json()})).then((e=>o(e))).catch((e=>te(e,a,n)))}))}))}function ne(e,t,s,n){return Y(this,void 0,void 0,(function*(){return se(e,"GET",t,s,n)}))}function re(e,t,s,n,r){return Y(this,void 0,void 0,(function*(){return se(e,"POST",t,n,r,s)}))}function ie(e,t,s,n,r){return Y(this,void 0,void 0,(function*(){return se(e,"DELETE",t,n,r,s)}))}var oe=function(e,t,s,n){return new(s||(s=Promise))((function(r,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};const ae={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ce={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class le{constructor(e,t={},s,n){this.url=e,this.headers=t,this.bucketId=s,this.fetch=X(n)}uploadOrUpdate(e,t,s,n){return oe(this,void 0,void 0,(function*(){try{let r;const i=Object.assign(Object.assign({},ce),n);let o=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(i.upsert)});const a=i.metadata;"undefined"!=typeof Blob&&s instanceof Blob?(r=new FormData,r.append("cacheControl",i.cacheControl),a&&r.append("metadata",this.encodeMetadata(a)),r.append("",s)):"undefined"!=typeof FormData&&s instanceof FormData?(r=s,r.append("cacheControl",i.cacheControl),a&&r.append("metadata",this.encodeMetadata(a))):(r=s,o["cache-control"]=`max-age=${i.cacheControl}`,o["content-type"]=i.contentType,a&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(a)))),(null==n?void 0:n.headers)&&(o=Object.assign(Object.assign({},o),n.headers));const c=this._removeEmptyFolders(t),l=this._getFinalPath(c),h=yield this.fetch(`${this.url}/object/${l}`,Object.assign({method:e,body:r,headers:o},(null==i?void 0:i.duplex)?{duplex:i.duplex}:{})),u=yield h.json();if(h.ok)return{data:{path:c,id:u.Id,fullPath:u.Key},error:null};return{data:null,error:u}}catch(e){if(V(e))return{data:null,error:e};throw e}}))}upload(e,t,s){return oe(this,void 0,void 0,(function*(){return this.uploadOrUpdate("POST",e,t,s)}))}uploadToSignedUrl(e,t,s,n){return oe(this,void 0,void 0,(function*(){const r=this._removeEmptyFolders(e),i=this._getFinalPath(r),o=new URL(this.url+`/object/upload/sign/${i}`);o.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:ce.upsert},n),i=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&s instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",s)):"undefined"!=typeof FormData&&s instanceof FormData?(e=s,e.append("cacheControl",t.cacheControl)):(e=s,i["cache-control"]=`max-age=${t.cacheControl}`,i["content-type"]=t.contentType);const a=yield this.fetch(o.toString(),{method:"PUT",body:e,headers:i}),c=yield a.json();if(a.ok)return{data:{path:r,fullPath:c.Key},error:null};return{data:null,error:c}}catch(e){if(V(e))return{data:null,error:e};throw e}}))}createSignedUploadUrl(e,t){return oe(this,void 0,void 0,(function*(){try{let s=this._getFinalPath(e);const n=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(n["x-upsert"]="true");const r=yield re(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:n}),i=new URL(this.url+r.url),o=i.searchParams.get("token");if(!o)throw new J("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:o},error:null}}catch(e){if(V(e))return{data:null,error:e};throw e}}))}update(e,t,s){return oe(this,void 0,void 0,(function*(){return this.uploadOrUpdate("PUT",e,t,s)}))}move(e,t,s){return oe(this,void 0,void 0,(function*(){try{return{data:yield re(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==s?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(e){if(V(e))return{data:null,error:e};throw e}}))}copy(e,t,s){return oe(this,void 0,void 0,(function*(){try{return{data:{path:(yield re(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==s?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(e){if(V(e))return{data:null,error:e};throw e}}))}createSignedUrl(e,t,s){return oe(this,void 0,void 0,(function*(){try{let n=this._getFinalPath(e),r=yield re(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},(null==s?void 0:s.transform)?{transform:s.transform}:{}),{headers:this.headers});const i=(null==s?void 0:s.download)?`&download=${!0===s.download?"":s.download}`:"";return r={signedUrl:encodeURI(`${this.url}${r.signedURL}${i}`)},{data:r,error:null}}catch(e){if(V(e))return{data:null,error:e};throw e}}))}createSignedUrls(e,t,s){return oe(this,void 0,void 0,(function*(){try{const n=yield re(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),r=(null==s?void 0:s.download)?`&download=${!0===s.download?"":s.download}`:"";return{data:n.map((e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${r}`):null}))),error:null}}catch(e){if(V(e))return{data:null,error:e};throw e}}))}download(e,t){return oe(this,void 0,void 0,(function*(){const s=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",n=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),r=n?`?${n}`:"";try{const t=this._getFinalPath(e),n=yield ne(this.fetch,`${this.url}/${s}/${t}${r}`,{headers:this.headers,noResolveJson:!0});return{data:yield n.blob(),error:null}}catch(e){if(V(e))return{data:null,error:e};throw e}}))}info(e){return oe(this,void 0,void 0,(function*(){const t=this._getFinalPath(e);try{const e=yield ne(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Q(e),error:null}}catch(e){if(V(e))return{data:null,error:e};throw e}}))}exists(e){return oe(this,void 0,void 0,(function*(){const t=this._getFinalPath(e);try{return yield function(e,t,s,n){return Y(this,void 0,void 0,(function*(){return se(e,"HEAD",t,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)}))}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(e){if(V(e)&&e instanceof W){const t=e.originalError;if([400,404].includes(null==t?void 0:t.status))return{data:!1,error:e}}throw e}}))}getPublicUrl(e,t){const s=this._getFinalPath(e),n=[],r=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==r&&n.push(r);const i=void 0!==(null==t?void 0:t.transform)?"render/image":"object",o=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==o&&n.push(o);let a=n.join("&");return""!==a&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${s}${a}`)}}}remove(e){return oe(this,void 0,void 0,(function*(){try{return{data:yield ie(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(e){if(V(e))return{data:null,error:e};throw e}}))}list(e,t,s){return oe(this,void 0,void 0,(function*(){try{const n=Object.assign(Object.assign(Object.assign({},ae),t),{prefix:e||""});return{data:yield re(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(e){if(V(e))return{data:null,error:e};throw e}}))}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const he={"X-Client-Info":"storage-js/2.7.1"};var ue=function(e,t,s,n){return new(s||(s=Promise))((function(r,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};class de{constructor(e,t={},s){this.url=e,this.headers=Object.assign(Object.assign({},he),t),this.fetch=X(s)}listBuckets(){return ue(this,void 0,void 0,(function*(){try{return{data:yield ne(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(V(e))return{data:null,error:e};throw e}}))}getBucket(e){return ue(this,void 0,void 0,(function*(){try{return{data:yield ne(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(e){if(V(e))return{data:null,error:e};throw e}}))}createBucket(e,t={public:!1}){return ue(this,void 0,void 0,(function*(){try{return{data:yield re(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(V(e))return{data:null,error:e};throw e}}))}updateBucket(e,t){return ue(this,void 0,void 0,(function*(){try{const s=yield function(e,t,s,n,r){return Y(this,void 0,void 0,(function*(){return se(e,"PUT",t,n,r,s)}))}(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers});return{data:s,error:null}}catch(e){if(V(e))return{data:null,error:e};throw e}}))}emptyBucket(e){return ue(this,void 0,void 0,(function*(){try{return{data:yield re(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(V(e))return{data:null,error:e};throw e}}))}deleteBucket(e){return ue(this,void 0,void 0,(function*(){try{return{data:yield ie(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(e){if(V(e))return{data:null,error:e};throw e}}))}}class fe extends de{constructor(e,t={},s){super(e,t,s)}from(e){return new le(this.url,this.headers,e,this.fetch)}}let pe="";pe="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const ge={headers:{"X-Client-Info":`supabase-js-${pe}/2.45.6`}},me={schema:"public"},we={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ve={};var ye=s(34261),be=function(e,t,s,n){return new(s||(s=Promise))((function(r,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};const _e=e=>{let t;return t=e||("undefined"==typeof fetch?ye.default:fetch),(...e)=>t(...e)},ke=(e,t,s)=>{const n=_e(s),r="undefined"==typeof Headers?ye.Headers:Headers;return(s,i)=>be(void 0,void 0,void 0,(function*(){var o;const a=null!==(o=yield t())&&void 0!==o?o:e;let c=new r(null==i?void 0:i.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${a}`),n(s,Object.assign(Object.assign({},i),{headers:c}))}))};var Ce=function(e,t,s,n){return new(s||(s=Promise))((function(r,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};const xe="2.65.1",Ae={"X-Client-Info":`gotrue-js/${xe}`},Se="X-Supabase-Api-Version",Ee={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"};const Te=()=>"undefined"!=typeof document,Ie={tested:!1,writable:!1},Pe=()=>{if(!Te())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(e){return!1}if(Ie.tested)return Ie.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ie.tested=!0,Ie.writable=!0}catch(e){Ie.tested=!0,Ie.writable=!1}return Ie.writable};function $e(e){const t={},s=new URL(e);if(s.hash&&"#"===s.hash[0])try{new URLSearchParams(s.hash.substring(1)).forEach(((e,s)=>{t[s]=e}))}catch(e){}return s.searchParams.forEach(((e,s)=>{t[s]=e})),t}const je=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(s.bind(s,34261)).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)},Oe=async(e,t,s)=>{await e.setItem(t,JSON.stringify(s))},Le=async(e,t)=>{const s=await e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch(e){return s}},Ue=async(e,t)=>{await e.removeItem(t)};class Re{constructor(){this.promise=new Re.promiseConstructor(((e,t)=>{this.resolve=e,this.reject=t}))}}function Me(e){const t=e.split(".");if(3!==t.length)throw new Error("JWT is not valid: not a JWT structure");if(!/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const s=t[1];return JSON.parse(function(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let s,n,r,i,o,a,c,l="",h=0;for(e=e.replace("-","+").replace("_","/");h<e.length;)i=t.indexOf(e.charAt(h++)),o=t.indexOf(e.charAt(h++)),a=t.indexOf(e.charAt(h++)),c=t.indexOf(e.charAt(h++)),s=i<<2|o>>4,n=(15&o)<<4|a>>2,r=(3&a)<<6|c,l+=String.fromCharCode(s),64!=a&&0!=n&&(l+=String.fromCharCode(n)),64!=c&&0!=r&&(l+=String.fromCharCode(r));return l}(s))}function Ne(e){return("0"+e.toString(16)).substr(-2)}async function De(e){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),s=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(s);return Array.from(n).map((e=>String.fromCharCode(e))).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ze(e,t,s=!1){const n=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let s="";for(let n=0;n<56;n++)s+=e.charAt(Math.floor(Math.random()*t));return s}return crypto.getRandomValues(e),Array.from(e,Ne).join("")}();let r=n;s&&(r+="/PASSWORD_RECOVERY"),await Oe(e,`${t}-code-verifier`,r);const i=await De(n);return[i,n===i?"plain":"s256"]}Re.promiseConstructor=Promise;const Fe=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;class Be extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function qe(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class Ge extends Be{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}class He extends Be{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Je extends Be{constructor(e,t,s,n){super(e,s,n),this.name=t,this.status=s}}class Ve extends Je{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Ke extends Je{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class We extends Je{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ze extends Je{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Xe extends Je{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Qe extends Je{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Ye(e){return qe(e)&&"AuthRetryableFetchError"===e.name}class et extends Je{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}var tt=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]])}return s};const st=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),nt=[502,503,504];async function rt(e){var t,s;if(!("object"==typeof(s=e)&&null!==s&&"status"in s&&"ok"in s&&"json"in s&&"function"==typeof s.json))throw new Qe(st(e),0);if(nt.includes(e.status))throw new Qe(st(e),e.status);let n,r;try{n=await e.json()}catch(e){throw new He(st(e),e)}const i=function(e){const t=e.headers.get(Se);if(!t)return null;if(!t.match(Fe))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(e){return null}}(e);if(i&&i.getTime()>=Ee.timestamp&&"object"==typeof n&&n&&"string"==typeof n.code?r=n.code:"object"==typeof n&&n&&"string"==typeof n.error_code&&(r=n.error_code),r){if("weak_password"===r)throw new et(st(n),e.status,(null===(t=n.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===r)throw new Ve}else if("object"==typeof n&&n&&"object"==typeof n.weak_password&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce(((e,t)=>e&&"string"==typeof t),!0))throw new et(st(n),e.status,n.weak_password.reasons);throw new Ge(st(n),e.status||500,r)}async function it(e,t,s,n){var r;const i=Object.assign({},null==n?void 0:n.headers);i[Se]||(i[Se]=Ee.name),(null==n?void 0:n.jwt)&&(i.Authorization=`Bearer ${n.jwt}`);const o=null!==(r=null==n?void 0:n.query)&&void 0!==r?r:{};(null==n?void 0:n.redirectTo)&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await async function(e,t,s,n,r,i){const o=((e,t,s,n)=>{const r={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),r.body=JSON.stringify(n),Object.assign(Object.assign({},r),s))})(t,n,r,i);let a;try{a=await e(s,Object.assign({},o))}catch(e){throw console.error(e),new Qe(st(e),0)}a.ok||await rt(a);if(null==n?void 0:n.noResolveJson)return a;try{return await a.json()}catch(e){await rt(e)}}(e,t,s+a,{headers:i,noResolveJson:null==n?void 0:n.noResolveJson},{},null==n?void 0:n.body);return(null==n?void 0:n.xform)?null==n?void 0:n.xform(c):{data:Object.assign({},c),error:null}}function ot(e){var t;let s=null;var n;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(s=Object.assign({},e),e.expires_at||(s.expires_at=(n=e.expires_in,Math.round(Date.now()/1e3)+n)));return{data:{session:s,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function at(e){const t=ot(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce(((e,t)=>e&&"string"==typeof t),!0)&&(t.data.weak_password=e.weak_password),t}function ct(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function lt(e){return{data:e,error:null}}function ht(e){const{action_link:t,email_otp:s,hashed_token:n,redirect_to:r,verification_type:i}=e,o=tt(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:s,hashed_token:n,redirect_to:r,verification_type:i},user:Object.assign({},o)},error:null}}function ut(e){return e}var dt=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]])}return s};class ft{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=je(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await it(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(e){if(qe(e))return{data:null,error:e};throw e}}async inviteUserByEmail(e,t={}){try{return await it(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ct})}catch(e){if(qe(e))return{data:{user:null},error:e};throw e}}async generateLink(e){try{const{options:t}=e,s=dt(e,["options"]),n=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(n.new_email=null==s?void 0:s.newEmail,delete n.newEmail),await it(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:ht,redirectTo:null==t?void 0:t.redirectTo})}catch(e){if(qe(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(e){try{return await it(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ct})}catch(e){if(qe(e))return{data:{user:null},error:e};throw e}}async listUsers(e){var t,s,n,r,i,o,a;try{const c={nextPage:null,lastPage:0,total:0},l=await it(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(s=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==s?s:"",per_page:null!==(r=null===(n=null==e?void 0:e.perPage)||void 0===n?void 0:n.toString())&&void 0!==r?r:""},xform:ut});if(l.error)throw l.error;const h=await l.json(),u=null!==(i=l.headers.get("x-total-count"))&&void 0!==i?i:0,d=null!==(a=null===(o=l.headers.get("link"))||void 0===o?void 0:o.split(","))&&void 0!==a?a:[];return d.length>0&&(d.forEach((e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),s=JSON.parse(e.split(";")[1].split("=")[1]);c[`${s}Page`]=t})),c.total=parseInt(u)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(e){if(qe(e))return{data:{users:[]},error:e};throw e}}async getUserById(e){try{return await it(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ct})}catch(e){if(qe(e))return{data:{user:null},error:e};throw e}}async updateUserById(e,t){try{return await it(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ct})}catch(e){if(qe(e))return{data:{user:null},error:e};throw e}}async deleteUser(e,t=!1){try{return await it(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ct})}catch(e){if(qe(e))return{data:{user:null},error:e};throw e}}async _listFactors(e){try{const{data:t,error:s}=await it(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:s}}catch(e){if(qe(e))return{data:null,error:e};throw e}}async _deleteFactor(e){try{return{data:await it(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(e){if(qe(e))return{data:null,error:e};throw e}}}const pt={getItem:e=>Pe()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Pe()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Pe()&&globalThis.localStorage.removeItem(e)}};function gt(e={}){return{getItem:t=>e[t]||null,setItem:(t,s)=>{e[t]=s},removeItem:t=>{delete e[t]}}}const mt=!!(globalThis&&Pe()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class wt extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class vt extends wt{}async function yt(e,t,s){mt&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout((()=>{n.abort(),mt&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)}),t),await globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},(async n=>{if(!n){if(0===t)throw mt&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new vt(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(mt)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(e){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",e)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}mt&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,n.name);try{return await s()}finally{mt&&console.log("@supabase/gotrue-js: navigatorLock: released",e,n.name)}}))}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}();const bt={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ae,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},_t=3e4;async function kt(e,t,s){return await s()}class Ct{constructor(e){var t,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ct.nextInstanceID,Ct.nextInstanceID+=1,this.instanceID>0&&Te()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},bt),e);if(this.logDebugMessages=!!n.debug,"function"==typeof n.debug&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new ft({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=je(n.fetch),this.lock=n.lock||kt,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:Te()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=yt:this.lock=kt,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:Pe()?this.storage=pt:(this.memoryStorage={},this.storage=gt(this.memoryStorage)):(this.memoryStorage={},this.storage=gt(this.memoryStorage)),Te()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(e){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",e)}null===(s=this.broadcastChannel)||void 0===s||s.addEventListener("message",(async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)}))}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${xe}) ${(new Date).toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,(async()=>await this._initialize())))()),await this.initializePromise}async _initialize(){try{const e=!!Te()&&await this._isPKCEFlow();if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:s}=await this._getSessionFromURL(e);if(s)return this._debug("#_initialize()","error detecting session from URL",s),"identity_already_exists"===(null==s?void 0:s.code)||await this._removeSession(),{error:s};const{session:n,redirectType:r}=t;return this._debug("#_initialize()","detected session in URL",n,"redirect type",r),await this._saveSession(n),setTimeout((async()=>{"recovery"===r?await this._notifyAllSubscribers("PASSWORD_RECOVERY",n):await this._notifyAllSubscribers("SIGNED_IN",n)}),0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return qe(e)?{error:e}:{error:new He("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,n;try{const r=await it(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(s=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==s?s:{},gotrue_meta_security:{captcha_token:null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.captchaToken}},xform:ot}),{data:i,error:o}=r;if(o||!i)return{data:{user:null,session:null},error:o};const a=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(e){if(qe(e))return{data:{user:null,session:null},error:e};throw e}}async signUp(e){var t,s,n;try{let r;if("email"in e){const{email:s,password:n,options:i}=e;let o=null,a=null;"pkce"===this.flowType&&([o,a]=await ze(this.storage,this.storageKey)),r=await it(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==i?void 0:i.emailRedirectTo,body:{email:s,password:n,data:null!==(t=null==i?void 0:i.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken},code_challenge:o,code_challenge_method:a},xform:ot})}else{if(!("phone"in e))throw new We("You must provide either an email or phone number and a password");{const{phone:t,password:i,options:o}=e;r=await it(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:i,data:null!==(s=null==o?void 0:o.data)&&void 0!==s?s:{},channel:null!==(n=null==o?void 0:o.channel)&&void 0!==n?n:"sms",gotrue_meta_security:{captcha_token:null==o?void 0:o.captchaToken}},xform:ot})}}const{data:i,error:o}=r;if(o||!i)return{data:{user:null,session:null},error:o};const a=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(e){if(qe(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:n,options:r}=e;t=await it(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:n,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken}},xform:at})}else{if(!("phone"in e))throw new We("You must provide either an email or phone number and a password");{const{phone:s,password:n,options:r}=e;t=await it(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:n,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken}},xform:at})}}const{data:s,error:n}=t;return n?{data:{user:null,session:null},error:n}:s&&s.session&&s.user?(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n}):{data:{user:null,session:null},error:new Ke}}catch(e){if(qe(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOAuth(e){var t,s,n,r;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(s=e.options)||void 0===s?void 0:s.scopes,queryParams:null===(n=e.options)||void 0===n?void 0:n.queryParams,skipBrowserRedirect:null===(r=e.options)||void 0===r?void 0:r.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,(async()=>this._exchangeCodeForSession(e)))}async _exchangeCodeForSession(e){const t=await Le(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(null!=t?t:"").split("/");try{const{data:t,error:r}=await it(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:ot});if(await Ue(this.storage,`${this.storageKey}-code-verifier`),r)throw r;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!=n?n:null}),error:r}):{data:{user:null,session:null,redirectType:null},error:new Ke}}catch(e){if(qe(e))return{data:{user:null,session:null,redirectType:null},error:e};throw e}}async signInWithIdToken(e){try{const{options:t,provider:s,token:n,access_token:r,nonce:i}=e,o=await it(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:r,nonce:i,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:ot}),{data:a,error:c}=o;return c?{data:{user:null,session:null},error:c}:a&&a.session&&a.user?(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:c}):{data:{user:null,session:null},error:new Ke}}catch(e){if(qe(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOtp(e){var t,s,n,r,i;try{if("email"in e){const{email:n,options:r}=e;let i=null,o=null;"pkce"===this.flowType&&([i,o]=await ze(this.storage,this.storageKey));const{error:a}=await it(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:n,data:null!==(t=null==r?void 0:r.data)&&void 0!==t?t:{},create_user:null===(s=null==r?void 0:r.shouldCreateUser)||void 0===s||s,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken},code_challenge:i,code_challenge_method:o},redirectTo:null==r?void 0:r.emailRedirectTo});return{data:{user:null,session:null},error:a}}if("phone"in e){const{phone:t,options:s}=e,{data:o,error:a}=await it(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(n=null==s?void 0:s.data)&&void 0!==n?n:{},create_user:null===(r=null==s?void 0:s.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},channel:null!==(i=null==s?void 0:s.channel)&&void 0!==i?i:"sms"}});return{data:{user:null,session:null,messageId:null==o?void 0:o.message_id},error:a}}throw new We("You must provide either an email or phone number.")}catch(e){if(qe(e))return{data:{user:null,session:null},error:e};throw e}}async verifyOtp(e){var t,s;try{let n,r;"options"in e&&(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo,r=null===(s=e.options)||void 0===s?void 0:s.captchaToken);const{data:i,error:o}=await it(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:r}}),redirectTo:n,xform:ot});if(o)throw o;if(!i)throw new Error("An error occurred on token verification.");const a=i.session,c=i.user;return(null==a?void 0:a.access_token)&&(await this._saveSession(a),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(e){if(qe(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithSSO(e){var t,s,n;try{let r=null,i=null;return"pkce"===this.flowType&&([r,i]=await ze(this.storage,this.storageKey)),await it(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(s=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==s?s:void 0}),(null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:r,code_challenge_method:i}),headers:this.headers,xform:lt})}catch(e){if(qe(e))return{data:null,error:e};throw e}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._reauthenticate()))}async _reauthenticate(){try{return await this._useSession((async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new Ve;const{error:n}=await it(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}}))}catch(e){if(qe(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:n,options:r}=e,{error:i}=await it(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken}},redirectTo:null==r?void 0:r.emailRedirectTo});return{data:{user:null,session:null},error:i}}if("phone"in e){const{phone:s,type:n,options:r}=e,{data:i,error:o}=await it(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken}}});return{data:{user:null,session:null,messageId:null==i?void 0:i.message_id},error:o}}throw new We("You must provide either an email or phone number and a type")}catch(e){if(qe(e))return{data:{user:null,session:null},error:e};throw e}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,(async()=>this._useSession((async e=>e))))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch(e){}})()),s}return await this.lock(`lock:${this.storageKey}`,e,(async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(e){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await Le(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=!!e.expires_at&&e.expires_at<=Date.now()/1e3;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,s,n)=>(t||"user"!==s||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,s,n))})}return{data:{session:e},error:null}}const{session:n,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{session:null},error:r}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,(async()=>await this._getUser()))}async _getUser(e){try{return e?await it(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ct}):await this._useSession((async e=>{var t,s,n;const{data:r,error:i}=e;if(i)throw i;return(null===(t=r.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await it(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(n=null===(s=r.session)||void 0===s?void 0:s.access_token)&&void 0!==n?n:void 0,xform:ct}):{data:{user:null},error:new Ve}}))}catch(e){if(qe(e))return function(e){return qe(e)&&"AuthSessionMissingError"===e.name}(e)&&(await this._removeSession(),await Ue(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:e};throw e}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._updateUser(e,t)))}async _updateUser(e,t={}){try{return await this._useSession((async s=>{const{data:n,error:r}=s;if(r)throw r;if(!n.session)throw new Ve;const i=n.session;let o=null,a=null;"pkce"===this.flowType&&null!=e.email&&([o,a]=await ze(this.storage,this.storageKey));const{data:c,error:l}=await it(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:a}),jwt:i.access_token,xform:ct});if(l)throw l;return i.user=c.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}}))}catch(e){if(qe(e))return{data:{user:null},error:e};throw e}}_decodeJWT(e){return Me(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._setSession(e)))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ve;const t=Date.now()/1e3;let s=t,n=!0,r=null;const i=Me(e.access_token);if(i.exp&&(s=i.exp,n=s<=t),n){const{session:t,error:s}=await this._callRefreshToken(e.refresh_token);if(s)return{data:{user:null,session:null},error:s};if(!t)return{data:{user:null,session:null},error:null};r=t}else{const{data:n,error:i}=await this._getUser(e.access_token);if(i)throw i;r={access_token:e.access_token,refresh_token:e.refresh_token,user:n.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)}return{data:{user:r.user,session:r},error:null}}catch(e){if(qe(e))return{data:{session:null,user:null},error:e};throw e}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._refreshSession(e)))}async _refreshSession(e){try{return await this._useSession((async t=>{var s;if(!e){const{data:n,error:r}=t;if(r)throw r;e=null!==(s=n.session)&&void 0!==s?s:void 0}if(!(null==e?void 0:e.refresh_token))throw new Ve;const{session:n,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{user:null,session:null},error:r}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}}))}catch(e){if(qe(e))return{data:{user:null,session:null},error:e};throw e}}async _getSessionFromURL(e){try{if(!Te())throw new Ze("No browser detected.");if("implicit"===this.flowType&&!this._isImplicitGrantFlow())throw new Ze("Not a valid implicit grant flow url.");if("pkce"==this.flowType&&!e)throw new Xe("Not a valid PKCE flow url.");const t=$e(window.location.href);if(e){if(!t.code)throw new Xe("No code detected.");const{data:e,error:s}=await this._exchangeCodeForSession(t.code);if(s)throw s;const n=new URL(window.location.href);return n.searchParams.delete("code"),window.history.replaceState(window.history.state,"",n.toString()),{data:{session:e.session,redirectType:null},error:null}}if(t.error||t.error_description||t.error_code)throw new Ze(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});const{provider_token:s,provider_refresh_token:n,access_token:r,refresh_token:i,expires_in:o,expires_at:a,token_type:c}=t;if(!(r&&o&&i&&c))throw new Ze("No session defined in URL");const l=Math.round(Date.now()/1e3),h=parseInt(o);let u=l+h;a&&(u=parseInt(a));const d=u-l;1e3*d<=_t&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${d}s, should have been closer to ${h}s`);const f=u-h;l-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,u,l):l-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,u,l);const{data:p,error:g}=await this._getUser(r);if(g)throw g;const m={provider_token:s,provider_refresh_token:n,access_token:r,expires_in:h,expires_at:u,refresh_token:i,token_type:c,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:t.type},error:null}}catch(e){if(qe(e))return{data:{session:null,redirectType:null},error:e};throw e}}_isImplicitGrantFlow(){const e=$e(window.location.href);return!(!Te()||!e.access_token&&!e.error_description)}async _isPKCEFlow(){const e=$e(window.location.href),t=await Le(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._signOut(e)))}async _signOut({scope:e}={scope:"global"}){return await this._useSession((async t=>{var s;const{data:n,error:r}=t;if(r)return{error:r};const i=null===(s=n.session)||void 0===s?void 0:s.access_token;if(i){const{error:t}=await this.admin.signOut(i,e);if(t&&(!function(e){return qe(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await Ue(this.storage,`${this.storageKey}-code-verifier`)),{error:null}}))}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>{await this.initializePromise,await this._acquireLock(-1,(async()=>{this._emitInitialSession(t)}))})(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession((async t=>{var s,n;try{const{data:{session:n},error:r}=t;if(r)throw r;await(null===(s=this.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(t){await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",t),console.error(t)}}))}async resetPasswordForEmail(e,t={}){let s=null,n=null;"pkce"===this.flowType&&([s,n]=await ze(this.storage,this.storageKey,!0));try{return await it(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(e){if(qe(e))return{data:null,error:e};throw e}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(e){if(qe(e))return{data:null,error:e};throw e}}async linkIdentity(e){var t;try{const{data:s,error:n}=await this._useSession((async t=>{var s,n,r,i,o;const{data:a,error:c}=t;if(c)throw c;const l=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(s=e.options)||void 0===s?void 0:s.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:!0});return await it(this.fetch,"GET",l,{headers:this.headers,jwt:null!==(o=null===(i=a.session)||void 0===i?void 0:i.access_token)&&void 0!==o?o:void 0})}));if(n)throw n;return Te()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==s?void 0:s.url),{data:{provider:e.provider,url:null==s?void 0:s.url},error:null}}catch(t){if(qe(t))return{data:{provider:e.provider,url:null},error:t};throw t}}async unlinkIdentity(e){try{return await this._useSession((async t=>{var s,n;const{data:r,error:i}=t;if(i)throw i;return await it(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(n=null===(s=r.session)||void 0===s?void 0:s.access_token)&&void 0!==n?n:void 0})}))}catch(e){if(qe(e))return{data:null,error:e};throw e}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await(s=async s=>(s>0&&await async function(e){return await new Promise((t=>{setTimeout((()=>t(null)),e)}))}(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await it(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ot})),n=(e,t)=>{const s=200*Math.pow(2,e);return t&&Ye(t)&&Date.now()+s-r<_t},new Promise(((e,t)=>{(async()=>{for(let r=0;r<1/0;r++)try{const t=await s(r);if(!n(r,null,t))return void e(t)}catch(e){if(!n(r,e))return void t(e)}})()})))}catch(e){if(this._debug(t,"error",e),qe(e))return{data:{session:null,user:null},error:e};throw e}finally{this._debug(t,"end")}var s,n}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),Te()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const s=await Le(this.storage,this.storageKey);if(this._debug(t,"session from storage",s),!this._isValidSession(s))return this._debug(t,"session is not valid"),void(null!==s&&await this._removeSession());const n=Math.round(Date.now()/1e3),r=(null!==(e=s.expires_at)&&void 0!==e?e:1/0)<n+10;if(this._debug(t,`session has${r?"":" not"} expired with margin of 10s`),r){if(this.autoRefreshToken&&s.refresh_token){const{error:e}=await this._callRefreshToken(s.refresh_token);e&&(console.error(e),Ye(e)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(e){return this._debug(t,"error",e),void console.error(e)}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new Ve;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Re;const{data:t,error:s}=await this._refreshAccessToken(e);if(s)throw s;if(!t.session)throw new Ve;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const n={session:t.session,error:null};return this.refreshingDeferred.resolve(n),n}catch(e){if(this._debug(n,"error",e),qe(e)){const s={session:null,error:e};return Ye(e)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(s),s}throw null===(s=this.refreshingDeferred)||void 0===s||s.reject(e),e}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,s=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const n=[],r=Array.from(this.stateChangeEmitters.values()).map((async s=>{try{await s.callback(e,t)}catch(e){n.push(e)}}));if(await Promise.all(r),n.length>0){for(let e=0;e<n.length;e+=1)console.error(n[e]);throw n[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Oe(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Ue(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Te()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(e){console.error("removing visibilitychange callback failed",e)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval((()=>this._autoRefreshTokenTick()),_t);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout((async()=>{await this.initializePromise,await this._autoRefreshTokenTick()}),0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,(async()=>{try{const e=Date.now();try{return await this._useSession((async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const n=Math.floor((1e3*s.expires_at-e)/_t);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),n<=3&&await this._callRefreshToken(s.refresh_token)}))}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(e){if(!(e.isAcquireTimeout||e instanceof wt))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Te()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,(async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const n=[`provider=${encodeURIComponent(t)}`];if((null==s?void 0:s.redirectTo)&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),(null==s?void 0:s.scopes)&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),"pkce"===this.flowType){const[e,t]=await ze(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});n.push(s.toString())}if(null==s?void 0:s.queryParams){const e=new URLSearchParams(s.queryParams);n.push(e.toString())}return(null==s?void 0:s.skipBrowserRedirect)&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession((async t=>{var s;const{data:n,error:r}=t;return r?{data:null,error:r}:await it(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(s=null==n?void 0:n.session)||void 0===s?void 0:s.access_token})}))}catch(e){if(qe(e))return{data:null,error:e};throw e}}async _enroll(e){try{return await this._useSession((async t=>{var s,n;const{data:r,error:i}=t;if(i)return{data:null,error:i};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:a,error:c}=await it(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:null===(s=null==r?void 0:r.session)||void 0===s?void 0:s.access_token});return c?{data:null,error:c}:("totp"===e.factorType&&(null===(n=null==a?void 0:a.totp)||void 0===n?void 0:n.qr_code)&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})}))}catch(e){if(qe(e))return{data:null,error:e};throw e}}async _verify(e){return this._acquireLock(-1,(async()=>{try{return await this._useSession((async t=>{var s;const{data:n,error:r}=t;if(r)return{data:null,error:r};const{data:i,error:o}=await it(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(s=null==n?void 0:n.session)||void 0===s?void 0:s.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:o})}))}catch(e){if(qe(e))return{data:null,error:e};throw e}}))}async _challenge(e){return this._acquireLock(-1,(async()=>{try{return await this._useSession((async t=>{var s;const{data:n,error:r}=t;return r?{data:null,error:r}:await it(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(s=null==n?void 0:n.session)||void 0===s?void 0:s.access_token})}))}catch(e){if(qe(e))return{data:null,error:e};throw e}}))}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(null==e?void 0:e.factors)||[],n=s.filter((e=>"totp"===e.factor_type&&"verified"===e.status)),r=s.filter((e=>"phone"===e.factor_type&&"verified"===e.status));return{data:{all:s,totp:n,phone:r},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,(async()=>await this._useSession((async e=>{var t,s;const{data:{session:n},error:r}=e;if(r)return{data:null,error:r};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const i=this._decodeJWT(n.access_token);let o=null;i.aal&&(o=i.aal);let a=o;(null!==(s=null===(t=n.user.factors)||void 0===t?void 0:t.filter((e=>"verified"===e.status)))&&void 0!==s?s:[]).length>0&&(a="aal2");return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:i.amr||[]},error:null}}))))}}Ct.nextInstanceID=0;const xt=Ct;class At extends xt{constructor(e){super(e)}}var St=function(e,t,s,n){return new(s||(s=Promise))((function(r,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};class Et{constructor(e,t,s){var n,r,i;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const o=e.replace(/\/$/,"");this.realtimeUrl=`${o}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${o}/auth/v1`,this.storageUrl=`${o}/storage/v1`,this.functionsUrl=`${o}/functions/v1`;const a=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c=function(e,t){const{db:s,auth:n,realtime:r,global:i}=e,{db:o,auth:a,realtime:c,global:l}=t,h={db:Object.assign(Object.assign({},o),s),auth:Object.assign(Object.assign({},a),n),realtime:Object.assign(Object.assign({},c),r),global:Object.assign(Object.assign({},l),i),accessToken:()=>Ce(this,void 0,void 0,(function*(){return""}))};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!=s?s:{},{db:me,realtime:ve,auth:Object.assign(Object.assign({},we),{storageKey:a}),global:ge});this.storageKey=null!==(n=c.auth.storageKey)&&void 0!==n?n:"",this.headers=null!==(r=c.global.headers)&&void 0!==r?r:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(i=c.auth)&&void 0!==i?i:{},this.headers,c.global.fetch),this.fetch=ke(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},c.realtime)),this.rest=new u(`${o}/rest/v1`,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),c.accessToken||this._listenForAuthEvents()}get functions(){return new l(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new fe(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return St(this,void 0,void 0,(function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return null!==(t=null===(e=s.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null}))}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,storageKey:r,flowType:i,lock:o,debug:a},c,l){var h;const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new At({url:this.authUrl,headers:Object.assign(Object.assign({},u),c),storageKey:r,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,flowType:i,lock:o,debug:a,fetch:l,hasCustomAuthorizationHeader:null!==(h="Authorization"in this.headers)&&void 0!==h&&h})}_initRealtimeClient(e){return new G(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange(((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)}))}_handleTokenChanged(e,t,s){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===s?"SIGNED_OUT"===e&&(this.realtime.setAuth(this.supabaseKey),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.realtime.setAuth(null!=s?s:null),this.changedAccessToken=s)}}const Tt=(e,t,s)=>new Et(e,t,s)},35827:(e,t,s)=>{s.d(t,{A:()=>h});const n={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};var r,i=new Uint8Array(16);function o(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}for(var a=[],c=0;c<256;++c)a.push((c+256).toString(16).slice(1));function l(e,t=0){return(a[e[t+0]]+a[e[t+1]]+a[e[t+2]]+a[e[t+3]]+"-"+a[e[t+4]]+a[e[t+5]]+"-"+a[e[t+6]]+a[e[t+7]]+"-"+a[e[t+8]]+a[e[t+9]]+"-"+a[e[t+10]]+a[e[t+11]]+a[e[t+12]]+a[e[t+13]]+a[e[t+14]]+a[e[t+15]]).toLowerCase()}const h=function(e,t,s){if(n.randomUUID&&!t&&!e)return n.randomUUID();var r=(e=e||{}).random||(e.rng||o)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){s=s||0;for(var i=0;i<16;++i)t[s+i]=r[i];return t}return l(r)}},67544:(e,t,s)=>{s.r(t),s.d(t,{Headers:()=>o,Request:()=>a,Response:()=>c,default:()=>i,fetch:()=>r});var n=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==s.g)return s.g;throw new Error("unable to locate global object")}();const r=n.fetch,i=n.fetch.bind(n),o=n.Headers,a=n.Request,c=n.Response},72096:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(s(67544)),i=n(s(28765));t.default=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=r.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let s=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then((async e=>{var t,s,n;let r=null,o=null,a=null,c=e.status,l=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(o="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const n=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),i=null===(s=e.headers.get("content-range"))||void 0===s?void 0:s.split("/");n&&i&&i.length>1&&(a=parseInt(i[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(o)&&(o.length>1?(r={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,a=null,c=406,l="Not Acceptable"):o=1===o.length?o[0]:null)}else{const t=await e.text();try{r=JSON.parse(t),Array.isArray(r)&&404===e.status&&(o=[],r=null,c=200,l="OK")}catch(s){404===e.status&&""===t?(c=204,l="No Content"):r={message:t}}if(r&&this.isMaybeSingle&&(null===(n=null==r?void 0:r.details)||void 0===n?void 0:n.includes("0 rows"))&&(r=null,c=200,l="OK"),r&&this.shouldThrowOnError)throw new i.default(r)}return{error:r,data:o,count:a,status:c,statusText:l}}));return this.shouldThrowOnError||(s=s.catch((e=>{var t,s,n;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(s=null==e?void 0:e.stack)&&void 0!==s?s:""}`,hint:"",code:`${null!==(n=null==e?void 0:e.code)&&void 0!==n?n:""}`},data:null,count:null,status:0,statusText:""}}))),s.then(e,t)}}},760:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(s(84260)),i=n(s(73226)),o=s(81923);class a{constructor(e,{headers:t={},schema:s,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},o.DEFAULT_HEADERS),t),this.schemaName=s,this.fetch=n}from(e){const t=new URL(`${this.url}/${e}`);return new r.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new a(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:n=!1,count:r}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let c;s||n?(o=s?"HEAD":"GET",Object.entries(t).filter((([e,t])=>void 0!==t)).map((([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`])).forEach((([e,t])=>{a.searchParams.append(e,t)}))):(o="POST",c=t);const l=Object.assign({},this.headers);return r&&(l.Prefer=`count=${r}`),new i.default({method:o,url:a,headers:l,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}}t.default=a},28765:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class s extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=s},73226:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(s(17372));class i extends r.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map((e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`)).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:n}={}){let r="";"plain"===n?r="pl":"phrase"===n?r="ph":"websearch"===n&&(r="w");const i=void 0===s?"":`(${s})`;return this.url.searchParams.append(e,`${r}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach((([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)})),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const n=s?`${s}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}}t.default=i},84260:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(s(73226));t.default=class{constructor(e,{headers:t={},schema:s,fetch:n}){this.url=e,this.headers=t,this.schema=s,this.fetch=n}select(e,{head:t=!1,count:s}={}){const n=t?"HEAD":"GET";let i=!1;const o=(null!=e?e:"*").split("").map((e=>/\s/.test(e)&&!i?"":('"'===e&&(i=!i),e))).join("");return this.url.searchParams.set("select",o),s&&(this.headers.Prefer=`count=${s}`),new r.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:s=!0}={}){const n=[];if(this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),s||n.push("missing=default"),this.headers.Prefer=n.join(","),Array.isArray(e)){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(t.length>0){const e=[...new Set(t)].map((e=>`"${e}"`));this.url.searchParams.set("columns",e.join(","))}}return new r.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:n,defaultToNull:i=!0}={}){const o=[`resolution=${s?"ignore":"merge"}-duplicates`];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&o.push(this.headers.Prefer),n&&o.push(`count=${n}`),i||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(t.length>0){const e=[...new Set(t)].map((e=>`"${e}"`));this.url.searchParams.set("columns",e.join(","))}}return new r.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),this.headers.Prefer=s.join(","),new r.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new r.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}},17372:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(s(72096));class i extends r.default{select(e){let t=!1;const s=(null!=e?e:"*").split("").map((e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e))).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:n,referencedTable:r=n}={}){const i=r?`${r}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${void 0===s?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const n=void 0===s?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:n=s}={}){const r=void 0===n?"offset":`${n}.offset`,i=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this.url.searchParams.set(i,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:n=!1,wal:r=!1,format:i="text"}={}){var o;const a=[e?"analyze":null,t?"verbose":null,s?"settings":null,n?"buffers":null,r?"wal":null].filter(Boolean).join("|"),c=null!==(o=this.headers.Accept)&&void 0!==o?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${c}"; options=${a};`,this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}t.default=i},81923:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_HEADERS=void 0;const n=s(78694);t.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`}},3922:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const r=n(s(760));t.PostgrestClient=r.default;const i=n(s(84260));t.PostgrestQueryBuilder=i.default;const o=n(s(73226));t.PostgrestFilterBuilder=o.default;const a=n(s(17372));t.PostgrestTransformBuilder=a.default;const c=n(s(72096));t.PostgrestBuilder=c.default;const l=n(s(28765));t.PostgrestError=l.default,t.default={PostgrestClient:r.default,PostgrestQueryBuilder:i.default,PostgrestFilterBuilder:o.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:c.default,PostgrestError:l.default}},78694:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,t.version="0.0.0-automated"},47339:(e,t,s)=>{s.d(t,{UU:()=>Tt});class n extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class r extends n{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class i extends n{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class o extends n{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var a;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(a||(a={}));var c=function(e,t,s,n){return new(s||(s=Promise))((function(r,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};class l{constructor(e,{headers:t={},customFetch:n,region:r=a.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=(e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(s.bind(s,67544)).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)})(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return c(this,void 0,void 0,(function*(){try{const{headers:n,method:a,body:c}=t;let l,h={},{region:u}=t;u||(u=this.region),u&&"any"!==u&&(h["x-region"]=u),c&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&("undefined"!=typeof Blob&&c instanceof Blob||c instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",l=c):"string"==typeof c?(h["Content-Type"]="text/plain",l=c):"undefined"!=typeof FormData&&c instanceof FormData?l=c:(h["Content-Type"]="application/json",l=JSON.stringify(c)));const d=yield this.fetch(`${this.url}/${e}`,{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),n),body:l}).catch((e=>{throw new r(e)})),f=d.headers.get("x-relay-error");if(f&&"true"===f)throw new i(d);if(!d.ok)throw new o(d);let p,g=(null!==(s=d.headers.get("Content-Type"))&&void 0!==s?s:"text/plain").split(";")[0].trim();return p="application/json"===g?yield d.json():"application/octet-stream"===g?yield d.blob():"text/event-stream"===g?d:"multipart/form-data"===g?yield d.formData():yield d.text(),{data:p,error:null}}catch(e){return{data:null,error:e}}}))}}var h=s(3922);const{PostgrestClient:u,PostgrestQueryBuilder:d,PostgrestFilterBuilder:f,PostgrestTransformBuilder:p,PostgrestBuilder:g}=h,m={"X-Client-Info":"realtime-js/2.10.7"};var w,v,y,b,_,k;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(w||(w={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(v||(v={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(y||(y={})),function(e){e.websocket="websocket"}(b||(b={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(_||(_={}));class C{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const n=t.getUint8(1),r=t.getUint8(2);let i=this.HEADER_LENGTH+2;const o=s.decode(e.slice(i,i+n));i+=n;const a=s.decode(e.slice(i,i+r));i+=r;return{ref:null,topic:o,event:a,payload:JSON.parse(s.decode(e.slice(i,e.byteLength)))}}}class x{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout((()=>{this.tries=this.tries+1,this.callback()}),this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(k||(k={}));const A=(e,t,s={})=>{var n;const r=null!==(n=s.skipTypes)&&void 0!==n?n:[];return Object.keys(t).reduce(((s,n)=>(s[n]=S(n,e,t,r),s)),{})},S=(e,t,s,n)=>{const r=t.find((t=>t.name===e)),i=null==r?void 0:r.type,o=s[e];return i&&!n.includes(i)?E(i,o):T(o)},E=(e,t)=>{if("_"===e.charAt(0)){const s=e.slice(1,e.length);return j(t,s)}switch(e){case k.bool:return I(t);case k.float4:case k.float8:case k.int2:case k.int4:case k.int8:case k.numeric:case k.oid:return P(t);case k.json:case k.jsonb:return $(t);case k.timestamp:return O(t);case k.abstime:case k.date:case k.daterange:case k.int4range:case k.int8range:case k.money:case k.reltime:case k.text:case k.time:case k.timestamptz:case k.timetz:case k.tsrange:case k.tstzrange:default:return T(t)}},T=e=>e,I=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},P=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},$=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},j=(e,t)=>{if("string"!=typeof e)return e;const s=e.length-1,n=e[s];if("{"===e[0]&&"}"===n){let n;const r=e.slice(1,s);try{n=JSON.parse("["+r+"]")}catch(e){n=r?r.split(","):[]}return n.map((e=>E(t,e)))}return e},O=e=>"string"==typeof e?e.replace(" ","T"):e,L=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class U{constructor(e,t,s={},n=1e4){this.channel=e,this.event=t,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t(null===(s=this.receivedResp)||void 0===s?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},(e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)})),this.timeoutTimer=setTimeout((()=>{this.trigger("timeout",{})}),this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter((t=>t.status===e)).forEach((e=>e.callback(t)))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var R,M,N,D;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(R||(R={}));class z{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},(e=>{const{onJoin:t,onLeave:s,onSync:n}=this.caller;this.joinRef=this.channel._joinRef(),this.state=z.syncState(this.state,e,t,s),this.pendingDiffs.forEach((e=>{this.state=z.syncDiff(this.state,e,t,s)})),this.pendingDiffs=[],n()})),this.channel._on(s.diff,{},(e=>{const{onJoin:t,onLeave:s,onSync:n}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=z.syncDiff(this.state,e,t,s),n())})),this.onJoin(((e,t,s)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:s})})),this.onLeave(((e,t,s)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:s})})),this.onSync((()=>{this.channel._trigger("presence",{event:"sync"})}))}static syncState(e,t,s,n){const r=this.cloneDeep(e),i=this.transformState(t),o={},a={};return this.map(r,((e,t)=>{i[e]||(a[e]=t)})),this.map(i,((e,t)=>{const s=r[e];if(s){const n=t.map((e=>e.presence_ref)),r=s.map((e=>e.presence_ref)),i=t.filter((e=>r.indexOf(e.presence_ref)<0)),c=s.filter((e=>n.indexOf(e.presence_ref)<0));i.length>0&&(o[e]=i),c.length>0&&(a[e]=c)}else o[e]=t})),this.syncDiff(r,{joins:o,leaves:a},s,n)}static syncDiff(e,t,s,n){const{joins:r,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(r,((t,n)=>{var r;const i=null!==(r=e[t])&&void 0!==r?r:[];if(e[t]=this.cloneDeep(n),i.length>0){const s=e[t].map((e=>e.presence_ref)),n=i.filter((e=>s.indexOf(e.presence_ref)<0));e[t].unshift(...n)}s(t,i,n)})),this.map(i,((t,s)=>{let r=e[t];if(!r)return;const i=s.map((e=>e.presence_ref));r=r.filter((e=>i.indexOf(e.presence_ref)<0)),e[t]=r,n(t,r,s),0===r.length&&delete e[t]})),e}static map(e,t){return Object.getOwnPropertyNames(e).map((s=>t(s,e[s])))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce(((t,s)=>{const n=e[s];return t[s]="metas"in n?n.metas.map((e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e))):n,t}),{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(M||(M={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(N||(N={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(D||(D={}));class F{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=v.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new U(this,y.join,this.params,this.timeout),this.rejoinTimer=new x((()=>this._rejoinUntilConnected()),this.socket.reconnectAfterMs),this.joinPush.receive("ok",(()=>{this.state=v.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach((e=>e.send())),this.pushBuffer=[]})),this._onClose((()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=v.closed,this.socket._remove(this)})),this._onError((e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=v.errored,this.rejoinTimer.scheduleTimeout())})),this.joinPush.receive("timeout",(()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=v.errored,this.rejoinTimer.scheduleTimeout())})),this._on(y.reply,{},((e,t)=>{this._trigger(this._replyEventName(t),e)})),this.presence=new z(this),this.broadcastEndpointURL=L(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:r,presence:i,private:o}}=this.params;this._onError((t=>e&&e("CHANNEL_ERROR",t))),this._onClose((()=>e&&e("CLOSED")));const a={},c={broadcast:r,presence:i,postgres_changes:null!==(n=null===(s=this.bindings.postgres_changes)||void 0===s?void 0:s.map((e=>e.filter)))&&void 0!==n?n:[],private:o};this.socket.accessToken&&(a.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:c},a)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",(({postgres_changes:t})=>{var s;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),void 0!==t){const n=this.bindings.postgres_changes,r=null!==(s=null==n?void 0:n.length)&&void 0!==s?s:0,i=[];for(let s=0;s<r;s++){const r=n[s],{filter:{event:o,schema:a,table:c,filter:l}}=r,h=t&&t[s];if(!h||h.event!==o||h.schema!==a||h.table!==c||h.filter!==l)return this.unsubscribe(),void(e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes")));i.push(Object.assign(Object.assign({},r),{id:h.id}))}return this.bindings.postgres_changes=i,void(e&&e("SUBSCRIBED"))}e&&e("SUBSCRIBED")})).receive("error",(t=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(t).join(", ")||"error")))})).receive("timeout",(()=>{e&&e("TIMED_OUT")}))}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this._on(e,t,s)}async send(e,t={}){var s,n;if(this._canPush()||"broadcast"!==e.type)return new Promise((s=>{var n,r,i;const o=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(i=null===(r=null===(n=this.params)||void 0===n?void 0:n.config)||void 0===r?void 0:r.broadcast)||void 0===i?void 0:i.ack)||s("ok"),o.receive("ok",(()=>s("ok"))),o.receive("error",(()=>s("error"))),o.receive("timeout",(()=>s("timed out")))}));{const{event:r,payload:i}=e,o={method:"POST",headers:{Authorization:this.socket.accessToken?`Bearer ${this.socket.accessToken}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:i,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(s=t.timeout)&&void 0!==s?s:this.timeout);return await(null===(n=e.body)||void 0===n?void 0:n.cancel()),e.ok?"ok":"error"}catch(e){return"AbortError"===e.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=v.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(y.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise((s=>{const n=new U(this,y.leave,{},e);n.receive("ok",(()=>{t(),s("ok")})).receive("timeout",(()=>{t(),s("timed out")})).receive("error",(()=>{s("error")})),n.send(),this._canPush()||n.trigger("ok",{})}))}async _fetchWithTimeout(e,t,s){const n=new AbortController,r=setTimeout((()=>n.abort()),s),i=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(r),i}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new U(this,e,t,s);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var n,r;const i=e.toLocaleLowerCase(),{close:o,error:a,leave:c,join:l}=y;if(s&&[o,a,c,l].indexOf(i)>=0&&s!==this._joinRef())return;let h=this._onMessage(i,t,s);if(t&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?null===(n=this.bindings.postgres_changes)||void 0===n||n.filter((e=>{var t,s,n;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(n=null===(s=e.filter)||void 0===s?void 0:s.event)||void 0===n?void 0:n.toLocaleLowerCase())===i})).map((e=>e.callback(h,s))):null===(r=this.bindings[i])||void 0===r||r.filter((e=>{var s,n,r,o,a,c;if(["broadcast","presence","postgres_changes"].includes(i)){if("id"in e){const i=e.id,o=null===(s=e.filter)||void 0===s?void 0:s.event;return i&&(null===(n=t.ids)||void 0===n?void 0:n.includes(i))&&("*"===o||(null==o?void 0:o.toLocaleLowerCase())===(null===(r=t.data)||void 0===r?void 0:r.type.toLocaleLowerCase()))}{const s=null===(a=null===(o=null==e?void 0:e.filter)||void 0===o?void 0:o.event)||void 0===a?void 0:a.toLocaleLowerCase();return"*"===s||s===(null===(c=null==t?void 0:t.event)||void 0===c?void 0:c.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===i})).map((e=>{if("object"==typeof h&&"ids"in h){const e=h.data,{schema:t,table:s,commit_timestamp:n,type:r,errors:i}=e,o={schema:t,table:s,commit_timestamp:n,eventType:r,new:{},old:{},errors:i};h=Object.assign(Object.assign({},o),this._getPayloadRecords(e))}e.callback(h,s)}))}_isClosed(){return this.state===v.closed}_isJoined(){return this.state===v.joined}_isJoining(){return this.state===v.joining}_isLeaving(){return this.state===v.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const n=e.toLocaleLowerCase(),r={type:n,filter:t,callback:s};return this.bindings[n]?this.bindings[n].push(r):this.bindings[n]=[r],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter((e=>{var n;return!((null===(n=e.type)||void 0===n?void 0:n.toLocaleLowerCase())===s&&F.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(y.close,{},e)}_onError(e){this._on(y.error,{},(t=>e(t)))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=v.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=A(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=A(e.columns,e.old_record)),t}}const B=()=>{},q="undefined"!=typeof WebSocket;class G{constructor(e,t){var n;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=m,this.params={},this.timeout=1e4,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=B,this.conn=null,this.sendBuffer=[],this.serializer=new C,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(s.bind(s,67544)).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)},this.endPoint=`${e}/${b.websocket}`,this.httpEndpoint=L(e),(null==t?void 0:t.transport)?this.transport=t.transport:this.transport=null,(null==t?void 0:t.params)&&(this.params=t.params),(null==t?void 0:t.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),(null==t?void 0:t.timeout)&&(this.timeout=t.timeout),(null==t?void 0:t.logger)&&(this.logger=t.logger),(null==t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const r=null===(n=null==t?void 0:t.params)||void 0===n?void 0:n.apikey;if(r&&(this.accessToken=r,this.apiKey=r),this.reconnectAfterMs=(null==t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null==t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null==t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new x((async()=>{this.disconnect(),this.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(null==t?void 0:t.fetch),null==t?void 0:t.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(null==t?void 0:t.worker)||!1,this.workerUrl=null==t?void 0:t.workerUrl}}connect(){if(!this.conn)if(this.transport)this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});else{if(q)return this.conn=new WebSocket(this._endPointURL()),void this.setupConnection();this.conn=new H(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),s.e(288).then(s.t.bind(s,10288,23)).then((({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()}))}}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map((e=>e.unsubscribe())));return this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case w.connecting:return _.Connecting;case w.open:return _.Open;case w.closing:return _.Closing;default:return _.Closed}}isConnected(){return this.connectionState()===_.Open}channel(e,t={config:{}}){const s=new F(`realtime:${e}`,t,this);return this.channels.push(s),s}push(e){const{topic:t,event:s,payload:n,ref:r}=e,i=()=>{this.encode(e,(e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)}))};this.log("push",`${t} ${s} (${r})`,n),this.isConnected()?i():this.sendBuffer.push(i)}setAuth(e){this.accessToken=e,this.channels.forEach((t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(y.access_token,{access_token:e})}))}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find((t=>t.topic===e&&(t._isJoined()||t._isJoining())));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter((t=>t._joinRef()!==e._joinRef()))}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}_onConnMessage(e){this.decode(e.data,(e=>{let{topic:t,event:s,payload:n,ref:r}=e;(r&&r===this.pendingHeartbeatRef||s===(null==n?void 0:n.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${n.status||""} ${t} ${s} ${r&&"("+r+")"||""}`,n),this.channels.filter((e=>e._isMember(t))).forEach((e=>e._trigger(s,n,r))),this.stateChangeCallbacks.message.forEach((t=>t(e)))}))}async _onConnOpen(){if(this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.worker){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this._sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}else this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval((()=>this._sendHeartbeat()),this.heartbeatIntervalMs);this.stateChangeCallbacks.open.forEach((e=>e()))}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach((t=>t(e)))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach((t=>t(e)))}_triggerChanError(){this.channels.forEach((e=>e._trigger(y.error)))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const s=e.match(/\?/)?"&":"?";return`${e}${s}${new URLSearchParams(t)}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach((e=>e())),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}}class H{constructor(e,t,s){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=w.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=s.close}}class J extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function V(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class K extends J{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class W extends J{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Z=function(e,t,s,n){return new(s||(s=Promise))((function(r,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};const X=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(s.bind(s,67544)).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)},Q=e=>{if(Array.isArray(e))return e.map((e=>Q(e)));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach((([e,s])=>{const n=e.replace(/([-_][a-z])/gi,(e=>e.toUpperCase().replace(/[-_]/g,"")));t[n]=Q(s)})),t};var Y=function(e,t,s,n){return new(s||(s=Promise))((function(r,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};const ee=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),te=(e,t,n)=>Y(void 0,void 0,void 0,(function*(){const r=yield Z(void 0,void 0,void 0,(function*(){return"undefined"==typeof Response?(yield Promise.resolve().then(s.bind(s,67544))).Response:Response}));e instanceof r&&!(null==n?void 0:n.noResolveJson)?e.json().then((s=>{t(new K(ee(s),e.status||500))})).catch((e=>{t(new W(ee(e),e))})):t(new W(ee(e),e))}));function se(e,t,s,n,r,i){return Y(this,void 0,void 0,(function*(){return new Promise(((o,a)=>{e(s,((e,t,s,n)=>{const r={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?r:(r.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),n&&(r.body=JSON.stringify(n)),Object.assign(Object.assign({},r),s))})(t,n,r,i)).then((e=>{if(!e.ok)throw e;return(null==n?void 0:n.noResolveJson)?e:e.json()})).then((e=>o(e))).catch((e=>te(e,a,n)))}))}))}function ne(e,t,s,n){return Y(this,void 0,void 0,(function*(){return se(e,"GET",t,s,n)}))}function re(e,t,s,n,r){return Y(this,void 0,void 0,(function*(){return se(e,"POST",t,n,r,s)}))}function ie(e,t,s,n,r){return Y(this,void 0,void 0,(function*(){return se(e,"DELETE",t,n,r,s)}))}var oe=function(e,t,s,n){return new(s||(s=Promise))((function(r,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};const ae={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ce={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class le{constructor(e,t={},s,n){this.url=e,this.headers=t,this.bucketId=s,this.fetch=X(n)}uploadOrUpdate(e,t,s,n){return oe(this,void 0,void 0,(function*(){try{let r;const i=Object.assign(Object.assign({},ce),n);let o=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(i.upsert)});const a=i.metadata;"undefined"!=typeof Blob&&s instanceof Blob?(r=new FormData,r.append("cacheControl",i.cacheControl),a&&r.append("metadata",this.encodeMetadata(a)),r.append("",s)):"undefined"!=typeof FormData&&s instanceof FormData?(r=s,r.append("cacheControl",i.cacheControl),a&&r.append("metadata",this.encodeMetadata(a))):(r=s,o["cache-control"]=`max-age=${i.cacheControl}`,o["content-type"]=i.contentType,a&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(a)))),(null==n?void 0:n.headers)&&(o=Object.assign(Object.assign({},o),n.headers));const c=this._removeEmptyFolders(t),l=this._getFinalPath(c),h=yield this.fetch(`${this.url}/object/${l}`,Object.assign({method:e,body:r,headers:o},(null==i?void 0:i.duplex)?{duplex:i.duplex}:{})),u=yield h.json();if(h.ok)return{data:{path:c,id:u.Id,fullPath:u.Key},error:null};return{data:null,error:u}}catch(e){if(V(e))return{data:null,error:e};throw e}}))}upload(e,t,s){return oe(this,void 0,void 0,(function*(){return this.uploadOrUpdate("POST",e,t,s)}))}uploadToSignedUrl(e,t,s,n){return oe(this,void 0,void 0,(function*(){const r=this._removeEmptyFolders(e),i=this._getFinalPath(r),o=new URL(this.url+`/object/upload/sign/${i}`);o.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:ce.upsert},n),i=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&s instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",s)):"undefined"!=typeof FormData&&s instanceof FormData?(e=s,e.append("cacheControl",t.cacheControl)):(e=s,i["cache-control"]=`max-age=${t.cacheControl}`,i["content-type"]=t.contentType);const a=yield this.fetch(o.toString(),{method:"PUT",body:e,headers:i}),c=yield a.json();if(a.ok)return{data:{path:r,fullPath:c.Key},error:null};return{data:null,error:c}}catch(e){if(V(e))return{data:null,error:e};throw e}}))}createSignedUploadUrl(e,t){return oe(this,void 0,void 0,(function*(){try{let s=this._getFinalPath(e);const n=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(n["x-upsert"]="true");const r=yield re(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:n}),i=new URL(this.url+r.url),o=i.searchParams.get("token");if(!o)throw new J("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:o},error:null}}catch(e){if(V(e))return{data:null,error:e};throw e}}))}update(e,t,s){return oe(this,void 0,void 0,(function*(){return this.uploadOrUpdate("PUT",e,t,s)}))}move(e,t,s){return oe(this,void 0,void 0,(function*(){try{return{data:yield re(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==s?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(e){if(V(e))return{data:null,error:e};throw e}}))}copy(e,t,s){return oe(this,void 0,void 0,(function*(){try{return{data:{path:(yield re(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==s?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(e){if(V(e))return{data:null,error:e};throw e}}))}createSignedUrl(e,t,s){return oe(this,void 0,void 0,(function*(){try{let n=this._getFinalPath(e),r=yield re(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},(null==s?void 0:s.transform)?{transform:s.transform}:{}),{headers:this.headers});const i=(null==s?void 0:s.download)?`&download=${!0===s.download?"":s.download}`:"";return r={signedUrl:encodeURI(`${this.url}${r.signedURL}${i}`)},{data:r,error:null}}catch(e){if(V(e))return{data:null,error:e};throw e}}))}createSignedUrls(e,t,s){return oe(this,void 0,void 0,(function*(){try{const n=yield re(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),r=(null==s?void 0:s.download)?`&download=${!0===s.download?"":s.download}`:"";return{data:n.map((e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${r}`):null}))),error:null}}catch(e){if(V(e))return{data:null,error:e};throw e}}))}download(e,t){return oe(this,void 0,void 0,(function*(){const s=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",n=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),r=n?`?${n}`:"";try{const t=this._getFinalPath(e),n=yield ne(this.fetch,`${this.url}/${s}/${t}${r}`,{headers:this.headers,noResolveJson:!0});return{data:yield n.blob(),error:null}}catch(e){if(V(e))return{data:null,error:e};throw e}}))}info(e){return oe(this,void 0,void 0,(function*(){const t=this._getFinalPath(e);try{const e=yield ne(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Q(e),error:null}}catch(e){if(V(e))return{data:null,error:e};throw e}}))}exists(e){return oe(this,void 0,void 0,(function*(){const t=this._getFinalPath(e);try{return yield function(e,t,s,n){return Y(this,void 0,void 0,(function*(){return se(e,"HEAD",t,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)}))}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(e){if(V(e)&&e instanceof W){const t=e.originalError;if([400,404].includes(null==t?void 0:t.status))return{data:!1,error:e}}throw e}}))}getPublicUrl(e,t){const s=this._getFinalPath(e),n=[],r=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==r&&n.push(r);const i=void 0!==(null==t?void 0:t.transform)?"render/image":"object",o=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==o&&n.push(o);let a=n.join("&");return""!==a&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${s}${a}`)}}}remove(e){return oe(this,void 0,void 0,(function*(){try{return{data:yield ie(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(e){if(V(e))return{data:null,error:e};throw e}}))}list(e,t,s){return oe(this,void 0,void 0,(function*(){try{const n=Object.assign(Object.assign(Object.assign({},ae),t),{prefix:e||""});return{data:yield re(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(e){if(V(e))return{data:null,error:e};throw e}}))}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const he={"X-Client-Info":"storage-js/2.7.1"};var ue=function(e,t,s,n){return new(s||(s=Promise))((function(r,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};class de{constructor(e,t={},s){this.url=e,this.headers=Object.assign(Object.assign({},he),t),this.fetch=X(s)}listBuckets(){return ue(this,void 0,void 0,(function*(){try{return{data:yield ne(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(V(e))return{data:null,error:e};throw e}}))}getBucket(e){return ue(this,void 0,void 0,(function*(){try{return{data:yield ne(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(e){if(V(e))return{data:null,error:e};throw e}}))}createBucket(e,t={public:!1}){return ue(this,void 0,void 0,(function*(){try{return{data:yield re(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(V(e))return{data:null,error:e};throw e}}))}updateBucket(e,t){return ue(this,void 0,void 0,(function*(){try{const s=yield function(e,t,s,n,r){return Y(this,void 0,void 0,(function*(){return se(e,"PUT",t,n,r,s)}))}(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers});return{data:s,error:null}}catch(e){if(V(e))return{data:null,error:e};throw e}}))}emptyBucket(e){return ue(this,void 0,void 0,(function*(){try{return{data:yield re(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(V(e))return{data:null,error:e};throw e}}))}deleteBucket(e){return ue(this,void 0,void 0,(function*(){try{return{data:yield ie(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(e){if(V(e))return{data:null,error:e};throw e}}))}}class fe extends de{constructor(e,t={},s){super(e,t,s)}from(e){return new le(this.url,this.headers,e,this.fetch)}}let pe="";pe="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const ge={headers:{"X-Client-Info":`supabase-js-${pe}/2.46.1`}},me={schema:"public"},we={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ve={};var ye=s(67544),be=function(e,t,s,n){return new(s||(s=Promise))((function(r,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};const _e=e=>{let t;return t=e||("undefined"==typeof fetch?ye.default:fetch),(...e)=>t(...e)},ke=(e,t,s)=>{const n=_e(s),r="undefined"==typeof Headers?ye.Headers:Headers;return(s,i)=>be(void 0,void 0,void 0,(function*(){var o;const a=null!==(o=yield t())&&void 0!==o?o:e;let c=new r(null==i?void 0:i.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${a}`),n(s,Object.assign(Object.assign({},i),{headers:c}))}))};var Ce=function(e,t,s,n){return new(s||(s=Promise))((function(r,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};const xe="2.65.1",Ae={"X-Client-Info":`gotrue-js/${xe}`},Se="X-Supabase-Api-Version",Ee={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"};const Te=()=>"undefined"!=typeof document,Ie={tested:!1,writable:!1},Pe=()=>{if(!Te())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(e){return!1}if(Ie.tested)return Ie.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ie.tested=!0,Ie.writable=!0}catch(e){Ie.tested=!0,Ie.writable=!1}return Ie.writable};function $e(e){const t={},s=new URL(e);if(s.hash&&"#"===s.hash[0])try{new URLSearchParams(s.hash.substring(1)).forEach(((e,s)=>{t[s]=e}))}catch(e){}return s.searchParams.forEach(((e,s)=>{t[s]=e})),t}const je=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Promise.resolve().then(s.bind(s,67544)).then((({default:t})=>t(...e))):fetch),(...e)=>t(...e)},Oe=async(e,t,s)=>{await e.setItem(t,JSON.stringify(s))},Le=async(e,t)=>{const s=await e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch(e){return s}},Ue=async(e,t)=>{await e.removeItem(t)};class Re{constructor(){this.promise=new Re.promiseConstructor(((e,t)=>{this.resolve=e,this.reject=t}))}}function Me(e){const t=e.split(".");if(3!==t.length)throw new Error("JWT is not valid: not a JWT structure");if(!/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const s=t[1];return JSON.parse(function(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let s,n,r,i,o,a,c,l="",h=0;for(e=e.replace("-","+").replace("_","/");h<e.length;)i=t.indexOf(e.charAt(h++)),o=t.indexOf(e.charAt(h++)),a=t.indexOf(e.charAt(h++)),c=t.indexOf(e.charAt(h++)),s=i<<2|o>>4,n=(15&o)<<4|a>>2,r=(3&a)<<6|c,l+=String.fromCharCode(s),64!=a&&0!=n&&(l+=String.fromCharCode(n)),64!=c&&0!=r&&(l+=String.fromCharCode(r));return l}(s))}function Ne(e){return("0"+e.toString(16)).substr(-2)}async function De(e){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),s=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(s);return Array.from(n).map((e=>String.fromCharCode(e))).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ze(e,t,s=!1){const n=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let s="";for(let n=0;n<56;n++)s+=e.charAt(Math.floor(Math.random()*t));return s}return crypto.getRandomValues(e),Array.from(e,Ne).join("")}();let r=n;s&&(r+="/PASSWORD_RECOVERY"),await Oe(e,`${t}-code-verifier`,r);const i=await De(n);return[i,n===i?"plain":"s256"]}Re.promiseConstructor=Promise;const Fe=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;class Be extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function qe(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class Ge extends Be{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}class He extends Be{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Je extends Be{constructor(e,t,s,n){super(e,s,n),this.name=t,this.status=s}}class Ve extends Je{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Ke extends Je{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class We extends Je{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ze extends Je{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Xe extends Je{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Qe extends Je{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Ye(e){return qe(e)&&"AuthRetryableFetchError"===e.name}class et extends Je{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}var tt=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]])}return s};const st=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),nt=[502,503,504];async function rt(e){var t,s;if(!("object"==typeof(s=e)&&null!==s&&"status"in s&&"ok"in s&&"json"in s&&"function"==typeof s.json))throw new Qe(st(e),0);if(nt.includes(e.status))throw new Qe(st(e),e.status);let n,r;try{n=await e.json()}catch(e){throw new He(st(e),e)}const i=function(e){const t=e.headers.get(Se);if(!t)return null;if(!t.match(Fe))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(e){return null}}(e);if(i&&i.getTime()>=Ee.timestamp&&"object"==typeof n&&n&&"string"==typeof n.code?r=n.code:"object"==typeof n&&n&&"string"==typeof n.error_code&&(r=n.error_code),r){if("weak_password"===r)throw new et(st(n),e.status,(null===(t=n.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===r)throw new Ve}else if("object"==typeof n&&n&&"object"==typeof n.weak_password&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce(((e,t)=>e&&"string"==typeof t),!0))throw new et(st(n),e.status,n.weak_password.reasons);throw new Ge(st(n),e.status||500,r)}async function it(e,t,s,n){var r;const i=Object.assign({},null==n?void 0:n.headers);i[Se]||(i[Se]=Ee.name),(null==n?void 0:n.jwt)&&(i.Authorization=`Bearer ${n.jwt}`);const o=null!==(r=null==n?void 0:n.query)&&void 0!==r?r:{};(null==n?void 0:n.redirectTo)&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await async function(e,t,s,n,r,i){const o=((e,t,s,n)=>{const r={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),r.body=JSON.stringify(n),Object.assign(Object.assign({},r),s))})(t,n,r,i);let a;try{a=await e(s,Object.assign({},o))}catch(e){throw console.error(e),new Qe(st(e),0)}a.ok||await rt(a);if(null==n?void 0:n.noResolveJson)return a;try{return await a.json()}catch(e){await rt(e)}}(e,t,s+a,{headers:i,noResolveJson:null==n?void 0:n.noResolveJson},{},null==n?void 0:n.body);return(null==n?void 0:n.xform)?null==n?void 0:n.xform(c):{data:Object.assign({},c),error:null}}function ot(e){var t;let s=null;var n;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(s=Object.assign({},e),e.expires_at||(s.expires_at=(n=e.expires_in,Math.round(Date.now()/1e3)+n)));return{data:{session:s,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function at(e){const t=ot(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce(((e,t)=>e&&"string"==typeof t),!0)&&(t.data.weak_password=e.weak_password),t}function ct(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function lt(e){return{data:e,error:null}}function ht(e){const{action_link:t,email_otp:s,hashed_token:n,redirect_to:r,verification_type:i}=e,o=tt(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:s,hashed_token:n,redirect_to:r,verification_type:i},user:Object.assign({},o)},error:null}}function ut(e){return e}var dt=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]])}return s};class ft{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=je(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await it(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(e){if(qe(e))return{data:null,error:e};throw e}}async inviteUserByEmail(e,t={}){try{return await it(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ct})}catch(e){if(qe(e))return{data:{user:null},error:e};throw e}}async generateLink(e){try{const{options:t}=e,s=dt(e,["options"]),n=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(n.new_email=null==s?void 0:s.newEmail,delete n.newEmail),await it(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:ht,redirectTo:null==t?void 0:t.redirectTo})}catch(e){if(qe(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(e){try{return await it(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ct})}catch(e){if(qe(e))return{data:{user:null},error:e};throw e}}async listUsers(e){var t,s,n,r,i,o,a;try{const c={nextPage:null,lastPage:0,total:0},l=await it(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(s=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==s?s:"",per_page:null!==(r=null===(n=null==e?void 0:e.perPage)||void 0===n?void 0:n.toString())&&void 0!==r?r:""},xform:ut});if(l.error)throw l.error;const h=await l.json(),u=null!==(i=l.headers.get("x-total-count"))&&void 0!==i?i:0,d=null!==(a=null===(o=l.headers.get("link"))||void 0===o?void 0:o.split(","))&&void 0!==a?a:[];return d.length>0&&(d.forEach((e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),s=JSON.parse(e.split(";")[1].split("=")[1]);c[`${s}Page`]=t})),c.total=parseInt(u)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(e){if(qe(e))return{data:{users:[]},error:e};throw e}}async getUserById(e){try{return await it(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ct})}catch(e){if(qe(e))return{data:{user:null},error:e};throw e}}async updateUserById(e,t){try{return await it(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ct})}catch(e){if(qe(e))return{data:{user:null},error:e};throw e}}async deleteUser(e,t=!1){try{return await it(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ct})}catch(e){if(qe(e))return{data:{user:null},error:e};throw e}}async _listFactors(e){try{const{data:t,error:s}=await it(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:s}}catch(e){if(qe(e))return{data:null,error:e};throw e}}async _deleteFactor(e){try{return{data:await it(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(e){if(qe(e))return{data:null,error:e};throw e}}}const pt={getItem:e=>Pe()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Pe()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Pe()&&globalThis.localStorage.removeItem(e)}};function gt(e={}){return{getItem:t=>e[t]||null,setItem:(t,s)=>{e[t]=s},removeItem:t=>{delete e[t]}}}const mt=!!(globalThis&&Pe()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class wt extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class vt extends wt{}async function yt(e,t,s){mt&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout((()=>{n.abort(),mt&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)}),t),await globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},(async n=>{if(!n){if(0===t)throw mt&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new vt(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(mt)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(e){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",e)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}mt&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,n.name);try{return await s()}finally{mt&&console.log("@supabase/gotrue-js: navigatorLock: released",e,n.name)}}))}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}();const bt={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ae,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},_t=3e4;async function kt(e,t,s){return await s()}class Ct{constructor(e){var t,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ct.nextInstanceID,Ct.nextInstanceID+=1,this.instanceID>0&&Te()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},bt),e);if(this.logDebugMessages=!!n.debug,"function"==typeof n.debug&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new ft({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=je(n.fetch),this.lock=n.lock||kt,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:Te()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=yt:this.lock=kt,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:Pe()?this.storage=pt:(this.memoryStorage={},this.storage=gt(this.memoryStorage)):(this.memoryStorage={},this.storage=gt(this.memoryStorage)),Te()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(e){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",e)}null===(s=this.broadcastChannel)||void 0===s||s.addEventListener("message",(async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)}))}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${xe}) ${(new Date).toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,(async()=>await this._initialize())))()),await this.initializePromise}async _initialize(){try{const e=!!Te()&&await this._isPKCEFlow();if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:s}=await this._getSessionFromURL(e);if(s)return this._debug("#_initialize()","error detecting session from URL",s),"identity_already_exists"===(null==s?void 0:s.code)||await this._removeSession(),{error:s};const{session:n,redirectType:r}=t;return this._debug("#_initialize()","detected session in URL",n,"redirect type",r),await this._saveSession(n),setTimeout((async()=>{"recovery"===r?await this._notifyAllSubscribers("PASSWORD_RECOVERY",n):await this._notifyAllSubscribers("SIGNED_IN",n)}),0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return qe(e)?{error:e}:{error:new He("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,n;try{const r=await it(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(s=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==s?s:{},gotrue_meta_security:{captcha_token:null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.captchaToken}},xform:ot}),{data:i,error:o}=r;if(o||!i)return{data:{user:null,session:null},error:o};const a=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(e){if(qe(e))return{data:{user:null,session:null},error:e};throw e}}async signUp(e){var t,s,n;try{let r;if("email"in e){const{email:s,password:n,options:i}=e;let o=null,a=null;"pkce"===this.flowType&&([o,a]=await ze(this.storage,this.storageKey)),r=await it(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==i?void 0:i.emailRedirectTo,body:{email:s,password:n,data:null!==(t=null==i?void 0:i.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken},code_challenge:o,code_challenge_method:a},xform:ot})}else{if(!("phone"in e))throw new We("You must provide either an email or phone number and a password");{const{phone:t,password:i,options:o}=e;r=await it(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:i,data:null!==(s=null==o?void 0:o.data)&&void 0!==s?s:{},channel:null!==(n=null==o?void 0:o.channel)&&void 0!==n?n:"sms",gotrue_meta_security:{captcha_token:null==o?void 0:o.captchaToken}},xform:ot})}}const{data:i,error:o}=r;if(o||!i)return{data:{user:null,session:null},error:o};const a=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(e){if(qe(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:n,options:r}=e;t=await it(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:n,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken}},xform:at})}else{if(!("phone"in e))throw new We("You must provide either an email or phone number and a password");{const{phone:s,password:n,options:r}=e;t=await it(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:n,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken}},xform:at})}}const{data:s,error:n}=t;return n?{data:{user:null,session:null},error:n}:s&&s.session&&s.user?(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n}):{data:{user:null,session:null},error:new Ke}}catch(e){if(qe(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOAuth(e){var t,s,n,r;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(s=e.options)||void 0===s?void 0:s.scopes,queryParams:null===(n=e.options)||void 0===n?void 0:n.queryParams,skipBrowserRedirect:null===(r=e.options)||void 0===r?void 0:r.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,(async()=>this._exchangeCodeForSession(e)))}async _exchangeCodeForSession(e){const t=await Le(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(null!=t?t:"").split("/");try{const{data:t,error:r}=await it(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:ot});if(await Ue(this.storage,`${this.storageKey}-code-verifier`),r)throw r;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!=n?n:null}),error:r}):{data:{user:null,session:null,redirectType:null},error:new Ke}}catch(e){if(qe(e))return{data:{user:null,session:null,redirectType:null},error:e};throw e}}async signInWithIdToken(e){try{const{options:t,provider:s,token:n,access_token:r,nonce:i}=e,o=await it(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:r,nonce:i,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:ot}),{data:a,error:c}=o;return c?{data:{user:null,session:null},error:c}:a&&a.session&&a.user?(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:c}):{data:{user:null,session:null},error:new Ke}}catch(e){if(qe(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOtp(e){var t,s,n,r,i;try{if("email"in e){const{email:n,options:r}=e;let i=null,o=null;"pkce"===this.flowType&&([i,o]=await ze(this.storage,this.storageKey));const{error:a}=await it(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:n,data:null!==(t=null==r?void 0:r.data)&&void 0!==t?t:{},create_user:null===(s=null==r?void 0:r.shouldCreateUser)||void 0===s||s,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken},code_challenge:i,code_challenge_method:o},redirectTo:null==r?void 0:r.emailRedirectTo});return{data:{user:null,session:null},error:a}}if("phone"in e){const{phone:t,options:s}=e,{data:o,error:a}=await it(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(n=null==s?void 0:s.data)&&void 0!==n?n:{},create_user:null===(r=null==s?void 0:s.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},channel:null!==(i=null==s?void 0:s.channel)&&void 0!==i?i:"sms"}});return{data:{user:null,session:null,messageId:null==o?void 0:o.message_id},error:a}}throw new We("You must provide either an email or phone number.")}catch(e){if(qe(e))return{data:{user:null,session:null},error:e};throw e}}async verifyOtp(e){var t,s;try{let n,r;"options"in e&&(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo,r=null===(s=e.options)||void 0===s?void 0:s.captchaToken);const{data:i,error:o}=await it(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:r}}),redirectTo:n,xform:ot});if(o)throw o;if(!i)throw new Error("An error occurred on token verification.");const a=i.session,c=i.user;return(null==a?void 0:a.access_token)&&(await this._saveSession(a),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(e){if(qe(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithSSO(e){var t,s,n;try{let r=null,i=null;return"pkce"===this.flowType&&([r,i]=await ze(this.storage,this.storageKey)),await it(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(s=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==s?s:void 0}),(null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:r,code_challenge_method:i}),headers:this.headers,xform:lt})}catch(e){if(qe(e))return{data:null,error:e};throw e}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._reauthenticate()))}async _reauthenticate(){try{return await this._useSession((async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new Ve;const{error:n}=await it(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}}))}catch(e){if(qe(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:n,options:r}=e,{error:i}=await it(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken}},redirectTo:null==r?void 0:r.emailRedirectTo});return{data:{user:null,session:null},error:i}}if("phone"in e){const{phone:s,type:n,options:r}=e,{data:i,error:o}=await it(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken}}});return{data:{user:null,session:null,messageId:null==i?void 0:i.message_id},error:o}}throw new We("You must provide either an email or phone number and a type")}catch(e){if(qe(e))return{data:{user:null,session:null},error:e};throw e}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,(async()=>this._useSession((async e=>e))))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch(e){}})()),s}return await this.lock(`lock:${this.storageKey}`,e,(async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(e){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await Le(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=!!e.expires_at&&e.expires_at<=Date.now()/1e3;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,s,n)=>(t||"user"!==s||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,s,n))})}return{data:{session:e},error:null}}const{session:n,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{session:null},error:r}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,(async()=>await this._getUser()))}async _getUser(e){try{return e?await it(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ct}):await this._useSession((async e=>{var t,s,n;const{data:r,error:i}=e;if(i)throw i;return(null===(t=r.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await it(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(n=null===(s=r.session)||void 0===s?void 0:s.access_token)&&void 0!==n?n:void 0,xform:ct}):{data:{user:null},error:new Ve}}))}catch(e){if(qe(e))return function(e){return qe(e)&&"AuthSessionMissingError"===e.name}(e)&&(await this._removeSession(),await Ue(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:e};throw e}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._updateUser(e,t)))}async _updateUser(e,t={}){try{return await this._useSession((async s=>{const{data:n,error:r}=s;if(r)throw r;if(!n.session)throw new Ve;const i=n.session;let o=null,a=null;"pkce"===this.flowType&&null!=e.email&&([o,a]=await ze(this.storage,this.storageKey));const{data:c,error:l}=await it(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:a}),jwt:i.access_token,xform:ct});if(l)throw l;return i.user=c.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}}))}catch(e){if(qe(e))return{data:{user:null},error:e};throw e}}_decodeJWT(e){return Me(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._setSession(e)))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ve;const t=Date.now()/1e3;let s=t,n=!0,r=null;const i=Me(e.access_token);if(i.exp&&(s=i.exp,n=s<=t),n){const{session:t,error:s}=await this._callRefreshToken(e.refresh_token);if(s)return{data:{user:null,session:null},error:s};if(!t)return{data:{user:null,session:null},error:null};r=t}else{const{data:n,error:i}=await this._getUser(e.access_token);if(i)throw i;r={access_token:e.access_token,refresh_token:e.refresh_token,user:n.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)}return{data:{user:r.user,session:r},error:null}}catch(e){if(qe(e))return{data:{session:null,user:null},error:e};throw e}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._refreshSession(e)))}async _refreshSession(e){try{return await this._useSession((async t=>{var s;if(!e){const{data:n,error:r}=t;if(r)throw r;e=null!==(s=n.session)&&void 0!==s?s:void 0}if(!(null==e?void 0:e.refresh_token))throw new Ve;const{session:n,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{user:null,session:null},error:r}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}}))}catch(e){if(qe(e))return{data:{user:null,session:null},error:e};throw e}}async _getSessionFromURL(e){try{if(!Te())throw new Ze("No browser detected.");if("implicit"===this.flowType&&!this._isImplicitGrantFlow())throw new Ze("Not a valid implicit grant flow url.");if("pkce"==this.flowType&&!e)throw new Xe("Not a valid PKCE flow url.");const t=$e(window.location.href);if(e){if(!t.code)throw new Xe("No code detected.");const{data:e,error:s}=await this._exchangeCodeForSession(t.code);if(s)throw s;const n=new URL(window.location.href);return n.searchParams.delete("code"),window.history.replaceState(window.history.state,"",n.toString()),{data:{session:e.session,redirectType:null},error:null}}if(t.error||t.error_description||t.error_code)throw new Ze(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});const{provider_token:s,provider_refresh_token:n,access_token:r,refresh_token:i,expires_in:o,expires_at:a,token_type:c}=t;if(!(r&&o&&i&&c))throw new Ze("No session defined in URL");const l=Math.round(Date.now()/1e3),h=parseInt(o);let u=l+h;a&&(u=parseInt(a));const d=u-l;1e3*d<=_t&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${d}s, should have been closer to ${h}s`);const f=u-h;l-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,u,l):l-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,u,l);const{data:p,error:g}=await this._getUser(r);if(g)throw g;const m={provider_token:s,provider_refresh_token:n,access_token:r,expires_in:h,expires_at:u,refresh_token:i,token_type:c,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:t.type},error:null}}catch(e){if(qe(e))return{data:{session:null,redirectType:null},error:e};throw e}}_isImplicitGrantFlow(){const e=$e(window.location.href);return!(!Te()||!e.access_token&&!e.error_description)}async _isPKCEFlow(){const e=$e(window.location.href),t=await Le(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._signOut(e)))}async _signOut({scope:e}={scope:"global"}){return await this._useSession((async t=>{var s;const{data:n,error:r}=t;if(r)return{error:r};const i=null===(s=n.session)||void 0===s?void 0:s.access_token;if(i){const{error:t}=await this.admin.signOut(i,e);if(t&&(!function(e){return qe(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await Ue(this.storage,`${this.storageKey}-code-verifier`)),{error:null}}))}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>{await this.initializePromise,await this._acquireLock(-1,(async()=>{this._emitInitialSession(t)}))})(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession((async t=>{var s,n;try{const{data:{session:n},error:r}=t;if(r)throw r;await(null===(s=this.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(t){await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",t),console.error(t)}}))}async resetPasswordForEmail(e,t={}){let s=null,n=null;"pkce"===this.flowType&&([s,n]=await ze(this.storage,this.storageKey,!0));try{return await it(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(e){if(qe(e))return{data:null,error:e};throw e}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(e){if(qe(e))return{data:null,error:e};throw e}}async linkIdentity(e){var t;try{const{data:s,error:n}=await this._useSession((async t=>{var s,n,r,i,o;const{data:a,error:c}=t;if(c)throw c;const l=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(s=e.options)||void 0===s?void 0:s.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:!0});return await it(this.fetch,"GET",l,{headers:this.headers,jwt:null!==(o=null===(i=a.session)||void 0===i?void 0:i.access_token)&&void 0!==o?o:void 0})}));if(n)throw n;return Te()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==s?void 0:s.url),{data:{provider:e.provider,url:null==s?void 0:s.url},error:null}}catch(t){if(qe(t))return{data:{provider:e.provider,url:null},error:t};throw t}}async unlinkIdentity(e){try{return await this._useSession((async t=>{var s,n;const{data:r,error:i}=t;if(i)throw i;return await it(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(n=null===(s=r.session)||void 0===s?void 0:s.access_token)&&void 0!==n?n:void 0})}))}catch(e){if(qe(e))return{data:null,error:e};throw e}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await(s=async s=>(s>0&&await async function(e){return await new Promise((t=>{setTimeout((()=>t(null)),e)}))}(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await it(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ot})),n=(e,t)=>{const s=200*Math.pow(2,e);return t&&Ye(t)&&Date.now()+s-r<_t},new Promise(((e,t)=>{(async()=>{for(let r=0;r<1/0;r++)try{const t=await s(r);if(!n(r,null,t))return void e(t)}catch(e){if(!n(r,e))return void t(e)}})()})))}catch(e){if(this._debug(t,"error",e),qe(e))return{data:{session:null,user:null},error:e};throw e}finally{this._debug(t,"end")}var s,n}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),Te()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const s=await Le(this.storage,this.storageKey);if(this._debug(t,"session from storage",s),!this._isValidSession(s))return this._debug(t,"session is not valid"),void(null!==s&&await this._removeSession());const n=Math.round(Date.now()/1e3),r=(null!==(e=s.expires_at)&&void 0!==e?e:1/0)<n+10;if(this._debug(t,`session has${r?"":" not"} expired with margin of 10s`),r){if(this.autoRefreshToken&&s.refresh_token){const{error:e}=await this._callRefreshToken(s.refresh_token);e&&(console.error(e),Ye(e)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(e){return this._debug(t,"error",e),void console.error(e)}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new Ve;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Re;const{data:t,error:s}=await this._refreshAccessToken(e);if(s)throw s;if(!t.session)throw new Ve;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const n={session:t.session,error:null};return this.refreshingDeferred.resolve(n),n}catch(e){if(this._debug(n,"error",e),qe(e)){const s={session:null,error:e};return Ye(e)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(s),s}throw null===(s=this.refreshingDeferred)||void 0===s||s.reject(e),e}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,s=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const n=[],r=Array.from(this.stateChangeEmitters.values()).map((async s=>{try{await s.callback(e,t)}catch(e){n.push(e)}}));if(await Promise.all(r),n.length>0){for(let e=0;e<n.length;e+=1)console.error(n[e]);throw n[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Oe(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Ue(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Te()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(e){console.error("removing visibilitychange callback failed",e)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval((()=>this._autoRefreshTokenTick()),_t);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout((async()=>{await this.initializePromise,await this._autoRefreshTokenTick()}),0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,(async()=>{try{const e=Date.now();try{return await this._useSession((async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const n=Math.floor((1e3*s.expires_at-e)/_t);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),n<=3&&await this._callRefreshToken(s.refresh_token)}))}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(e){if(!(e.isAcquireTimeout||e instanceof wt))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Te()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,(async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const n=[`provider=${encodeURIComponent(t)}`];if((null==s?void 0:s.redirectTo)&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),(null==s?void 0:s.scopes)&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),"pkce"===this.flowType){const[e,t]=await ze(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});n.push(s.toString())}if(null==s?void 0:s.queryParams){const e=new URLSearchParams(s.queryParams);n.push(e.toString())}return(null==s?void 0:s.skipBrowserRedirect)&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession((async t=>{var s;const{data:n,error:r}=t;return r?{data:null,error:r}:await it(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(s=null==n?void 0:n.session)||void 0===s?void 0:s.access_token})}))}catch(e){if(qe(e))return{data:null,error:e};throw e}}async _enroll(e){try{return await this._useSession((async t=>{var s,n;const{data:r,error:i}=t;if(i)return{data:null,error:i};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:a,error:c}=await it(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:null===(s=null==r?void 0:r.session)||void 0===s?void 0:s.access_token});return c?{data:null,error:c}:("totp"===e.factorType&&(null===(n=null==a?void 0:a.totp)||void 0===n?void 0:n.qr_code)&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})}))}catch(e){if(qe(e))return{data:null,error:e};throw e}}async _verify(e){return this._acquireLock(-1,(async()=>{try{return await this._useSession((async t=>{var s;const{data:n,error:r}=t;if(r)return{data:null,error:r};const{data:i,error:o}=await it(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(s=null==n?void 0:n.session)||void 0===s?void 0:s.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:o})}))}catch(e){if(qe(e))return{data:null,error:e};throw e}}))}async _challenge(e){return this._acquireLock(-1,(async()=>{try{return await this._useSession((async t=>{var s;const{data:n,error:r}=t;return r?{data:null,error:r}:await it(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(s=null==n?void 0:n.session)||void 0===s?void 0:s.access_token})}))}catch(e){if(qe(e))return{data:null,error:e};throw e}}))}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(null==e?void 0:e.factors)||[],n=s.filter((e=>"totp"===e.factor_type&&"verified"===e.status)),r=s.filter((e=>"phone"===e.factor_type&&"verified"===e.status));return{data:{all:s,totp:n,phone:r},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,(async()=>await this._useSession((async e=>{var t,s;const{data:{session:n},error:r}=e;if(r)return{data:null,error:r};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const i=this._decodeJWT(n.access_token);let o=null;i.aal&&(o=i.aal);let a=o;(null!==(s=null===(t=n.user.factors)||void 0===t?void 0:t.filter((e=>"verified"===e.status)))&&void 0!==s?s:[]).length>0&&(a="aal2");return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:i.amr||[]},error:null}}))))}}Ct.nextInstanceID=0;const xt=Ct;class At extends xt{constructor(e){super(e)}}var St=function(e,t,s,n){return new(s||(s=Promise))((function(r,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};class Et{constructor(e,t,s){var n,r,i;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const o=e.replace(/\/$/,"");this.realtimeUrl=`${o}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${o}/auth/v1`,this.storageUrl=`${o}/storage/v1`,this.functionsUrl=`${o}/functions/v1`;const a=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c=function(e,t){const{db:s,auth:n,realtime:r,global:i}=e,{db:o,auth:a,realtime:c,global:l}=t,h={db:Object.assign(Object.assign({},o),s),auth:Object.assign(Object.assign({},a),n),realtime:Object.assign(Object.assign({},c),r),global:Object.assign(Object.assign({},l),i),accessToken:()=>Ce(this,void 0,void 0,(function*(){return""}))};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!=s?s:{},{db:me,realtime:ve,auth:Object.assign(Object.assign({},we),{storageKey:a}),global:ge});this.storageKey=null!==(n=c.auth.storageKey)&&void 0!==n?n:"",this.headers=null!==(r=c.global.headers)&&void 0!==r?r:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(i=c.auth)&&void 0!==i?i:{},this.headers,c.global.fetch),this.fetch=ke(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},c.realtime)),this.rest=new u(`${o}/rest/v1`,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),c.accessToken||this._listenForAuthEvents()}get functions(){return new l(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new fe(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return St(this,void 0,void 0,(function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return null!==(t=null===(e=s.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null}))}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,storageKey:r,flowType:i,lock:o,debug:a},c,l){var h;const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new At({url:this.authUrl,headers:Object.assign(Object.assign({},u),c),storageKey:r,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,flowType:i,lock:o,debug:a,fetch:l,hasCustomAuthorizationHeader:null!==(h="Authorization"in this.headers)&&void 0!==h&&h})}_initRealtimeClient(e){return new G(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange(((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)}))}_handleTokenChanged(e,t,s){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===s?"SIGNED_OUT"===e&&(this.realtime.setAuth(this.supabaseKey),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.realtime.setAuth(null!=s?s:null),this.changedAccessToken=s)}}const Tt=(e,t,s)=>new Et(e,t,s)},1920:(e,t,s)=>{s.d(t,{A:()=>h});const n={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};var r,i=new Uint8Array(16);function o(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}for(var a=[],c=0;c<256;++c)a.push((c+256).toString(16).slice(1));function l(e,t=0){return(a[e[t+0]]+a[e[t+1]]+a[e[t+2]]+a[e[t+3]]+"-"+a[e[t+4]]+a[e[t+5]]+"-"+a[e[t+6]]+a[e[t+7]]+"-"+a[e[t+8]]+a[e[t+9]]+"-"+a[e[t+10]]+a[e[t+11]]+a[e[t+12]]+a[e[t+13]]+a[e[t+14]]+a[e[t+15]]).toLowerCase()}const h=function(e,t,s){if(n.randomUUID&&!t&&!e)return n.randomUUID();var r=(e=e||{}).random||(e.rng||o)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){s=s||0;for(var i=0;i<16;++i)t[s+i]=r[i];return t}return l(r)}},62353:e=>{var t=Object.prototype.hasOwnProperty,s="~";function n(){}function r(e,t,s){this.fn=e,this.context=t,this.once=s||!1}function i(e,t,n,i,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new r(n,i||e,o),c=s?s+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(s=!1)),a.prototype.eventNames=function(){var e,n,r=[];if(0===this._eventsCount)return r;for(n in e=this._events)t.call(e,n)&&r.push(s?n.slice(1):n);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},a.prototype.listeners=function(e){var t=s?s+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,o=new Array(i);r<i;r++)o[r]=n[r].fn;return o},a.prototype.listenerCount=function(e){var t=s?s+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,r,i,o){var a=s?s+e:e;if(!this._events[a])return!1;var c,l,h=this._events[a],u=arguments.length;if(h.fn){switch(h.once&&this.removeListener(e,h.fn,void 0,!0),u){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,t),!0;case 3:return h.fn.call(h.context,t,n),!0;case 4:return h.fn.call(h.context,t,n,r),!0;case 5:return h.fn.call(h.context,t,n,r,i),!0;case 6:return h.fn.call(h.context,t,n,r,i,o),!0}for(l=1,c=new Array(u-1);l<u;l++)c[l-1]=arguments[l];h.fn.apply(h.context,c)}else{var d,f=h.length;for(l=0;l<f;l++)switch(h[l].once&&this.removeListener(e,h[l].fn,void 0,!0),u){case 1:h[l].fn.call(h[l].context);break;case 2:h[l].fn.call(h[l].context,t);break;case 3:h[l].fn.call(h[l].context,t,n);break;case 4:h[l].fn.call(h[l].context,t,n,r);break;default:if(!c)for(d=1,c=new Array(u-1);d<u;d++)c[d-1]=arguments[d];h[l].fn.apply(h[l].context,c)}}return!0},a.prototype.on=function(e,t,s){return i(this,e,t,s,!1)},a.prototype.once=function(e,t,s){return i(this,e,t,s,!0)},a.prototype.removeListener=function(e,t,n,r){var i=s?s+e:e;if(!this._events[i])return this;if(!t)return o(this,i),this;var a=this._events[i];if(a.fn)a.fn!==t||r&&!a.once||n&&a.context!==n||o(this,i);else{for(var c=0,l=[],h=a.length;c<h;c++)(a[c].fn!==t||r&&!a[c].once||n&&a[c].context!==n)&&l.push(a[c]);l.length?this._events[i]=1===l.length?l[0]:l:o(this,i)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=s?s+e:e,this._events[t]&&o(this,t)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=s,a.EventEmitter=a,e.exports=a},89243:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>p});var r=s(75321),i=e([r]);r=(i.then?(await i)():i)[0];class o extends r.vs{constructor(){super(".loading-spinner")}}class a extends r.vs{constructor(){super("span.icon.success","✅")}}class c extends r.vs{constructor(){super("span.icon.info","ℹ️")}}class l extends r.vs{constructor(){super("span.icon.warning","⚠️")}}class h extends r.vs{constructor(){super("span.icon.error","❌")}}class u extends r.vs{constructor(){super("span.icon.accordion-open","▼")}}class d extends r.vs{constructor(){super("span.icon.accordion-close","▲")}}class f{LoadingSpinner=o;SuccessIcon=a;InfoIcon=c;WarningIcon=l;ErrorIcon=h;AccordionOpenIcon=u;AccordionCloseIcon=d}const p=new f;n()}catch(e){n(e)}}))},55950:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>o});var r=s(75321),i=e([r]);r=(i.then?(await i)():i)[0];class o extends r.vs{constructor(e,t,s){let n,r,i="";"string"==typeof s?(i=e,n=t,r=s):(n=e,r=t),super(`.icon.svg${i}`);const o=`<svg fill="currentColor" width="100%" height="100%" viewBox="${n}" xmlns="http://www.w3.org/2000/svg">${r}</svg>`;this.htmlElement.innerHTML=o}}n()}catch(e){n(e)}}))},32102:(e,t,s)=>{s.a(e,(async(e,t)=>{try{var n=s(75321),r=e([n]);n=(r.then?(await r)():r)[0];n.vs;t()}catch(e){t(e)}}))},44297:(e,t,s)=>{s.a(e,(async(e,t)=>{try{var n=s(75321),r=s(89243),i=e([n,r]);[n,r]=i.then?(await i)():i;n.vs;t()}catch(e){t(e)}}))},88555:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>o});var r=s(75321),i=e([r]);r=(i.then?(await i)():i)[0];class o extends r.vs{constructor(e,t){super(`.alert${e}`),this.append((0,r.el)(".icon-container",t.icon),(0,r.el)("p.message",t.message))}}n()}catch(e){n(e)}}))},76099:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>a});var r=s(89243),i=s(88555),o=e([r,i]);[r,i]=o.then?(await o)():o;class a extends i.A{constructor(e){super(".info",{icon:new r.A.InfoIcon,message:e})}}n()}catch(e){n(e)}}))},52632:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>c,V:()=>r});var r,i=s(75321),o=s(89243),a=e([i,o]);[i,o]=a.then?(await a)():a,function(e){e.Text="text",e.Contained="contained",e.Outlined="outlined",e.Circle="circle"}(r||(r={}));class c extends i.vs{options;titleContainer;iconContainer;loadingSpinner;loading=!1;constructor(e,t){let s,n="";"string"==typeof e?(n=e,s=t??{}):s=e;super(`button${n}.${s.type??r.Text}`),this.options=s,"right"===s.iconPosition?this.append(this.titleContainer=(0,i.el)(".title",...Array.isArray(s.title)?s.title:[s.title]),s.icon?this.iconContainer=(0,i.el)(".right-icon-container",s.icon.clone()):void 0):this.append(s.icon?this.iconContainer=(0,i.el)(".icon-container",s.icon.clone()):void 0,this.titleContainer=(0,i.el)(".title",...Array.isArray(s.title)?s.title:[s.title])),this.onDom("click",(e=>{if(!this.loading&&s.onClick){const t=s.onClick(this,e);t instanceof Promise&&(this.startLoading(),t.finally((()=>this.stopLoading())))}})),s.disabled&&this.disable()}set title(e){this.titleContainer.clear().append(...Array.isArray(e)?e:[e])}get title(){return this.titleContainer.text}disable(){return this.htmlElement.setAttribute("disabled","disabled"),this.addClass("disabled"),this}enable(){return this.htmlElement.removeAttribute("disabled"),this.removeClass("disabled"),this}startLoading(){return this.loading||(this.loading=!0,this.addClass("loading"),this.removed||(this.iconContainer?this.iconContainer.clear().append(new o.A.LoadingSpinner):this.prepend(this.loadingSpinner=new o.A.LoadingSpinner))),this}stopLoading(){return this.loading&&(this.loading=!1,this.removeClass("loading"),this.removed||(this.iconContainer?this.iconContainer.clear().append(this.options.icon?.clone()):this.loadingSpinner&&(this.loadingSpinner.remove(),this.loadingSpinner=void 0))),this}}n()}catch(e){n(e)}}))},1325:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>o});var r=s(75321),i=e([r]);r=(i.then?(await i)():i)[0];class o extends r.vs{constructor(...e){super(".button-group",...e)}}n()}catch(e){n(e)}}))},91276:(e,t,s)=>{s.a(e,(async(e,t)=>{try{var n=s(75321),r=e([n]);n=(r.then?(await r)():r)[0];n.vs;t()}catch(e){t(e)}}))},76032:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>o});var r=s(75321),i=e([r]);r=(i.then?(await i)():i)[0];class o extends r.vs{input;previousValue="";constructor(e,t){let s,n="";"string"==typeof e?(n=e,s=t??{}):s=e,super(`label.input${n}${!0===s.required?".required":""}`),s.autoCapitalize&&(this.htmlElement.autocapitalize=s.autoCapitalize),this.append(s.label?(0,r.el)("span.label",s.label):void 0,this.input=(0,r.el)(s.multiline?"textarea":"input",{placeholder:s.placeholder??"",value:s.value??"",readOnly:s.readOnly,onkeyup:()=>this.handleInput()}),s.suffixIcon?(0,r.el)(".suffix-icon",s.suffixIcon):void 0),s.onKeyDown&&this.input.onDom("keydown",(e=>s.onKeyDown(e))),s.onChange&&this.on("valueChanged",(e=>s.onChange(e)))}handleInput=()=>{const e=this.value;e!==this.previousValue&&(this.emit("valueChanged",e),this.previousValue=e)};get value(){return this.input.htmlElement.value}set value(e){this.input.htmlElement.value!==e&&(this.input.htmlElement.value=e,this.handleInput())}focus(){this.input.htmlElement.focus()}}n()}catch(e){n(e)}}))},97357:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>o});var r=s(75321),i=e([r]);r=(i.then?(await i)():i)[0];class o extends r.vs{options;constructor(e){super("input.invisible-file-input",{type:"file",...e,style:{display:"none"},onchange:()=>this.handleChange()}),this.options=e}openFileSelector(){this.htmlElement.click()}handleChange(){const e=this.htmlElement.files;e&&this.options.onChange(Array.from(e)),this.htmlElement.value=""}}n()}catch(e){n(e)}}))},26878:(e,t,s)=>{s.a(e,(async(e,t)=>{try{var n=s(75321),r=e([n]);n=(r.then?(await r)():r)[0];n.vs;t()}catch(e){t(e)}}))},83501:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{$n:()=>c.A,Ah:()=>_.A,I:()=>g.A,JG:()=>a.A,Kx:()=>d.A,Lt:()=>w.A,TM:()=>v.A,VQ:()=>c.V,Z0:()=>o.A,_2:()=>m.A,e2:()=>l.A,h9:()=>b.A,pd:()=>u.A,rI:()=>p.A});var r=s(32102),i=s(44297),o=s(76099),a=s(89243),c=s(52632),l=s(1325),h=s(91276),u=s(76032),d=s(97357),f=s(26878),p=s(19627),g=s(36724),m=s(61288),w=s(94858),v=s(748),y=s(45074),b=s(24624),_=s(55950),k=e([r,i,o,a,c,l,h,u,d,f,p,g,m,w,v,y,b,_]);[r,i,o,a,c,l,h,u,d,f,p,g,m,w,v,y,b,_]=k.then?(await k)():k,n()}catch(e){n(e)}}))},19627:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>o});var r=s(75321),i=e([r]);r=(i.then?(await i)():i)[0];class o extends r.vs{_options;header;main;footer;constructor(e,t){let s,n="";if("string"==typeof e){if(n=e,void 0===t)throw new Error("DropdownMenuOptions is required");s=t}else s=e;super(`.dropdown-menu${n}`),this._options=s,window.getSelection()?.empty();for(const e of r.rj.children)e instanceof o&&e.remove();this.append(this.header=(0,r.el)("header"),this.main=(0,r.el)("main"),this.footer=(0,r.el)("footer")),this.onWindow("click",(e=>{this.htmlElement.contains(e.target)||this.remove()})).onWindow("touchstart",(e=>{this.htmlElement.contains(e.target)||this.remove()})).onWindow("keydown",(e=>{"Escape"===e.key&&this.remove()})),this.appendTo(r.rj).adjustPosition()}adjustPosition(){const e=this.calculateRect();let t=0,s=0;void 0!==this._options.left?t=this._options.left:void 0!==this._options.right&&(t=this._options.right-e.width),void 0!==this._options.top?s=this._options.top:void 0!==this._options.bottom&&(s=this._options.bottom-e.height),t+e.width>window.innerWidth&&(t=window.innerWidth-e.width),t<0&&(t=0),s+e.height>window.innerHeight&&(s=window.innerHeight-e.height),s<0&&(s=0),this.style({left:`${t}px`,top:`${s}px`})}appendToHeader(...e){return this.header.append(...e),this.adjustPosition(),this}appendToMain(...e){return this.main.append(...e),this.adjustPosition(),this}appendToFooter(...e){return this.footer.append(...e),this.adjustPosition(),this}}n()}catch(e){n(e)}}))},36724:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>o});var r=s(75321),i=e([r]);r=(i.then?(await i)():i)[0];class o extends r.vs{constructor(...e){super(".dropdown-menu-group",...e)}}n()}catch(e){n(e)}}))},61288:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>o});var r=s(75321),i=e([r]);r=(i.then?(await i)():i)[0];class o extends r.vs{constructor(e){super("a.dropdown-menu-item"),this.append(e.icon,e.label),this.onDom("click",(()=>e.onClick()))}}n()}catch(e){n(e)}}))},94858:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>c});var r=s(75321),i=s(52632),o=s(24624),a=e([r,i,o]);[r,i,o]=a.then?(await a)():a;class c extends o.A{constructor(e,t){let s,n="";if("string"==typeof e){if(n=e,void 0===t)throw new Error("Expected options to be provided");s=t}else s=e;super(`.alert-dialog${n}`),this.appendToHeader((0,r.el)("h1",s.icon,s.title)).appendToMain((0,r.el)("p",...Array.isArray(s.message)?s.message:[s.message])).appendToFooter(new i.A(".confirm",{title:s.confirmButtonTitle??"OK",onClick:async()=>{s.onConfirm&&await s.onConfirm(),this.remove()}}))}}n()}catch(e){n(e)}}))},748:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>c});var r=s(75321),i=s(52632),o=s(24624),a=e([r,i,o]);[r,i,o]=a.then?(await a)():a;class c extends o.A{resolveConfirm;rejectConfirm;constructor(e,t){let s,n="";if("string"==typeof e){if(n=e,void 0===t)throw new Error("DropdownMenuOptions is required");s=t}else s=e;super(`.confirm-dialog${n}`),this.on("remove",(()=>this.rejectConfirm?.(new Error("Canceled by user")))).appendToHeader((0,r.el)("h1",s.icon,s.title)).appendToMain(..."string"==typeof s.message?[(0,r.el)("p",s.message)]:s.message).appendToFooter(new i.A(".cancel",{title:"Cancel",onClick:()=>this.remove()}),new i.A(".confirm",{type:i.V.Contained,title:s.confirmButtonTitle??"Confirm",onClick:async()=>{s.onConfirm&&await s.onConfirm(),this.resolveConfirm?.(),this.rejectConfirm=void 0,this.remove()}}))}async waitForConfirmation(){return new Promise(((e,t)=>{this.resolveConfirm=e,this.rejectConfirm=t}))}}n()}catch(e){n(e)}}))},45074:(e,t,s)=>{s.a(e,(async(e,t)=>{try{var n=s(89243),r=s(94858),i=e([n,r]);[n,r]=i.then?(await i)():i;r.A;t()}catch(e){t(e)}}))},22789:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>a});var r=s(75321),i=e([r]);const o=(0,(r=(i.then?(await i)():i)[0]).el)(".non-modal-dialog-container").appendTo(r.rj);o.onDom("click",(e=>{if(e.target===o.htmlElement)for(const e of o.children)e instanceof a&&e.htmlElement.close()}));class a extends r.vs{closeListener=()=>this.remove();constructor(e,t=!0){super(`dialog.modal${e}`),this.onDom("close",this.closeListener).onDom("click",(e=>{const t=this.calculateRect();(e.clientX<t.left||e.clientX>t.right||e.clientY<t.top||e.clientY>t.bottom)&&this.htmlElement.close()})).appendTo(t?r.rj:o),t?this.htmlElement.showModal():this.htmlElement.show()}}n()}catch(e){n(e)}}))},24624:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>a});var r=s(75321),i=s(22789),o=e([r,i]);[r,i]=o.then?(await o)():o;class a extends i.A{header;main;footer;constructor(e,t=!0){super(`.structured-modal${e}`,t),super.append(this.header=(0,r.el)("header"),this.main=(0,r.el)("main"),this.footer=(0,r.el)("footer"))}appendToHeader(...e){return this.header.append(...e),this}appendToMain(...e){return this.main.append(...e),this}appendToFooter(...e){return this.footer.append(...e),this}}n()}catch(e){n(e)}}))},15043:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>a});var r=s(26154),i=e([r]);r=(i.then?(await i)():i)[0];class o{static INITIAL_PATH_KEY="initialPath";init(){const e=sessionStorage[o.INITIAL_PATH_KEY];e&&(r.A.goWithoutHistory(e),sessionStorage.removeItem(o.INITIAL_PATH_KEY))}}const a=new o;n()}catch(e){n(e)}}))},59144:(e,t,s)=>{s.d(t,{A:()=>i});var n=s(5364);class r extends n.A{constructor(){super(document.body)}}const i=new r},5364:(e,t,s)=>{s.d(t,{A:()=>i});var n=s(45984);class r extends n.xt{listeners=[];onWindow(e,t,s){const n=e=>{t.call(this,e)};return window.addEventListener(e,n,s),this.listeners.push({type:e,listener:n,options:s,originalListener:t}),this}offWindow(e,t,s){const n=this.listeners.findIndex((s=>s.type===e&&s.originalListener===t));if(-1!==n){const{listener:t}=this.listeners[n];window.removeEventListener(e,t,s),this.listeners.splice(n,1)}return this}remove(){this.listeners.forEach((({type:e,listener:t,options:s})=>window.removeEventListener(e,t,s))),this.listeners=[],super.remove()}}class i extends r{htmlElement;constructor(e,...t){super(),this.htmlElement=e instanceof Element?e:function(e){const t=(e||"div").split(/([#.])/),s=t[0]||"div",n=document.createElement(s);let r="";for(let e=1;e<t.length;e+=2){r=t[e];const s=t[e+1];"#"===r?n.id=s:"."===r&&n.classList.add(s)}return n}(e??""),this.append(...t)}prependText(e){if(this.htmlElement instanceof HTMLTextAreaElement)this.htmlElement.value=e+this.htmlElement.value;else{const t=document.createDocumentFragment();e.split("\n").forEach(((e,s)=>{s>0&&t.appendChild(document.createElement("br")),t.appendChild(document.createTextNode(e))})),this.htmlElement.prepend(t)}return this}appendText(e){if(this.htmlElement instanceof HTMLTextAreaElement)this.htmlElement.value+=e;else{const t=document.createDocumentFragment();e.split("\n").forEach(((e,s)=>{s>0&&t.appendChild(document.createElement("br")),t.appendChild(document.createTextNode(e))})),this.htmlElement.appendChild(t)}return this}prepend(...e){for(const t of e)void 0!==t&&(t instanceof i?t.appendTo(this,0):"string"==typeof t?this.prependText(t):(Object.assign(this.htmlElement,t),t.style&&this.style(t.style)));return this}append(...e){for(const t of e)void 0!==t&&(t instanceof i?t.appendTo(this):"string"==typeof t?this.appendText(t):(Object.assign(this.htmlElement,t),t.style&&this.style(t.style)));return this}isVisible(){return!!this.parent&&(this.parent.isVisible()||this.parent.htmlElement===document.body)}notifyVisibility(){this.emit("visible"),this.children.forEach((e=>e.notifyVisibility()))}appendTo(e,t){if(void 0===t||t>=e.htmlElement.childNodes.length)e.htmlElement.appendChild(this.htmlElement);else{const s=e.htmlElement.childNodes[t];e.htmlElement.insertBefore(this.htmlElement,s)}return super.appendTo(e,t),this.isVisible()&&this.notifyVisibility(),this}clear(...e){return super.clear(...e),0===this.children.length&&(this.htmlElement.innerHTML=""),this}remove(){this.removed||(this.emit("remove"),this.htmlElement.remove(),super.remove())}set text(e){this.clear(),e&&this.appendText(e)}get text(){return this.htmlElement.textContent??""}addClass(...e){return this.htmlElement.classList.add(...e),this}removeClass(...e){return this.htmlElement.classList.remove(...e),this}style(e){return"string"==typeof e?this.htmlElement.style.getPropertyValue(e):(Object.assign(this.htmlElement.style,e),this)}onDom(e,t,s){return this.htmlElement.addEventListener(e,t,s),this}offDom(e,t,s){return this.htmlElement.removeEventListener(e,t,s),this}calculateRect(){return this.htmlElement.getBoundingClientRect()}clone(){return new i(this.htmlElement.cloneNode(!0))}}},1327:(e,t,s)=>{s.d(t,{A:()=>r});var n=s(5364);class r extends n.A{constructor(e){super(document.querySelector(e))}isVisible(){return!0}}},32245:(e,t,s)=>{s.d(t,{A:()=>i});var n=s(69280),r=s(5364);function i(e,...t){return new r.A(e,...t)}n.el.impl=i,n.q.impl=e=>{const t=(new DOMParser).parseFromString(e,"text/html");return new r.A(t.body.firstChild)}},59814:()=>{new class{messages={};addMessage(e,t,s){this.messages[e]||(this.messages[e]={}),this.messages[e][t]=s}addMessages(e,t){this.messages[e]||(this.messages[e]={}),this.messages[e]={...this.messages[e],...t}}addMessagesBulk(e){for(const[t,s]of Object.entries(e))this.messages[t]||(this.messages[t]={}),this.messages[t]={...this.messages[t],...s}}getMessage(e,t){const s=this.messages[e]?.[t];return void 0===s?(console.error(`message "${t}" not exists.`),""):s}}},45399:(e,t,s)=>{s(33467),s(59814)},75321:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{ED:()=>d.A,Ix:()=>c.A,Or:()=>a.A,Pe:()=>h.A,Ss:()=>l.A,el:()=>o.A,fv:()=>f.A,il:()=>u.A,rj:()=>r.A,vs:()=>i.A});var r=s(59144),i=s(5364),o=s(32245),a=s(1327),c=(s(59814),s(45399),s(26154)),l=s(20102),h=s(15043),u=s(24046),d=(s(33467),s(48554)),f=s(59187),p=(s(5377),e([c,h]));[c,h]=p.then?(await p)():p,n()}catch(e){n(e)}}))},26154:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>i});var r=s(45984);window.URLPattern||await s.e(302).then(s.bind(s,5302));class e extends r.QE{prefix="";routes=[];isViewOpening=!1;activeViews=[];constructor(){super(),window.addEventListener("popstate",(e=>this.updateActiveViews(e.state)))}openView(e,t){this.isViewOpening=!0;const s=new e;s.changeData(t),this.activeViews.push(s),this.isViewOpening=!1}add(e,t){return(Array.isArray(e)?e:[e]).forEach((e=>{const s=new URLPattern({pathname:`${this.prefix}${e}`});this.routes.push({urlPattern:s,View:t});const n=s.exec({pathname:location.pathname})?.pathname.groups;n&&this.openView(t,n)})),this}updateActiveViews(e){for(const t of this.routes){const s=this.activeViews.find((e=>e instanceof t.View)),n=t.urlPattern.exec({pathname:location.pathname})?.pathname.groups;n&&(e?Object.assign(e,n):e=n),n?s?s.changeData(e):this.openView(t.View,e):s&&(s.close(),r.lv.pull(this.activeViews,s))}}performNavigation(e,t,s){s?history.replaceState(void 0,"",`${this.prefix}${e}`):history.pushState(void 0,"",`${this.prefix}${e}`),this.emit("routeChanged",e,t),this.updateActiveViews(t),window.scrollTo(0,0)}go(e,t){location.pathname!==`${this.prefix}${e}`&&(this.isViewOpening?setTimeout((()=>this.performNavigation(e,t,!1)),0):this.performNavigation(e,t,!1))}goWithoutHistory(e,t){location.pathname!==`${this.prefix}${e}`&&(this.isViewOpening?setTimeout((()=>this.performNavigation(e,t,!0)),0):this.performNavigation(e,t,!0))}}const i=new e;n()}catch(e){n(e)}}),1)},20102:(e,t,s)=>{s.d(t,{A:()=>n});class n{eventListeners=new Map;container;changeData(e){}addViewManagedEvent(e,t,s){this.eventListeners.has(e)||this.eventListeners.set(e,new Map);return this.eventListeners.get(e).set(t,s),e.on(t,s),this}removeAllEvents(){for(const[e,t]of this.eventListeners)for(const[s,n]of t)e.off(s,n);this.eventListeners.clear()}close(){this.removeAllEvents(),this.container.remove()}}},24046:(e,t,s)=>{s.d(t,{A:()=>r});var n=s(45984);class r{prefix;constructor(e){if(!n.$x.isKebabCase(e))throw new Error("Name must be in kebab-case format (lowercase and hyphens only).");this.prefix=`${e}/`}getStorage(e){return e?localStorage:sessionStorage}getFullKey(e){return this.prefix+e}static isQuotaExceededError(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)}setValue(e,t,s){const n=this.getStorage(s),i=this.getFullKey(e);try{n.setItem(i,JSON.stringify(t))}catch(e){if(!r.isQuotaExceededError(e))throw e;n.clear(),location.reload()}}setTemporary(e,t){this.setValue(e,t,!1)}setPermanent(e,t){this.setValue(e,t,!0)}get(e){const t=this.getFullKey(e),s=sessionStorage.getItem(t)??localStorage.getItem(t);if(null!==s)try{return n.AF.parseWithUndefined(s)}catch(e){console.error(`Failed to parse ${t}: ${s}`),console.error(e)}}getAll(){const e={},t=t=>{for(let s=0;s<t.length;s++){const r=t.key(s);if(r?.startsWith(this.prefix)){const s=t.getItem(r);if(null!==s){const t=r.slice(this.prefix.length);try{e[t]=n.AF.parseWithUndefined(s)}catch(e){console.error(`Failed to parse ${r}: ${s}`),console.error(e)}}}}};return t(sessionStorage),t(localStorage),e}isPermanent(e){return null!==localStorage.getItem(this.getFullKey(e))}remove(...e){e.forEach((e=>{const t=this.getFullKey(e);sessionStorage.removeItem(t),localStorage.removeItem(t)}))}clear(){[sessionStorage,localStorage].forEach((e=>{for(let t=e.length-1;t>=0;t--){const s=e.key(t);s?.startsWith(this.prefix)&&e.removeItem(s)}}))}}},33467:(e,t,s)=>{s.d(t,{A:()=>r});var n=s(24046);const r=new class{_isAndroid;_isIOS;store=new n.A("browser-info");get isAndroid(){return this._isAndroid??(this._isAndroid=/Android/i.test(navigator.userAgent))}get isIOS(){return this._isIOS??(this._isIOS=/iPhone|iPad|iPod/i.test(navigator.userAgent))}get isMobileDevice(){return this.isAndroid||this.isIOS}normalizeLanguageCode(e){const[t,s]=e.toLowerCase().split("-");return"zh"===t?"tw"===s||"hk"===s?"zh-TW":"zh-CN":t}get languageCode(){const e=this.store.get("lang");if(e)return e;const t=navigator.language||navigator.languages&&navigator.languages[0]||"en-US";return this.normalizeLanguageCode(t)}set languageCode(e){this.store.setPermanent("lang",this.normalizeLanguageCode(e))}}},48554:(e,t,s)=>{s.d(t,{A:()=>r});var n=s(33467);const r=new class{enhanceWithContextMenu(e,t){n.A.isIOS?this.simulateContextMenuOnIOS(e,t):e.onDom("contextmenu",(e=>{e.preventDefault(),t(e)}))}simulateContextMenuOnIOS(e,t){let s;e.style({"-webkit-user-select":"none","user-select":"none"});const n=()=>{clearTimeout(s)};e.onDom("touchstart",(e=>{const n=e.touches[0],r=new MouseEvent("contextmenu",{bubbles:!0,cancelable:!0,view:window,clientX:n?.clientX??0,clientY:n?.clientY??0});s=window.setTimeout((()=>t(r)),500)})).onDom("touchend",n).onDom("touchmove",n)}}},59187:(e,t,s)=>{s.d(t,{A:()=>n});const n=new class{MAGIC_NUMBERS={GIF:[71,73,70],GRAPHIC_CONTROL_EXTENSION:[33,249,4]};DEFAULT_OPTIONS={contentType:"image/jpeg",extension:"jpg",quality:.8};readFileAsBuffer(e){return new Promise(((t,s)=>{const n=new FileReader;n.onload=()=>t(new Uint8Array(n.result)),n.onerror=()=>s(new Error("Failed to read file")),n.readAsArrayBuffer(e)}))}readFileAsDataURL(e){return new Promise(((t,s)=>{const n=new FileReader;n.onload=e=>t(e.target?.result),n.onerror=()=>s(new Error("Failed to read file")),n.readAsDataURL(e)}))}loadImage(e){return new Promise(((t,s)=>{const n=new Image;n.onload=()=>t(n),n.onerror=()=>s(new Error("Failed to load image")),n.src=e}))}isGifFormat(e){return this.MAGIC_NUMBERS.GIF.every(((t,s)=>e[s]===t))}containsMultipleFrames(e){let t=0;for(let s=0;s<e.length-this.MAGIC_NUMBERS.GRAPHIC_CONTROL_EXTENSION.length;s++){if(this.MAGIC_NUMBERS.GRAPHIC_CONTROL_EXTENSION.every(((t,n)=>e[s+n]===t))&&(t++,t>1))return!0}return!1}async isAnimatedGif(e){try{const t=await this.readFileAsBuffer(e);if(!this.isGifFormat(t))throw new Error("Invalid GIF format");return this.containsMultipleFrames(t)}catch(e){throw new Error(`Failed to analyze GIF: ${e.message}`)}}calculateOptimalDimensions(e,t){const{width:s,height:n}=e,{width:r,height:i}=t;if(s<=r&&n<=i)return{width:s,height:n};const o=Math.min(r/s,i/n);return{width:Math.round(s*o),height:Math.round(n*o)}}async optimizeImageUsingCanvas(e,t){const s=document.createElement("canvas"),n=s.getContext("2d");if(!n)throw new Error("Failed to get canvas context");return s.width=t.width,s.height=t.height,n.drawImage(e,0,0,t.width,t.height),new Promise(((e,t)=>{s.toBlob((s=>{s?e(s):t(new Error("Canvas to Blob conversion failed"))}),this.DEFAULT_OPTIONS.contentType,this.DEFAULT_OPTIONS.quality)}))}async optimizeImage(e,t,s){if(!e.type.startsWith("image/"))throw new Error("The provided file is not an image.");if("image/gif"===e.type){if(await this.isAnimatedGif(e))throw new Error("Animated GIFs are not compressed.")}const n=await this.readFileAsDataURL(e),r=await this.loadImage(n),i=this.calculateOptimalDimensions({width:r.width,height:r.height},{width:t,height:s}),o=await this.optimizeImageUsingCanvas(r,i);if(o.size>=e.size)return e;const a=e.name.replace(/\.[^.]+$/,`.${this.DEFAULT_OPTIONS.extension}`);return new File([o],a,{type:this.DEFAULT_OPTIONS.contentType})}}},5377:()=>{new class{applyTextStroke(e,t,s){let n="";for(let e=-t;e<=t;e++)for(let r=-t;r<=t;r++)0===e&&0===r||(n+=`${e}px ${r}px 0 ${s},`);n=n.slice(0,-1),e.style({textShadow:n})}}},49857:(e,t,s)=>{s.d(t,{E:()=>i});var n=s(34222);const r=1,i=(0,s(32295).x)({...n.o,id:8453,name:"Base",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://mainnet.base.org"]}},blockExplorers:{default:{name:"Basescan",url:"https://basescan.org",apiUrl:"https://api.basescan.org/api"}},contracts:{...n.o.contracts,disputeGameFactory:{[r]:{address:"0x43edB88C4B80fDD2AdFF2412A7BebF9dF42cB40e"}},l2OutputOracle:{[r]:{address:"0x56315b90c40730925ec5485cf004d835058518A0"}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:5022},portal:{[r]:{address:"0x49048044D57e1C92A77f79988d21Fa8fAF74E97e",blockCreated:17482143}},l1StandardBridge:{[r]:{address:"0x3154Cf16ccdb4C6d922629664174b904d80F2C35",blockCreated:17482143}}},sourceId:1})},62808:(e,t,s)=>{s.d(t,{Z:()=>i});var n=s(34222);const r=11155111,i=(0,s(32295).x)({...n.o,id:84532,network:"base-sepolia",name:"Base Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.base.org"]}},blockExplorers:{default:{name:"Basescan",url:"https://sepolia.basescan.org",apiUrl:"https://api-sepolia.basescan.org/api"}},contracts:{...n.o.contracts,disputeGameFactory:{[r]:{address:"0xd6E6dBf4F7EA0ac412fD8b65ED297e64BB7a06E1"}},l2OutputOracle:{[r]:{address:"0x84457ca9D0163FbC4bbfe4Dfbb20ba46e48DF254"}},portal:{[r]:{address:"0x49f53e41452c74589e85ca1677426ba426459e85",blockCreated:4446677}},l1StandardBridge:{[r]:{address:"0xfd0Bf71F60660E2f608ed56e1659C450eB113120",blockCreated:4446677}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:1059647}},testnet:!0,sourceId:r})},34222:(e,t,s)=>{s.d(t,{o:()=>bt});const n="2.21.47";let r={getDocsUrl:({docsBaseUrl:e,docsPath:t="",docsSlug:s})=>t?`${e??"https://viem.sh"}${t}${s?`#${s}`:""}`:void 0,version:`viem@${n}`};class i extends Error{constructor(e,t={}){const s=t.cause instanceof i?t.cause.details:t.cause?.message?t.cause.message:t.details,o=t.cause instanceof i&&t.cause.docsPath||t.docsPath,a=r.getDocsUrl?.({...t,docsPath:o});super([e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...a?[`Docs: ${a}`]:[],...s?[`Details: ${s}`]:[],...r.version?[`Version: ${r.version}`]:[]].join("\n"),t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=s,this.docsPath=o,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=n}walk(e){return o(this,e)}}function o(e,t){return t?.(e)?e:e&&"object"==typeof e&&"cause"in e&&void 0!==e.cause?o(e.cause,t):t?null:e}class a extends i{constructor({max:e,min:t,signed:s,size:n,value:r}){super(`Number "${r}" is not in safe ${n?`${8*n}-bit ${s?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}}class c extends i{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function l(e,{strict:t=!0}={}){return!!e&&("string"==typeof e&&(t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")))}function h(e){return l(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}function u(e,{size:t}){if(h(e)>t)throw new c({givenSize:h(e),maxSize:t})}function d(e,t={}){const{signed:s}=t;t.size&&u(e,{size:t.size});const n=BigInt(e);if(!s)return n;const r=(e.length-2)/2;return n<=(1n<<8n*BigInt(r)-1n)-1n?n:n-BigInt(`0x${"f".padStart(2*r,"f")}`)-1n}function f(e,t={}){return Number(d(e,t))}function p(e,t){return({exclude:s,format:n})=>({exclude:s,format:e=>{const r=t(e);if(s)for(const e of s)delete r[e];return{...r,...n(e)}},type:e})}const g={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function m(e){const t={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?f(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerBlobGas:e.maxFeePerBlobGas?BigInt(e.maxFeePerBlobGas):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?f(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?g[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return e.authorizationList&&(t.authorizationList=e.authorizationList.map((e=>({contractAddress:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)})))),t.yParity=(()=>{if(e.yParity)return Number(e.yParity);if("bigint"==typeof t.v){if(0n===t.v||27n===t.v)return 0;if(1n===t.v||28n===t.v)return 1;if(t.v>=35n)return t.v%2n===0n?1:0}})(),"legacy"===t.type&&(delete t.accessList,delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas,delete t.yParity),"eip2930"===t.type&&(delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas),"eip1559"===t.type&&delete t.maxFeePerBlobGas,t}const w=p("transaction",m);function v(e){const t=(e.transactions??[]).map((e=>"string"==typeof e?e:m(e)));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,blobGasUsed:e.blobGasUsed?BigInt(e.blobGasUsed):void 0,difficulty:e.difficulty?BigInt(e.difficulty):void 0,excessBlobGas:e.excessBlobGas?BigInt(e.excessBlobGas):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:t,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}const y=p("block",v);const b={"0x0":"reverted","0x1":"success"};function _(e){const t={...e,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,contractAddress:e.contractAddress?e.contractAddress:null,cumulativeGasUsed:e.cumulativeGasUsed?BigInt(e.cumulativeGasUsed):null,effectiveGasPrice:e.effectiveGasPrice?BigInt(e.effectiveGasPrice):null,gasUsed:e.gasUsed?BigInt(e.gasUsed):null,logs:e.logs?e.logs.map((e=>function(e,{args:t,eventName:s}={}){return{...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,logIndex:e.logIndex?Number(e.logIndex):null,transactionHash:e.transactionHash?e.transactionHash:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,...s?{args:t,eventName:s}:{}}}(e))):null,to:e.to?e.to:null,transactionIndex:e.transactionIndex?f(e.transactionIndex):null,status:e.status?b[e.status]:null,type:e.type?g[e.type]||e.type:null};return e.blobGasPrice&&(t.blobGasPrice=BigInt(e.blobGasPrice)),e.blobGasUsed&&(t.blobGasUsed=BigInt(e.blobGasUsed)),t}const k=p("transactionReceipt",_),C={block:y({format(e){const t=e.transactions?.map((e=>{if("string"==typeof e)return e;const t=m(e);return"0x7e"===t.typeHex&&(t.isSystemTx=e.isSystemTx,t.mint=e.mint?d(e.mint):void 0,t.sourceHash=e.sourceHash,t.type="deposit"),t}));return{transactions:t,stateRoot:e.stateRoot}}}),transaction:w({format(e){const t={};return"0x7e"===e.type&&(t.isSystemTx=e.isSystemTx,t.mint=e.mint?d(e.mint):void 0,t.sourceHash=e.sourceHash,t.type="deposit"),t}}),transactionReceipt:k({format:e=>({l1GasPrice:e.l1GasPrice?d(e.l1GasPrice):null,l1GasUsed:e.l1GasUsed?d(e.l1GasUsed):null,l1Fee:e.l1Fee?d(e.l1Fee):null,l1FeeScalar:e.l1FeeScalar?Number(e.l1FeeScalar):null})})};class x extends i{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}class A extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&void 0!==t&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const e=this.keys().next().value;e&&this.delete(e)}return this}}class S extends i{constructor({offset:e,position:t,size:s}){super(`Slice ${"start"===t?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${s}).`,{name:"SliceOffsetOutOfBoundsError"})}}class E extends i{constructor({size:e,targetSize:t,type:s}){super(`${s.charAt(0).toUpperCase()}${s.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}}function T(e,{dir:t,size:s=32}={}){return"string"==typeof e?function(e,{dir:t,size:s=32}={}){if(null===s)return e;const n=e.replace("0x","");if(n.length>2*s)throw new E({size:Math.ceil(n.length/2),targetSize:s,type:"hex"});return`0x${n["right"===t?"padEnd":"padStart"](2*s,"0")}`}(e,{dir:t,size:s}):function(e,{dir:t,size:s=32}={}){if(null===s)return e;if(e.length>s)throw new E({size:e.length,targetSize:s,type:"bytes"});const n=new Uint8Array(s);for(let r=0;r<s;r++){const i="right"===t;n[i?r:s-r-1]=e[i?r:e.length-r-1]}return n}(e,{dir:t,size:s})}const I=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function P(e,t={}){return"number"==typeof e||"bigint"==typeof e?j(e,t):"string"==typeof e?function(e,t={}){const s=O.encode(e);return $(s,t)}(e,t):"boolean"==typeof e?function(e,t={}){const s=`0x${Number(e)}`;if("number"==typeof t.size)return u(s,{size:t.size}),T(s,{size:t.size});return s}(e,t):$(e,t)}function $(e,t={}){let s="";for(let t=0;t<e.length;t++)s+=I[e[t]];const n=`0x${s}`;return"number"==typeof t.size?(u(n,{size:t.size}),T(n,{dir:"right",size:t.size})):n}function j(e,t={}){const{signed:s,size:n}=t,r=BigInt(e);let i;n?i=s?(1n<<8n*BigInt(n)-1n)-1n:2n**(8n*BigInt(n))-1n:"number"==typeof e&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o="bigint"==typeof i&&s?-i-1n:0;if(i&&r>i||r<o){const t="bigint"==typeof e?"n":"";throw new a({max:i?`${i}${t}`:void 0,min:`${o}${t}`,signed:s,size:n,value:`${e}${t}`})}const c=`0x${(s&&r<0?(1n<<BigInt(8*n))+BigInt(r):r).toString(16)}`;return n?T(c,{size:n}):c}const O=new TextEncoder;const L=new TextEncoder;function U(e,t={}){return"number"==typeof e||"bigint"==typeof e?function(e,t){const s=j(e,t);return N(s)}(e,t):"boolean"==typeof e?function(e,t={}){const s=new Uint8Array(1);if(s[0]=Number(e),"number"==typeof t.size)return u(s,{size:t.size}),T(s,{size:t.size});return s}(e,t):l(e)?N(e,t):D(e,t)}const R={zero:48,nine:57,A:65,F:70,a:97,f:102};function M(e){return e>=R.zero&&e<=R.nine?e-R.zero:e>=R.A&&e<=R.F?e-(R.A-10):e>=R.a&&e<=R.f?e-(R.a-10):void 0}function N(e,t={}){let s=e;t.size&&(u(s,{size:t.size}),s=T(s,{dir:"right",size:t.size}));let n=s.slice(2);n.length%2&&(n=`0${n}`);const r=n.length/2,o=new Uint8Array(r);for(let e=0,t=0;e<r;e++){const s=M(n.charCodeAt(t++)),r=M(n.charCodeAt(t++));if(void 0===s||void 0===r)throw new i(`Invalid byte sequence ("${n[t-2]}${n[t-1]}" in "${n}").`);o[e]=16*s+r}return o}function D(e,t={}){const s=L.encode(e);return"number"==typeof t.size?(u(s,{size:t.size}),T(s,{dir:"right",size:t.size})):s}function z(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function F(e,...t){if(!((s=e)instanceof Uint8Array||null!=s&&"object"==typeof s&&"Uint8Array"===s.constructor.name))throw new Error("Uint8Array expected");var s;if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function B(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function q(e,t){F(e);const s=t.outputLen;if(e.length<s)throw new Error(`digestInto() expects output buffer of length at least ${s}`)}const G=BigInt(2**32-1),H=BigInt(32);function J(e,t=!1){return t?{h:Number(e&G),l:Number(e>>H&G)}:{h:0|Number(e>>H&G),l:0|Number(e&G)}}function V(e,t=!1){let s=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let r=0;r<e.length;r++){const{h:i,l:o}=J(e[r],t);[s[r],n[r]]=[i,o]}return[s,n]}const K=(e,t,s)=>e<<s|t>>>32-s,W=(e,t,s)=>t<<s|e>>>32-s,Z=(e,t,s)=>t<<s-32|e>>>64-s,X=(e,t,s)=>e<<s-32|t>>>64-s;const Q=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Y=(e,t)=>e<<32-t|e>>>t,ee=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],te=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255;function se(e){for(let t=0;t<e.length;t++)e[t]=te(e[t])}function ne(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),F(e),e}class re{clone(){return this._cloneInto()}}function ie(e){const t=t=>e().update(ne(t)).digest(),s=e();return t.outputLen=s.outputLen,t.blockLen=s.blockLen,t.create=()=>e(),t}const oe=[],ae=[],ce=[],le=BigInt(0),he=BigInt(1),ue=BigInt(2),de=BigInt(7),fe=BigInt(256),pe=BigInt(113);for(let e=0,t=he,s=1,n=0;e<24;e++){[s,n]=[n,(2*s+3*n)%5],oe.push(2*(5*n+s)),ae.push((e+1)*(e+2)/2%64);let r=le;for(let e=0;e<7;e++)t=(t<<he^(t>>de)*pe)%fe,t&ue&&(r^=he<<(he<<BigInt(e))-he);ce.push(r)}const[ge,me]=V(ce,!0),we=(e,t,s)=>s>32?Z(e,t,s):K(e,t,s),ve=(e,t,s)=>s>32?X(e,t,s):W(e,t,s);class ye extends re{constructor(e,t,s,n=!1,r=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=s,this.enableXOF=n,this.rounds=r,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,z(s),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var i;this.state=new Uint8Array(200),this.state32=(i=this.state,new Uint32Array(i.buffer,i.byteOffset,Math.floor(i.byteLength/4)))}keccak(){ee||se(this.state32),function(e,t=24){const s=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)s[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const n=(t+8)%10,r=(t+2)%10,i=s[r],o=s[r+1],a=we(i,o,1)^s[n],c=ve(i,o,1)^s[n+1];for(let s=0;s<50;s+=10)e[t+s]^=a,e[t+s+1]^=c}let t=e[2],r=e[3];for(let s=0;s<24;s++){const n=ae[s],i=we(t,r,n),o=ve(t,r,n),a=oe[s];t=e[a],r=e[a+1],e[a]=i,e[a+1]=o}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)s[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~s[(n+2)%10]&s[(n+4)%10]}e[0]^=ge[n],e[1]^=me[n]}s.fill(0)}(this.state32,this.rounds),ee||se(this.state32),this.posOut=0,this.pos=0}update(e){B(this);const{blockLen:t,state:s}=this,n=(e=ne(e)).length;for(let r=0;r<n;){const i=Math.min(t-this.pos,n-r);for(let t=0;t<i;t++)s[this.pos++]^=e[r++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:s,blockLen:n}=this;e[s]^=t,128&t&&s===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){B(this,!1),F(e),this.finish();const t=this.state,{blockLen:s}=this;for(let n=0,r=e.length;n<r;){this.posOut>=s&&this.keccak();const i=Math.min(s-this.posOut,r-n);e.set(t.subarray(this.posOut,this.posOut+i),n),this.posOut+=i,n+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return z(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(q(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:s,outputLen:n,rounds:r,enableXOF:i}=this;return e||(e=new ye(t,s,n,i,r)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=r,e.suffix=s,e.outputLen=n,e.enableXOF=i,e.destroyed=this.destroyed,e}}const be=(e,t,s)=>ie((()=>new ye(t,e,s))),_e=be(1,136,32);const ke=new A(8192);function Ce(e,t){if(ke.has(`${e}.${t}`))return ke.get(`${e}.${t}`);const s=t?`${t}${e.toLowerCase()}`:e.substring(2).toLowerCase(),n=function(e,t){const s=t||"hex",n=_e(l(e,{strict:!1})?U(e):e);return"bytes"===s?n:P(n)}(D(s),"bytes"),r=(t?s.substring(`${t}0x`.length):s).split("");for(let e=0;e<40;e+=2)n[e>>1]>>4>=8&&r[e]&&(r[e]=r[e].toUpperCase()),(15&n[e>>1])>=8&&r[e+1]&&(r[e+1]=r[e+1].toUpperCase());const i=`0x${r.join("")}`;return ke.set(`${e}.${t}`,i),i}const xe=/^0x[a-fA-F0-9]{40}$/,Ae=new A(8192);function Se(e,t){const{strict:s=!0}=t??{},n=`${e}.${s}`;if(Ae.has(n))return Ae.get(n);const r=!(!xe.test(e)||e.toLowerCase()!==e&&s&&Ce(e)!==e);return Ae.set(n,r),r}function Ee(e){return`0x${e.reduce(((e,t)=>e+t.replace("0x","")),"")}`}class Te extends i{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class Ie extends i{constructor({length:e,position:t}){super(`Position \`${t}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class Pe extends i{constructor({count:e,limit:t}){super(`Recursive read limit of \`${t}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const $e={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new Pe({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new Ie({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new Te({offset:e});const t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new Te({offset:e});const t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){const s=t??this.position;return this.assertPosition(s+e-1),this.bytes.subarray(s,s+e)},inspectUint8(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){const t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){const t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){const t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,255&e),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();const s=this.inspectBytes(e);return this.position+=t??e,s},readUint8(){this.assertReadLimit(),this._touch();const e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();const e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();const e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();const e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){const t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};function je(e,{recursiveReadLimit:t=8192}={}){const s=Object.create($e);return s.bytes=e,s.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength),s.positionReadCount=new Map,s.recursiveReadLimit=t,s}function Oe(e,t="hex"){const s=Le(e),n=je(new Uint8Array(s.length));return s.encode(n),"hex"===t?$(n.bytes):n.bytes}function Le(e){return Array.isArray(e)?function(e){const t=e.reduce(((e,t)=>e+t.length),0),s=Ue(t);return{length:t<=55?1+t:1+s+t,encode(n){t<=55?n.pushByte(192+t):(n.pushByte(247+s),1===s?n.pushUint8(t):2===s?n.pushUint16(t):3===s?n.pushUint24(t):n.pushUint32(t));for(const{encode:t}of e)t(n)}}}(e.map((e=>Le(e)))):function(e){const t="string"==typeof e?N(e):e,s=Ue(t.length),n=1===t.length&&t[0]<128?1:t.length<=55?1+t.length:1+s+t.length;return{length:n,encode(e){1===t.length&&t[0]<128?e.pushBytes(t):t.length<=55?(e.pushByte(128+t.length),e.pushBytes(t)):(e.pushByte(183+s),1===s?e.pushUint8(t.length):2===s?e.pushUint16(t.length):3===s?e.pushUint24(t.length):e.pushUint32(t.length),e.pushBytes(t))}}}(e)}function Ue(e){if(e<256)return 1;if(e<65536)return 2;if(e<2**24)return 3;if(e<2**32)return 4;throw new i("Length is too large.")}const Re={ether:-9,wei:9};function Me(e,t){let s=e.toString();const n=s.startsWith("-");n&&(s=s.slice(1)),s=s.padStart(t,"0");let[r,i]=[s.slice(0,s.length-t),s.slice(s.length-t)];return i=i.replace(/(0+)$/,""),`${n?"-":""}${r||"0"}${i?`.${i}`:""}`}function Ne(e,t="wei"){return Me(e,Re[t])}function De(e){const t=Object.entries(e).map((([e,t])=>void 0===t||!1===t?null:[e,t])).filter(Boolean),s=t.reduce(((e,[t])=>Math.max(e,t.length)),0);return t.map((([e,t])=>`  ${`${e}:`.padEnd(s+1)}  ${t}`)).join("\n")}class ze extends i{constructor({v:e}){super(`Invalid \`v\` value "${e}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}}class Fe extends i{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",De(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class Be extends i{constructor({storageKey:e}){super(`Size for storage key "${e}" is invalid. Expected 32 bytes. Got ${Math.floor((e.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}}function qe(e){const{kzg:t}=e,s=e.to??("string"==typeof e.blobs[0]?"hex":"bytes"),n="string"==typeof e.blobs[0]?e.blobs.map((e=>N(e))):e.blobs,r=[];for(const e of n)r.push(Uint8Array.from(t.blobToKzgCommitment(e)));return"bytes"===s?r:r.map((e=>$(e)))}function Ge(e){const{kzg:t}=e,s=e.to??("string"==typeof e.blobs[0]?"hex":"bytes"),n="string"==typeof e.blobs[0]?e.blobs.map((e=>N(e))):e.blobs,r="string"==typeof e.commitments[0]?e.commitments.map((e=>N(e))):e.commitments,i=[];for(let e=0;e<n.length;e++){const s=n[e],o=r[e];i.push(Uint8Array.from(t.computeBlobKzgProof(s,o)))}return"bytes"===s?i:i.map((e=>$(e)))}const He=(e,t,s)=>e&t^e&s^t&s;class Je extends re{constructor(e,t,s,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=s,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Q(this.buffer)}update(e){B(this);const{view:t,buffer:s,blockLen:n}=this,r=(e=ne(e)).length;for(let i=0;i<r;){const o=Math.min(n-this.pos,r-i);if(o!==n)s.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=Q(e);for(;n<=r-i;i+=n)this.process(t,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){B(this),q(e,this),this.finished=!0;const{buffer:t,view:s,blockLen:n,isLE:r}=this;let{pos:i}=this;t[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>n-i&&(this.process(s,0),i=0);for(let e=i;e<n;e++)t[e]=0;!function(e,t,s,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,s,n);const r=BigInt(32),i=BigInt(4294967295),o=Number(s>>r&i),a=Number(s&i),c=n?4:0,l=n?0:4;e.setUint32(t+c,o,n),e.setUint32(t+l,a,n)}(s,n-8,BigInt(8*this.length),r),this.process(s,0);const o=Q(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)o.setUint32(4*e,l[e],r)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const s=e.slice(0,t);return this.destroy(),s}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:s,length:n,finished:r,destroyed:i,pos:o}=this;return e.length=n,e.pos=o,e.finished=r,e.destroyed=i,n%t&&e.buffer.set(s),e}}const Ve=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ke=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),We=new Uint32Array(64);class Ze extends Je{constructor(){super(64,32,8,!1),this.A=0|Ke[0],this.B=0|Ke[1],this.C=0|Ke[2],this.D=0|Ke[3],this.E=0|Ke[4],this.F=0|Ke[5],this.G=0|Ke[6],this.H=0|Ke[7]}get(){const{A:e,B:t,C:s,D:n,E:r,F:i,G:o,H:a}=this;return[e,t,s,n,r,i,o,a]}set(e,t,s,n,r,i,o,a){this.A=0|e,this.B=0|t,this.C=0|s,this.D=0|n,this.E=0|r,this.F=0|i,this.G=0|o,this.H=0|a}process(e,t){for(let s=0;s<16;s++,t+=4)We[s]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=We[e-15],s=We[e-2],n=Y(t,7)^Y(t,18)^t>>>3,r=Y(s,17)^Y(s,19)^s>>>10;We[e]=r+We[e-7]+n+We[e-16]|0}let{A:s,B:n,C:r,D:i,E:o,F:a,G:c,H:l}=this;for(let e=0;e<64;e++){const t=l+(Y(o,6)^Y(o,11)^Y(o,25))+((h=o)&a^~h&c)+Ve[e]+We[e]|0,u=(Y(s,2)^Y(s,13)^Y(s,22))+He(s,n,r)|0;l=c,c=a,a=o,o=i+t|0,i=r,r=n,n=s,s=t+u|0}var h;s=s+this.A|0,n=n+this.B|0,r=r+this.C|0,i=i+this.D|0,o=o+this.E|0,a=a+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(s,n,r,i,o,a,c,l)}roundClean(){We.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Xe=ie((()=>new Ze));function Qe(e){const{commitment:t,version:s=1}=e,n=e.to??("string"==typeof t?"hex":"bytes"),r=function(e,t){const s=t||"hex",n=Xe(l(e,{strict:!1})?U(e):e);return"bytes"===s?n:P(n)}(t,"bytes");return r.set([s],0),"bytes"===n?r:$(r)}const Ye=4096,et=131072,tt=761855;class st extends i{constructor({maxSize:e,size:t}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${t} bytes`],name:"BlobSizeTooLargeError"})}}class nt extends i{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}class rt extends i{constructor({hash:e,size:t}){super(`Versioned hash "${e}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${t}`],name:"InvalidVersionedHashSizeError"})}}class it extends i{constructor({hash:e,version:t}){super(`Versioned hash "${e}" version is invalid.`,{metaMessages:["Expected: 1",`Received: ${t}`],name:"InvalidVersionedHashVersionError"})}}function ot(e){const{data:t,kzg:s,to:n}=e,r=e.blobs??function(e){const t=e.to??("string"==typeof e.data?"hex":"bytes"),s="string"==typeof e.data?N(e.data):e.data,n=h(s);if(!n)throw new nt;if(n>tt)throw new st({maxSize:tt,size:n});const r=[];let i=!0,o=0;for(;i;){const e=je(new Uint8Array(et));let t=0;for(;t<Ye;){const n=s.slice(o,o+31);if(e.pushByte(0),e.pushBytes(n),n.length<31){e.pushByte(128),i=!1;break}t++,o+=31}r.push(e)}return"bytes"===t?r.map((e=>e.bytes)):r.map((e=>$(e.bytes)))}({data:t,to:n}),i=e.commitments??qe({blobs:r,kzg:s,to:n}),o=e.proofs??Ge({blobs:r,commitments:i,kzg:s,to:n}),a=[];for(let e=0;e<r.length;e++)a.push({blob:r[e],commitment:i[e],proof:o[e]});return a}function at(e,{dir:t="left"}={}){let s="string"==typeof e?e.replace("0x",""):e,n=0;for(let e=0;e<s.length-1&&"0"===s["left"===t?e:s.length-e-1].toString();e++)n++;return s="left"===t?s.slice(n):s.slice(0,s.length-n),"string"==typeof e?(1===s.length&&"right"===t&&(s=`${s}0`),`0x${s.length%2==1?`0${s}`:s}`):s}const ct=2n**256n-1n;class lt extends i{constructor({chainId:e}){super("number"==typeof e?`Chain ID "${e}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}class ht extends i{constructor({cause:e,message:t}={}){const s=t?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${s?`with reason: ${s}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(ht,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(ht,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class ut extends i{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${Ne(t)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(ut,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});Object.defineProperty(class extends i{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${Ne(t)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}},"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});Object.defineProperty(class extends i{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}},"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});Object.defineProperty(class extends i{constructor({cause:e,nonce:t}={}){super([`Nonce provided for the transaction ${t?`(${t}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join("\n"),{cause:e,name:"NonceTooLowError"})}},"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});Object.defineProperty(class extends i{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}},"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});Object.defineProperty(class extends i{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join("\n"),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}},"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});Object.defineProperty(class extends i{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}},"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});Object.defineProperty(class extends i{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}},"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});Object.defineProperty(class extends i{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}},"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class dt extends i{constructor({cause:e,maxPriorityFeePerGas:t,maxFeePerGas:s}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${t?` = ${Ne(t)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${s?` = ${Ne(s)} gwei`:""}).`].join("\n"),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(dt,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});function ft(e,t,s,{strict:n}={}){return l(e,{strict:!1})?function(e,t,s,{strict:n}={}){pt(e,t);const r=`0x${e.replace("0x","").slice(2*(t??0),2*(s??e.length))}`;n&&gt(r,t,s);return r}(e,t,s,{strict:n}):function(e,t,s,{strict:n}={}){pt(e,t);const r=e.slice(t,s);n&&gt(r,t,s);return r}(e,t,s,{strict:n})}function pt(e,t){if("number"==typeof t&&t>0&&t>h(e)-1)throw new S({offset:t,position:"start",size:h(e)})}function gt(e,t,s){if("number"==typeof t&&"number"==typeof s&&h(e)!==s-t)throw new S({offset:s,position:"end",size:h(e)})}function mt(e){const{chainId:t,maxPriorityFeePerGas:s,maxFeePerGas:n,to:r}=e;if(t<=0)throw new lt({chainId:t});if(r&&!Se(r))throw new x({address:r});if(n&&n>ct)throw new ut({maxFeePerGas:n});if(s&&n&&s>n)throw new dt({maxFeePerGas:n,maxPriorityFeePerGas:s})}function wt(e){if(!e||0===e.length)return[];const t=[];for(let s=0;s<e.length;s++){const{address:n,storageKeys:r}=e[s];for(let e=0;e<r.length;e++)if(r[e].length-2!=64)throw new Be({storageKey:r[e]});if(!Se(n,{strict:!1}))throw new x({address:n});t.push([n,r])}return t}function vt(e,t){const s=function(e){if(e.type)return e.type;if(void 0!==e.authorizationList)return"eip7702";if(void 0!==e.blobs||void 0!==e.blobVersionedHashes||void 0!==e.maxFeePerBlobGas||void 0!==e.sidecars)return"eip4844";if(void 0!==e.maxFeePerGas||void 0!==e.maxPriorityFeePerGas)return"eip1559";if(void 0!==e.gasPrice)return void 0!==e.accessList?"eip2930":"legacy";throw new Fe({transaction:e})}(e);return"eip1559"===s?function(e,t){const{chainId:s,gas:n,nonce:r,to:i,value:o,maxFeePerGas:a,maxPriorityFeePerGas:c,accessList:l,data:h}=e;mt(e);const u=wt(l),d=[P(s),r?P(r):"0x",c?P(c):"0x",a?P(a):"0x",n?P(n):"0x",i??"0x",o?P(o):"0x",h??"0x",u,...yt(e,t)];return Ee(["0x02",Oe(d)])}(e,t):"eip2930"===s?function(e,t){const{chainId:s,gas:n,data:r,nonce:o,to:a,value:c,accessList:l,gasPrice:h}=e;!function(e){const{chainId:t,maxPriorityFeePerGas:s,gasPrice:n,maxFeePerGas:r,to:o}=e;if(t<=0)throw new lt({chainId:t});if(o&&!Se(o))throw new x({address:o});if(s||r)throw new i("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(n&&n>ct)throw new ut({maxFeePerGas:n})}(e);const u=wt(l),d=[P(s),o?P(o):"0x",h?P(h):"0x",n?P(n):"0x",a??"0x",c?P(c):"0x",r??"0x",u,...yt(e,t)];return Ee(["0x01",Oe(d)])}(e,t):"eip4844"===s?function(e,t){const{chainId:s,gas:n,nonce:r,to:i,value:o,maxFeePerBlobGas:a,maxFeePerGas:c,maxPriorityFeePerGas:l,accessList:u,data:d}=e;!function(e){const{blobVersionedHashes:t}=e;if(t){if(0===t.length)throw new nt;for(const e of t){const t=h(e),s=f(ft(e,0,1));if(32!==t)throw new rt({hash:e,size:t});if(1!==s)throw new it({hash:e,version:s})}}mt(e)}(e);let p=e.blobVersionedHashes,g=e.sidecars;if(e.blobs&&(void 0===p||void 0===g)){const t="string"==typeof e.blobs[0]?e.blobs:e.blobs.map((e=>$(e))),s=e.kzg,n=qe({blobs:t,kzg:s});if(void 0===p&&(p=function(e){const{commitments:t,version:s}=e,n=e.to??("string"==typeof t[0]?"hex":"bytes"),r=[];for(const e of t)r.push(Qe({commitment:e,to:n,version:s}));return r}({commitments:n})),void 0===g){g=ot({blobs:t,commitments:n,proofs:Ge({blobs:t,commitments:n,kzg:s})})}}const m=wt(u),w=[P(s),r?P(r):"0x",l?P(l):"0x",c?P(c):"0x",n?P(n):"0x",i??"0x",o?P(o):"0x",d??"0x",m,a?P(a):"0x",p??[],...yt(e,t)],v=[],y=[],b=[];if(g)for(let e=0;e<g.length;e++){const{blob:t,commitment:s,proof:n}=g[e];v.push(t),y.push(s),b.push(n)}return Ee(["0x03",Oe(g?[w,v,y,b]:w)])}(e,t):"eip7702"===s?function(e,t){const{authorizationList:s,chainId:n,gas:r,nonce:i,to:o,value:a,maxFeePerGas:c,maxPriorityFeePerGas:l,accessList:h,data:u}=e;!function(e){const{authorizationList:t}=e;if(t)for(const e of t){const{contractAddress:t,chainId:s}=e;if(!Se(t))throw new x({address:t});if(s<0)throw new lt({chainId:s})}mt(e)}(e);const d=wt(h),f=function(e){if(!e||0===e.length)return[];const t=[];for(const s of e){const{contractAddress:e,chainId:n,nonce:r,...i}=s;t.push([n?P(n):"0x",e,r?P(r):"0x",...yt({},i)])}return t}(s);return Ee(["0x04",Oe([P(n),i?P(i):"0x",l?P(l):"0x",c?P(c):"0x",r?P(r):"0x",o??"0x",a?P(a):"0x",u??"0x",d,f,...yt(e,t)])])}(e,t):function(e,t){const{chainId:s=0,gas:n,data:r,nonce:o,to:a,value:c,gasPrice:l}=e;!function(e){const{chainId:t,maxPriorityFeePerGas:s,gasPrice:n,maxFeePerGas:r,to:o}=e;if(o&&!Se(o))throw new x({address:o});if(void 0!==t&&t<=0)throw new lt({chainId:t});if(s||r)throw new i("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(n&&n>ct)throw new ut({maxFeePerGas:n})}(e);let h=[o?P(o):"0x",l?P(l):"0x",n?P(n):"0x",a??"0x",c?P(c):"0x",r??"0x"];if(t){const e=(()=>{if(t.v>=35n){return(t.v-35n)/2n>0?t.v:27n+(35n===t.v?0n:1n)}if(s>0)return BigInt(2*s)+BigInt(35n+t.v-27n);const e=27n+(27n===t.v?0n:1n);if(t.v!==e)throw new ze({v:t.v});return e})(),n=at(t.r),r=at(t.s);h=[...h,P(e),"0x00"===n?"0x":n,"0x00"===r?"0x":r]}else s>0&&(h=[...h,P(s),"0x","0x"]);return Oe(h)}(e,t)}function yt(e,t){const s=t??e,{v:n,yParity:r}=s;if(void 0===s.r)return[];if(void 0===s.s)return[];if(void 0===n&&void 0===r)return[];const i=at(s.r),o=at(s.s);return["number"==typeof r?r?P(1):"0x":0n===n?"0x":1n===n?P(1):27n===n?"0x":P(1),"0x00"===i?"0x":i,"0x00"===o?"0x":o]}const bt={contracts:{gasPriceOracle:{address:"0x420000000000000000000000000000000000000F"},l1Block:{address:"0x4200000000000000000000000000000000000015"},l2CrossDomainMessenger:{address:"0x4200000000000000000000000000000000000007"},l2Erc721Bridge:{address:"0x4200000000000000000000000000000000000014"},l2StandardBridge:{address:"0x4200000000000000000000000000000000000010"},l2ToL1MessagePasser:{address:"0x4200000000000000000000000000000000000016"}},formatters:C,serializers:{transaction:function(e,t){return function(e){return"deposit"===e.type||void 0!==e.sourceHash}(e)?function(e){!function(e){const{from:t,to:s}=e;if(t&&!Se(t))throw new x({address:t});if(s&&!Se(s))throw new x({address:s})}(e);const{sourceHash:t,data:s,from:n,gas:r,isSystemTx:i,mint:o,to:a,value:c}=e;return Ee(["0x7e",Oe([t,n,a??"0x",o?P(o):"0x",c?P(c):"0x",r?P(r):"0x",i?"0x1":"0x",s??"0x"])])}(e):vt(e,t)}}}},32295:(e,t,s)=>{function n(e){return{formatters:void 0,fees:void 0,serializers:void 0,...e}}s.d(t,{x:()=>n})},47594:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>f});var r=s(49083),i=s(9632),o=s(28393),a=s(3041),c=s(64714),l=s(98195),h=s(62422),u=e([r,i,o,a,c,l,h]);[r,i,o,a,c,l,h]=u.then?(await u)():u;class d{isDevMode=!1;isTestnet=!1;supabaseUrls={mainnet:"https://vykzkqqncxcfzflpkcsr.supabase.co",testnet:"https://vykzkqqncxcfzflpkcsr.supabase.co"};supabaseKeys={mainnet:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ5a3prcXFuY3hjZnpmbHBrY3NyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mjk0MDc0OTUsImV4cCI6MjA0NDk4MzQ5NX0.UEGqZvIJ_FPxBk41C0RG4HfHahtR0yUfYVmtiZf61i0",testnet:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ5a3prcXFuY3hjZnpmbHBrY3NyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mjk0MDc0OTUsImV4cCI6MjA0NDk4MzQ5NX0.UEGqZvIJ_FPxBk41C0RG4HfHahtR0yUfYVmtiZf61i0"};_supabaesConnector;get supabaseConnector(){if(!this._supabaesConnector)throw new Error("Supabase connector not set");return this._supabaesConnector}set supabaseConnector(e){this._supabaesConnector=e}onLoggedInUserPersonaNotFound=()=>{};initOnlyForGaiaProtocol(e,t){this.isDevMode=e,this.isTestnet=t,this.supabaseConnector=new i.OP(this.supabaseUrls[t?"testnet":"mainnet"],this.supabaseKeys[t?"testnet":"mainnet"],a.A),a.r.supabaseConnector=this.supabaseConnector,l.A.supabaseConnector=this.supabaseConnector,r.vE.Avatar=c.A,r.vE.login=async()=>{const e=await a.A.login();await r.$5.getUser(e)},r.vE.fetchUser=async e=>{const t=await l.A.fetchPersona(e);return t?h.A.convertPersonaToSocialUser(t):{id:e,name:o.wD.shortenAddress(e),username:o.wD.shortenAddress(e),isFallback:!0}},r.vE.fetchBulkUsers=async e=>(await l.A.fetchPersonas(e)).map(h.A.convertPersonaToSocialUser),this.checkLoggedInUserHasPersona(),a.A.on("loginStatusChanged",(()=>this.checkLoggedInUserHasPersona()))}async checkLoggedInUserHasPersona(){if(!a.A.isLoggedIn)return;const e=a.A.loggedInAddress;(await r.vE.fetchUser(e)).isFallback&&this.onLoggedInUserPersonaNotFound()}init(e,t,s,n){this.initOnlyForGaiaProtocol(e,t),a.r.executeAfterLogin=async e=>{n.token=await s.callEdgeFunction("inject-login-credentials",{token:e})}}}const f=new d;n()}catch(e){n(e)}}))},73224:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{$:()=>r.A});var r=s(47594),i=s(38325),o=e([r,i]);[r,i]=o.then?(await o)():o,n()}catch(e){n(e)}}))},38325:(e,t,s)=>{s.a(e,(async(e,t)=>{try{var n=s(75321),r=s(83501),i=s(32385),o=e([n,r,i]);[n,r,i]=o.then?(await o)():o;n.vs;t()}catch(e){t(e)}}))},64714:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>c});var r=s(75321),i=s(83501),o=s(28393),a=e([r,i,o]);[r,i,o]=a.then?(await a)():a;class c extends r.vs{user;size;loadingSpinner;constructor(e,t=32){super(".persona-avatar"),this.user=e,this.size=t,this.load()}async load(){this.showLoading(),this.clear().append(new o.L3(this.user.id,{size:this.size})),this.hideLoading()}set imageSrc(e){this.clear().showLoading(),this.append((0,r.el)("img",{src:e,onload:()=>this.hideLoading()}))}showLoading(){this.loadingSpinner||(this.loadingSpinner=(new i.JG.LoadingSpinner).appendTo(this),this.loadingSpinner.on("remove",(()=>this.loadingSpinner=void 0)))}hideLoading(){this.loadingSpinner?.remove()}}n()}catch(e){n(e)}}))},51832:(e,t,s)=>{s.d(t,{F:()=>n});const n="*"},32385:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>w});var r=s(75321),i=s(83501),o=s(28393),a=s(6204),c=s(47594),l=s(86658),h=s(3269),u=s(89779),d=s(48316),f=s(64714),p=s(62422),g=s(75099),m=e([r,i,o,a,c,l,h,u,d,f,p,g]);[r,i,o,a,c,l,h,u,d,f,p,g]=m.then?(await m)():m;class w extends r.vs{walletAddress;avatar;invisibleFileInput;profileImageUrl;thumbnailImageUrl;constructor(e,t){super(".persona-form"),this.walletAddress=e,this.append((0,r.el)(".avatar",this.avatar=new f.A(t?p.A.convertPersonaToSocialUser(t):{id:e,name:o.wD.shortenAddress(e),username:o.wD.shortenAddress(e)},120),new i.$n(".edit",{type:i.VQ.Circle,icon:new a.qU,onClick:(e,t)=>{t.stopPropagation(),new g.A(t.clientX,t.clientY,{imageExists:!!this.profileImageUrl,onSelected:e=>{"upload"===e?this.invisibleFileInput.openFileSelector():"nft"===e&&new d.A},onDeleted:()=>{this.profileImageUrl=void 0,this.thumbnailImageUrl=void 0,this.avatar.clear().load()}})}}),this.invisibleFileInput=new i.Kx({accept:"image/*",onChange:e=>{e.length>0&&this.uploadImage(e[0])}})),(0,r.el)(".wallet-address-input-container",new i.pd({label:"Wallet address",value:e,readOnly:!0})),(0,r.el)(".display-name-input-container",new i.pd({label:"Display name",placeholder:"Enter display name",value:t?.name}),(0,r.el)(".select-name-buttons",new i.$n(".ens-name"+(t?.is_ens_name?".selected":""),{type:i.VQ.Outlined,title:"Use ENS Name",onClick:()=>new h.A}),new i.$n(".basename"+(t?.is_basename?".selected":""),{type:i.VQ.Outlined,title:"Use Basename",onClick:()=>new l.A}),new i.$n(".gaia-name"+(t?.is_gaia_name?".selected":""),{type:i.VQ.Outlined,title:"Use Gaia Name",onClick:()=>new u.A}))),(0,r.el)(".bio-input-container",new i.pd({label:"Bio",placeholder:"Something about yourself",multiline:!0,value:t?.bio})))}async optimizeAndUploadImage(e,t){const s=await r.fv.optimizeImage(e,t,t);return await c.A.supabaseConnector.uploadPublicFile("avatars",this.walletAddress,s)}async uploadImage(e){this.avatar.clear().showLoading();const[t,s]=await Promise.all([this.optimizeAndUploadImage(e,1024),this.optimizeAndUploadImage(e,120)]);this.profileImageUrl=t,this.thumbnailImageUrl=s,this.avatar.hideLoading(),this.avatar.imageSrc=t}}n()}catch(e){n(e)}}))},98195:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>c});var r=s(9632),i=s(51832),o=e([r]);r=(o.then?(await o)():o)[0];class a extends r.r0{constructor(){super("personas",i.F)}async fetchPersona(e){return this.fetchSingle((t=>t.eq("wallet_address",e)))}async fetchPersonas(e){return this.fetch((t=>t.in("wallet_address",e)))}}const c=new a;n()}catch(e){n(e)}}))},62422:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>a});var r=s(28393),i=e([r]);r=(i.then?(await i)():i)[0];class o{convertPersonaToSocialUser(e){return{id:e.wallet_address,name:e.name??r.wD.shortenAddress(e.wallet_address),username:r.wD.shortenAddress(e.wallet_address),avatarUrl:e.profile_image_url}}}const a=new o;n()}catch(e){n(e)}}))},75099:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>a});var r=s(83501),i=s(6204),o=e([r,i]);[r,i]=o.then?(await o)():o;class a extends r.rI{constructor(e,t,s){super(".profile-image-source-select",{left:e,top:t}),this.appendToMain(new r.I(new r._2({icon:new i.xf,label:"Upload image",onClick:()=>{s.onSelected("upload"),this.remove()}}),new r._2({icon:new i.i9,label:"Select from NFTs",onClick:()=>{s.onSelected("nft"),this.remove()}})),s.imageExists?new r.I(new r._2({icon:new i.d7,label:"Delete image",onClick:()=>{s.onDeleted(),this.remove()}})):void 0)}}n()}catch(e){n(e)}}))},86658:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>c});var r=s(75321),i=s(83501),o=s(61857),a=e([r,i,o]);[r,i,o]=a.then?(await a)():a;class c extends i.h9{selectedBasename;useAsNameButton;constructor(){super(".name-basename-selector-modal"),this.appendToHeader((0,r.el)("h1","Choose Basename")).appendToMain((0,r.el)("p","Select a Basename to represent your identity"),new o.A).appendToFooter(new i.$n(".cancel",{title:"Cancel",onClick:()=>this.remove()}),this.useAsNameButton=new i.$n(".use-as-name",{title:"Use as Name",onClick:()=>{}}))}}n()}catch(e){n(e)}}))},61857:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>a});var r=s(75321),i=s(47594),o=e([r,i]);[r,i]=o.then?(await o)():o;class a extends r.vs{constructor(){super(".user-basename-list"),this.loadName()}async loadName(){const e=await i.A.supabaseConnector.callEdgeFunction("get-user-basename");console.log(e)}}n()}catch(e){n(e)}}))},3269:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>c});var r=s(75321),i=s(83501),o=s(43094),a=e([r,i,o]);[r,i,o]=a.then?(await a)():a;class c extends i.h9{selectedENSName;useAsNameButton;constructor(){super(".ens-name-selector-modal"),this.appendToHeader((0,r.el)("h1","Choose ENS Name")).appendToMain((0,r.el)("p","Select an ENS name to represent your identity"),new o.A).appendToFooter(new i.$n(".cancel",{title:"Cancel",onClick:()=>this.remove()}),this.useAsNameButton=new i.$n(".use-as-name",{title:"Use as Name",onClick:()=>{}}))}}n()}catch(e){n(e)}}))},43094:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>a});var r=s(75321),i=s(47594),o=e([r,i]);[r,i]=o.then?(await o)():o;class a extends r.vs{constructor(){super(".user-ens-name-list"),this.loadName()}async loadName(){const e=await i.A.supabaseConnector.callEdgeFunction("get-user-ens-name");console.log(e)}}n()}catch(e){n(e)}}))},89779:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>c});var r=s(75321),i=s(83501),o=s(48090),a=e([r,i,o]);[r,i,o]=a.then?(await a)():a;class c extends i.h9{selectedGaiaName;useAsNameButton;constructor(){super(".gaia-name-selector-modal"),this.appendToHeader((0,r.el)("h1","Choose Gaia Name")).appendToMain((0,r.el)("p","Select a Gaia Name to represent your identity"),new o.A).appendToFooter(new i.$n(".cancel",{title:"Cancel",onClick:()=>this.remove()}),this.useAsNameButton=new i.$n(".use-as-name",{title:"Use as Name",onClick:()=>{}}))}}n()}catch(e){n(e)}}))},48090:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>a});var r=s(75321),i=s(47594),o=e([r,i]);[r,i]=o.then?(await o)():o;class a extends r.vs{constructor(){super(".user-gaia-name-list"),this.loadName()}async loadName(){const e=await i.A.supabaseConnector.callEdgeFunction("get-user-gaia-name");console.log(e)}}n()}catch(e){n(e)}}))},48316:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>c});var r=s(75321),i=s(83501),o=s(12801),a=e([r,i,o]);[r,i,o]=a.then?(await a)():a;class c extends i.h9{selectedNFT;useAsProfileButton;constructor(){super(".nft-selector-modal"),this.appendToHeader((0,r.el)("h1","Choose NFT for Profile")).appendToMain((0,r.el)("p","Select an NFT to represent your Persona"),new o.A).appendToFooter(new i.$n(".cancel",{title:"Cancel",onClick:()=>this.remove()}),this.useAsProfileButton=new i.$n(".use-as-profile",{title:"Use as Profile",onClick:()=>{this.remove()}}))}}n()}catch(e){n(e)}}))},12801:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>a});var r=s(75321),i=s(47594),o=e([r,i]);[r,i]=o.then?(await o)():o;class a extends r.vs{constructor(){super(".user-nft-list"),this.loadNFTs()}async loadNFTs(){const e=await i.A.supabaseConnector.callEdgeFunction("get-user-nfts",{});console.log(e)}}n()}catch(e){n(e)}}))},36263:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>o});var r=s(75321),i=e([r]);r=(i.then?(await i)():i)[0];class o extends r.vs{constructor(){super(".loading-spinner.material-loading-spinner"),this.htmlElement.innerHTML='<svg width="24px" height="24px" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg"><circle fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg>'}}n()}catch(e){n(e)}}))},82787:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{j:()=>r.A});var r=s(36263),i=e([r]);r=(i.then?(await i)():i)[0],n()}catch(e){n(e)}}))},41569:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>d});var r=s(75321),i=e([r]);r=(i.then?(await i)():i)[0];class o extends r.vs{constructor(e){super(".avatar","👤")}}class a extends r.vs{constructor(){super("span.icon.edit","✏️")}}class c extends r.vs{constructor(){super("span.icon.delete","❌")}}class l extends r.vs{constructor(){super("span.icon.send-message","⬆️")}}class h extends r.vs{constructor(){super("span.icon.logout","🚪")}}class u{Avatar=o;LogoutIcon=h;EditMenuIcon=a;DeleteMenuIcon=c;SendMessageButtonIcon=l;login=()=>{throw new Error("Not implemented")};showUserInfo=e=>{throw new Error("Not implemented")};fetchUser=async()=>{throw new Error("Not implemented")};fetchBulkUsers=async()=>{throw new Error("Not implemented")};goLoggedInUserProfile=e=>{throw new Error("Not implemented")};getLoggedInUserMenu=(e,t)=>{throw new Error("Not implemented")}}const d=new u;n()}catch(e){n(e)}}))},19906:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>c});var r=s(75321),i=s(49617),o=s(15984),a=e([r,i,o]);[r,i,o]=a.then?(await a)():a;class c extends r.vs{messageManager;message;contentDisplay;editForm;constructor(e,t,s){super(".chat-message-content-display"+(s.isEdited?".edited":"")),this.messageManager=e,this.message=s,this.append(this.contentDisplay=(0,r.el)("p",s.content)),r.ED.enhanceWithContextMenu(this,(e=>{new o.A(e.clientX,e.clientY,{messageManager:this.messageManager,author:t,messageId:s.id,onEdit:()=>this.startEditMode()})}))}editContent(e){this.contentDisplay.text=e,this.addClass("edited")}startEditMode(){this.addClass("editing"),this.editForm=new i.A(this.message.content??"",(e=>{this.messageManager.actions.onEdit(this.message.id,e),this.endEditMode()})).appendTo(this)}endEditMode(e=!0){this.removeClass("editing")}}n()}catch(e){n(e)}}))},28911:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>a});var r=s(75321),i=s(19906),o=e([r,i]);[r,i]=o.then?(await o)():o;class a extends r.vs{messageManager;messageGroup;children=[];constructor(e,t){super(".chat-message-content-display-group"),this.messageManager=e,this.messageGroup=t;for(const e of t.messages)this.addMessage(e)}addMessage(e){const t=new i.A(this.messageManager,this.messageGroup.author.id,e).appendTo(this).on("remove",(()=>{0===this.children.length&&this.remove()}));this.messageManager.setContentDisplay(e.id,t)}}n()}catch(e){n(e)}}))},49617:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>c});var r=s(75321),i=s(83501),o=s(41569),a=e([r,i,o]);[r,i,o]=a.then?(await a)():a;class c extends r.vs{input;submitButton;constructor(e,t){super(".chat-message-edit-form"),this.append((0,r.el)("form",this.input=new i.pd({placeholder:"Type a message...",value:e}),(0,r.el)(".actions",this.submitButton=new i.$n({type:i.VQ.Circle,icon:new o.A.SendMessageButtonIcon})),{onsubmit:e=>{e.preventDefault(),t(this.input.value),this.remove()}})),this.on("visible",(()=>this.input.focus())),0===e.trim().length&&this.submitButton.disable(),this.input.on("valueChanged",(e=>{e.trim().length>0?this.submitButton.enable():this.submitButton.disable()}))}}n()}catch(e){n(e)}}))},79677:(e,t,s)=>{s.a(e,(async(e,t)=>{try{var n=s(75321),r=s(83501),i=s(41569),o=e([n,r,i]);[n,r,i]=o.then?(await o)():o;n.vs;t()}catch(e){t(e)}}))},16675:(e,t,s)=>{s.a(e,(async(e,t)=>{try{var n=s(75321),r=s(22592),i=(s(89640),e([n,r]));[n,r]=i.then?(await i)():i;n.vs;t()}catch(e){t(e)}}))},22592:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>l});var r=s(75321),i=s(10499),o=s(47557),a=s(28911),c=e([r,i,o,a]);[r,i,o,a]=c.then?(await c)():c;class l extends r.vs{messageGroup;displayGroup;constructor(e,t){super("li.chat-message-list-item"),this.messageGroup=t,this.append((0,r.el)(".avatar",new i.A(t.author)),(0,r.el)("main",(0,r.el)(".author",new o.A(t.author)),this.displayGroup=new a.A(e,t))),this.displayGroup.on("remove",(()=>this.remove()))}get authorId(){return this.messageGroup.author.id}addMessage(e){this.displayGroup.addMessage(e)}}n()}catch(e){n(e)}}))},89640:(e,t,s)=>{s.d(t,{A:()=>n});class n{actions;contentDisplayMap=new Map;constructor(e){this.actions=e}setContentDisplay(e,t){this.contentDisplayMap.set(e,t),t.on("remove",(()=>this.contentDisplayMap.delete(e)))}editMessage(e,t){const s=this.contentDisplayMap.get(e);s?.editContent(t)}deleteMessage(e){const t=this.contentDisplayMap.get(e);t?.remove()}}},15984:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>a});var r=s(83501),i=s(41569),o=e([r,i]);[r,i]=o.then?(await o)():o;class a extends r.rI{options;constructor(e,t,s){super(".chat-message-menu",{left:e,top:t}),this.options=s,this.appendToMain(new r.I(new r._2({icon:new i.A.EditMenuIcon,label:"Edit",onClick:()=>{s.onEdit(),this.remove()}}),new r._2({icon:new i.A.DeleteMenuIcon,label:"Delete",onClick:()=>{this.deleteMessage(),this.remove()}})))}async deleteMessage(){await new r.TM({title:"Delete Message",message:"Are you sure you want to delete this message?"}).waitForConfirmation(),await this.options.messageManager.actions.onDelete(this.options.messageId)}}n()}catch(e){n(e)}}))},49083:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{$5:()=>c.A,mN:()=>o.A,vE:()=>a.A});var r=s(79677),i=s(16675),o=s(94063),a=s(41569),c=s(84521),l=e([r,i,o,a,c]);[r,i,o,a,c]=l.then?(await l)():l,n()}catch(e){n(e)}}))},94063:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>h});var r=s(75321),i=s(83501),o=s(41569),a=s(84521),c=s(85080),l=e([r,i,o,a,c]);[r,i,o,a,c]=l.then?(await l)():l;class h extends r.vs{loginManager;showName;constructor(e,t=!1){super(".logged-in-user-avatar-button"),this.loginManager=e,this.showName=t,this.render(),this.subscribe(e,"loginStatusChanged",(()=>this.render())),this.subscribe(a.A,"userUpdated",(e=>{this.loginManager.isLoggedIn&&e.id===this.loginManager.loggedInUser&&this.render()}))}async render(){if(this.loginManager.isLoggedIn)try{const e=await a.A.getUser(this.loginManager.loggedInUser);this.clear().append(new i.$n(".avatar",{icon:new o.A.Avatar(e),title:this.showName?(0,r.el)("span.name",e.name):void 0,onClick:(e,t)=>{t.stopPropagation(),new c.A(this.loginManager,e)}}))}catch(e){console.error(e),this.renderLoginButton()}else this.renderLoginButton()}renderLoginButton(){this.clear().append(new i.$n({type:i.VQ.Contained,title:"Log in",onClick:()=>o.A.login()}))}}n()}catch(e){n(e)}}))},85080:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>l});var r=s(75321),i=s(83501),o=s(41569),a=s(84521),c=e([r,i,o,a]);[r,i,o,a]=c.then?(await c)():c;class l extends i.rI{loginManager;constructor(e,t){const s=t.calculateRect();super(".logged-in-user-avatar-menu",{right:s.right,top:s.bottom+10}),this.loginManager=e,this.render()}async render(){const e=await a.A.getUser(this.loginManager.loggedInUser);this.appendToHeader((0,r.el)(".user-info",new o.A.Avatar(e),(0,r.el)(".user-details",(0,r.el)(".name",e.name),e.username?(0,r.el)(".username",e.username):void 0),{onclick:()=>{o.A.goLoggedInUserProfile(e),this.remove()}})),this.appendToMain(await o.A.getLoggedInUserMenu(this,e),new i.I(new i._2({icon:new o.A.LogoutIcon,label:"Log out",onClick:()=>{this.loginManager.logout(),this.remove()}})))}}n()}catch(e){n(e)}}))},10499:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>o});var r=s(41569),i=e([r]);r=(i.then?(await i)():i)[0];class o extends r.A.Avatar{constructor(e){super(e),this.onDom("click",(()=>r.A.showUserInfo(e)))}}n()}catch(e){n(e)}}))},84521:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>c});var r=s(4716),i=s(41569),o=e([i]);i=(o.then?(await o)():o)[0];class a extends r.QE{userCache=new Map;pendingRequests=new Map;setUser(e){this.userCache.set(e.id,e),this.emit("userUpdated",e)}async getUser(e){const t=this.userCache.get(e);if(t)return t;const s=this.pendingRequests.get(e);if(s)return s;const n=i.A.fetchUser(e);this.pendingRequests.set(e,n);try{const e=await n;return e&&this.setUser(e),e}finally{this.pendingRequests.delete(e)}}async getBulkUsers(e){const t=[...new Set(e)],s=new Map,n=t.filter((e=>{const t=this.userCache.get(e);return!t||(s.set(e,t),!1)}));if(n.length>0){(await i.A.fetchBulkUsers(n)).forEach((e=>{this.setUser(e),s.set(e.id,e)}))}return s}}const c=new a;n()}catch(e){n(e)}}))},47557:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>a});var r=s(75321),i=s(41569),o=e([r,i]);[r,i]=o.then?(await o)():o;class a extends r.vs{constructor(e){super("a.user-name-display"),this.text=e.name,this.onDom("click",(()=>i.A.showUserInfo(e)))}}n()}catch(e){n(e)}}))},4716:(e,t,s)=>{s.d(t,{QE:()=>n});class n{events={};on(e,t){return this.events[e]||(this.events[e]=[]),this.events[e].push(t),this}off(e,t){if(!this.events[e])return this;const s=this.events[e].indexOf(t);return-1!==s&&this.events[e].splice(s,1),this}emit(e,...t){return this.events[e]?this.events[e].map((e=>e(...t))):[]}}new class{pull(e,...t){for(const s of t){const t=e.indexOf(s);-1!==t&&e.splice(t,1)}}};new class{random(e,t){return Math.floor(Math.random()*(t-e+1)+e)}};new class{parseWithUndefined(e){return JSON.parse(e,((e,t)=>null===t?void 0:t))}};new class{isEqual(e,t){if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;const s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;for(const r of s)if(!n.includes(r)||!this.isEqual(e[r],t[r]))return!1;return!0}};new class{capitalize(e){return e.split(" ").map((e=>0===e.length?e:e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())).join(" ")}isKebabCase(e){return/^[a-z]+(-[a-z]+)*$/.test(e)}}},98528:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>a});var r=s(75321),i=s(45984),o=e([r]);r=(o.then?(await o)():o)[0];class a extends i.QE{store;constructor(e){super(),this.store=new r.il(e)}get token(){return this.store.get("token")}set token(e){e?this.store.setPermanent("token",e):this.store.remove("token"),this.emit("tokenChanged",e)}}n()}catch(e){n(e)}}))},40229:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>h});var r=s(75321),i=s(45984),o=s(49854),a=s(35827),c=s(83631),l=e([r]);r=(l.then?(await l)():l)[0];class h extends i.QE{supabaseUrl;supabaseKey;authTokenManager;client;store;sessionUser;constructor(e,t,s){super(),this.supabaseUrl=e,this.supabaseKey=t,this.authTokenManager=s;const n=new URL(e).hostname.split(".")[0];this.store=new r.il(`supabase-connector-${n}`),this.sessionUser=this.store.get("sessionUser"),this.reconnect(),s?.on("tokenChanged",(()=>this.reconnect())),this.client.auth.onAuthStateChange(((e,t)=>{const s=t?.user;i.BF.isEqual(s,this.sessionUser)||(s?(this.store.setPermanent("sessionUser",t.user),this.sessionUser=t.user,this.emit("sessionUserChanged",t.user)):(this.store.remove("sessionUser"),this.sessionUser&&(this.sessionUser=void 0,this.emit("sessionUserChanged",void 0))))}))}reconnect(){this.client?.removeAllChannels(),this.client=(0,o.UU)(this.supabaseUrl,this.supabaseKey,{auth:{autoRefreshToken:!0,persistSession:!0},...this.authTokenManager?.token?{global:{headers:{Authorization:`Bearer ${this.authTokenManager.token}`}}}:{}})}async signInWithOAuth(e,t){await this.client.auth.signInWithOAuth({provider:e,options:{scopes:t?.join(" "),redirectTo:window.location.origin}})}async signOut(){this.store.remove("sessionUser"),this.sessionUser=void 0,this.emit("sessionUserChanged",void 0),await this.client.auth.signOut()}get isSignedIn(){return!!this.sessionUser}get signedUserId(){return this.sessionUser?.id}async checkInvalidJwtError(e){if(this.authTokenManager&&e.context?.body)try{const t=new Response(e.context.body),s=await t.json();401===s.code&&"Invalid JWT"===s.message&&(this.authTokenManager.token=void 0)}catch(e){console.error("Error parsing response body",e)}}async callEdgeFunction(e,t){const{data:s,error:n}=await this.client.functions.invoke(e,{body:t});if(n)throw await this.checkInvalidJwtError(n),n;return c.A.safeResult(s)}async callDbFunction(e,t){const{data:s,error:n}=await this.client.rpc(e,t);if(n)throw await this.checkInvalidJwtError(n),n;return c.A.safeResult(s)}async safeFetch(e,t){const{data:s,error:n}=await t(this.client.from(e));if(n)throw await this.checkInvalidJwtError(n),n;return c.A.safeResult(s)}async safeFetchSingle(e,t){const{data:s,error:n}=await t(this.client.from(e)).limit(1);if(n)throw await this.checkInvalidJwtError(n),n;return s?.[0]?c.A.safeResult(s[0]):void 0}async safeStore(e,t){const{error:s}=await t(this.client.from(e));if(s)throw await this.checkInvalidJwtError(s),s}subscribeToDataChanges(e){return this.client.channel(e.channel).on("postgres_changes",{event:"*",schema:"public",table:e.table,filter:e.filter},(t=>{"INSERT"===t.eventType?e.onInsert?.(t.new):"UPDATE"===t.eventType?e.onUpdate?.(t.new):"DELETE"===t.eventType&&e.onDelete?.(t.old)}))}async uploadPublicFile(e,t,s){const n=s.name.split(".").pop(),r=`${t}/${`${(0,a.A)()}.${n}`}`,{error:i}=await this.client.storage.from(e).upload(r,s,{cacheControl:"31536000",contentType:s.type});if(i)throw await this.checkInvalidJwtError(i),i;const{data:{publicUrl:o}}=this.client.storage.from(e).getPublicUrl(r);return o}}n()}catch(e){n(e)}}))},88632:(e,t,s)=>{s.d(t,{A:()=>n});class n{table;defaultQuery;constructor(e,t){this.table=e,this.defaultQuery=t}_supabaseConnector;set supabaseConnector(e){this._supabaseConnector=e}get supabaseConnector(){if(!this._supabaseConnector)throw new Error("Supabase connector not set");return this._supabaseConnector}async fetch(e,t=this.defaultQuery){return await this.supabaseConnector.safeFetch(this.table,(s=>e(s.select(t))))}async fetchSingle(e,t=this.defaultQuery){return await this.supabaseConnector.safeFetchSingle(this.table,(s=>e(s.select(t))))}async insert(e,t=this.defaultQuery){return await this.supabaseConnector.safeFetchSingle(this.table,(s=>s.insert(e).select(t)))}async delete(e){return await this.supabaseConnector.safeStore(this.table,(t=>e(t.delete())))}}},83631:(e,t,s)=>{s.d(t,{A:()=>n});const n=new class{convertNullToUndefined(e){Object.keys(e).forEach((t=>{null===e[t]?e[t]=void 0:"object"==typeof e[t]&&null!==e[t]&&this.convertNullToUndefined(e[t])}))}safeResult(e){return Array.isArray(e)?e.forEach((e=>this.convertNullToUndefined(e))):"object"==typeof e&&this.convertNullToUndefined(e),e}}},9632:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{Jv:()=>r.A,OP:()=>i.A,r0:()=>o.A});var r=s(98528),i=s(40229),o=s(88632),a=e([r,i]);[r,i]=a.then?(await a)():a,n()}catch(e){n(e)}}))},33885:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>o});var r=s(83501),i=e([r]);r=(i.then?(await i)():i)[0];class o extends r.Ah{constructor(){super(".accordion-close","0 0 8 2",'<path fill="currentColor" fill-rule="evenodd" d="M0 1.5h8v-1H0v1Z" clip-rule="evenodd"></path>')}}n()}catch(e){n(e)}}))},67067:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>o});var r=s(83501),i=e([r]);r=(i.then?(await i)():i)[0];class o extends r.Ah{constructor(){super(".accordion-open","0 0 8 8",'<path fill="currentColor" fill-rule="evenodd" d="M4.5 4.5V8h-1V4.5H0v-1h3.5V0h1v3.5H8v1H4.5Z" clip-rule="evenodd"></path>')}}n()}catch(e){n(e)}}))},34165:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>o});var r=s(83501),i=e([r]);r=(i.then?(await i)():i)[0];class o extends r.Ah{constructor(){super(".calendar","0 -960 960 960",'<path d="M200-80q-33 0-56.5-23.5T120-160v-560q0-33 23.5-56.5T200-800h40v-80h80v80h320v-80h80v80h40q33 0 56.5 23.5T840-720v560q0 33-23.5 56.5T760-80H200Zm0-80h560v-400H200v400Zm0-480h560v-80H200v80Zm0 0v-80 80Z"/>')}}n()}catch(e){n(e)}}))},47469:(e,t,s)=>{s.a(e,(async(e,t)=>{try{var n=s(83501),r=e([n]);n=(r.then?(await r)():r)[0];n.Ah;t()}catch(e){t(e)}}))},35080:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>o});var r=s(83501),i=e([r]);r=(i.then?(await i)():i)[0];class o extends r.Ah{constructor(){super(".clear","0 -960 960 960",'<path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/>')}}n()}catch(e){n(e)}}))},59712:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>o});var r=s(83501),i=e([r]);r=(i.then?(await i)():i)[0];class o extends r.Ah{constructor(){super(".delete","0 -960 960 960",'<path d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"/>')}}n()}catch(e){n(e)}}))},75935:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>o});var r=s(83501),i=e([r]);r=(i.then?(await i)():i)[0];class o extends r.Ah{constructor(){super(".edit","0 -960 960 960",'<path d="M200-200h57l391-391-57-57-391 391v57Zm-80 80v-170l528-527q12-11 26.5-17t30.5-6q16 0 31 6t26 18l55 56q12 11 17.5 26t5.5 30q0 16-5.5 30.5T817-647L290-120H120Zm640-584-56-56 56 56Zm-141 85-28-29 57 57-29-28Z"/>')}}n()}catch(e){n(e)}}))},24895:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>o});var r=s(83501),i=e([r]);r=(i.then?(await i)():i)[0];class o extends r.Ah{constructor(){super(".error","0 -960 960 960",'<path d="M480-280q17 0 28.5-11.5T520-320q0-17-11.5-28.5T480-360q-17 0-28.5 11.5T440-320q0 17 11.5 28.5T480-280Zm-40-160h80v-240h-80v240Zm40 360q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/>')}}n()}catch(e){n(e)}}))},93808:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>o});var r=s(83501),i=e([r]);r=(i.then?(await i)():i)[0];class o extends r.Ah{constructor(){super(".image","0 -960 960 960",'<path d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Zm40-80h480L570-480 450-320l-90-120-120 160Zm-40 80v-560 560Z"/>')}}n()}catch(e){n(e)}}))},23963:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>o});var r=s(83501),i=e([r]);r=(i.then?(await i)():i)[0];class o extends r.Ah{constructor(){super(".info","0 -960 960 960",'<path d="M440-280h80v-240h-80v240Zm40-320q17 0 28.5-11.5T520-640q0-17-11.5-28.5T480-680q-17 0-28.5 11.5T440-640q0 17 11.5 28.5T480-600Zm0 520q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/>')}}n()}catch(e){n(e)}}))},13384:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>o});var r=s(83501),i=e([r]);r=(i.then?(await i)():i)[0];class o extends r.Ah{constructor(){super(".lock","0 -960 960 960",'<path d="M240-80q-33 0-56.5-23.5T160-160v-400q0-33 23.5-56.5T240-640h40v-80q0-83 58.5-141.5T480-920q83 0 141.5 58.5T680-720v80h40q33 0 56.5 23.5T800-560v400q0 33-23.5 56.5T720-80H240Zm0-80h480v-400H240v400Zm240-120q33 0 56.5-23.5T560-360q0-33-23.5-56.5T480-440q-33 0-56.5 23.5T400-360q0 33 23.5 56.5T480-280ZM360-640h240v-80q0-50-35-85t-85-35q-50 0-85 35t-35 85v80ZM240-160v-400 400Z"/>')}}n()}catch(e){n(e)}}))},65945:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>o});var r=s(83501),i=e([r]);r=(i.then?(await i)():i)[0];class o extends r.Ah{constructor(){super(".logout","0 -960 960 960",'<path d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h280v80H200v560h280v80H200Zm440-160-55-58 102-102H360v-80h327L585-622l55-58 200 200-200 200Z"/>')}}n()}catch(e){n(e)}}))},84817:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>o});var r=s(83501),i=e([r]);r=(i.then?(await i)():i)[0];class o extends r.Ah{constructor(){super(".nft","0 0 256 256",'<g transform="translate(1.4066 1.4066) scale(2.81)" stroke-linecap="round"><path d="m45 90c-1.206 0-2.412-0.311-3.488-0.931l-32.932-19.015c-2.152-1.241-3.488-3.556-3.488-6.04v-38.027c0-2.485 1.337-4.8 3.489-6.041l32.931-19.014c2.152-1.242 4.824-1.243 6.977 0l32.931 19.013c2.151 1.241 3.488 3.556 3.488 6.041v38.027c0 2.485-1.337 4.8-3.489 6.041l-32.931 19.014c-1.076 0.621-2.282 0.932-3.488 0.932zm0-84.002c-0.168 0-0.336 0.043-0.487 0.13l-32.933 19.014c-0.301 0.174-0.488 0.498-0.488 0.845v38.027c0 0.347 0.187 0.671 0.487 0.844l32.933 19.015c0.3 0.172 0.674 0.174 0.975 0l32.933-19.014c0.301-0.174 0.487-0.497 0.487-0.845v-38.027c0-0.348-0.187-0.671-0.486-0.844l-32.934-19.015c-0.15-0.087-0.319-0.13-0.487-0.13z"/><path d="m32.122 58.462c-1.019 0-1.992-0.521-2.549-1.418l-7.438-11.983v10.401c0 1.657-1.343 3-3 3s-3-1.343-3-3v-20.924c0-1.34 0.889-2.518 2.177-2.885 1.292-0.365 2.666 0.165 3.372 1.303l7.438 11.983v-10.401c0-1.657 1.343-3 3-3s3 1.343 3 3v20.924c0 1.34-0.889 2.518-2.177 2.885-0.273 0.078-0.55 0.115-0.823 0.115z"/><path d="m42.236 58.462c-1.657 0-3-1.343-3-3v-20.924c0-1.657 1.343-3 3-3h8.321c1.657 0 3 1.343 3 3s-1.343 3-3 3h-5.321v17.924c0 1.657-1.343 3-3 3z"/><path d="m50.557 48h-8.321c-1.657 0-3-1.343-3-3s1.343-3 3-3h8.321c1.657 0 3 1.343 3 3s-1.343 3-3 3z"/><path d="m70.865 37.538h-11.891c-1.657 0-3-1.343-3-3s1.343-3 3-3h11.891c1.657 0 3 1.343 3 3s-1.343 3-3 3z"/><path d="m64.919 58.462c-1.657 0-3-1.343-3-3v-20.924c0-1.657 1.343-3 3-3s3 1.343 3 3v20.924c0 1.657-1.342 3-3 3z"/></g>')}}n()}catch(e){n(e)}}))},4558:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>o});var r=s(83501),i=e([r]);r=(i.then?(await i)():i)[0];class o extends r.Ah{constructor(){super(".next","0 -960 960 960",'<path d="m321-80-71-71 329-329-329-329 71-71 400 400L321-80Z"/>')}}n()}catch(e){n(e)}}))},28658:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>o});var r=s(83501),i=e([r]);r=(i.then?(await i)():i)[0];class o extends r.Ah{constructor(){super(".open-in-new","-5 -5 20 20",'<path d="M1 9L9 1M9 1H2.5M9 1V7.22222" stroke="currentColor" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round"></path>')}}n()}catch(e){n(e)}}))},90492:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>o});var r=s(83501),i=e([r]);r=(i.then?(await i)():i)[0];class o extends r.Ah{constructor(){super(".profile","0 -960 960 960",'<path d="M480-480q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47ZM160-160v-112q0-34 17.5-62.5T224-378q62-31 126-46.5T480-440q66 0 130 15.5T736-378q29 15 46.5 43.5T800-272v112H160Zm80-80h480v-32q0-11-5.5-20T700-306q-54-27-109-40.5T480-360q-56 0-111 13.5T260-306q-9 5-14.5 14t-5.5 20v32Zm240-320q33 0 56.5-23.5T560-640q0-33-23.5-56.5T480-720q-33 0-56.5 23.5T400-640q0 33 23.5 56.5T480-560Zm0-80Zm0 400Z"/>')}}n()}catch(e){n(e)}}))},79410:(e,t,s)=>{s.a(e,(async(e,t)=>{try{var n=s(83501),r=e([n]);n=(r.then?(await r)():r)[0];n.Ah;t()}catch(e){t(e)}}))},91303:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>o});var r=s(83501),i=e([r]);r=(i.then?(await i)():i)[0];class o extends r.Ah{constructor(){super(".search","0 -960 960 960",'<path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"/>')}}n()}catch(e){n(e)}}))},6204:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{CT:()=>o.A,EZ:()=>i.A,IJ:()=>u.A,PH:()=>v.A,Pt:()=>m.A,WI:()=>_.A,XA:()=>p.A,aR:()=>r.A,d7:()=>l.A,i9:()=>w.A,mo:()=>f.A,n_:()=>y.A,o4:()=>g.A,qU:()=>h.A,vu:()=>c.A,xf:()=>d.A});var r=s(33885),i=s(67067),o=s(34165),a=s(47469),c=s(35080),l=s(59712),h=s(75935),u=s(24895),d=s(93808),f=s(23963),p=s(13384),g=s(65945),m=s(4558),w=s(84817),v=s(28658),y=s(90492),b=s(79410),_=s(91303),k=e([r,i,o,a,c,l,h,u,d,f,p,g,m,w,v,y,b,_]);[r,i,o,a,c,l,h,u,d,f,p,g,m,w,v,y,b,_]=k.then?(await k)():k,n()}catch(e){n(e)}}))},45984:(e,t,s)=>{s.d(t,{lv:()=>i,aq:()=>o,QE:()=>n,xt:()=>r,AF:()=>a,BF:()=>c,$x:()=>l});class n{events={};on(e,t){return this.events[e]||(this.events[e]=[]),this.events[e].push(t),this}off(e,t){if(!this.events[e])return this;const s=this.events[e].indexOf(t);return-1!==s&&this.events[e].splice(s,1),this}emit(e,...t){return this.events[e]?this.events[e].map((e=>e(...t))):[]}}class r extends n{parent;children=[];removed=!1;subscriptions=[];appendTo(e,t){if(this.removed)throw new Error("Node is removed");if(this.parent===e){const e=this.parent.children.indexOf(this);void 0!==t&&t>e&&t--,this.parent.children.splice(e,1)}else this.parent&&this.remove();return this.parent=e,void 0!==t&&t>=0&&t<e.children.length?e.children.splice(t,0,this):e.children.push(this),this}subscribe(e,t,s){return e.on(t,s),this.subscriptions.push({container:e,eventName:t,handler:s}),this}unsubscribeFromAll(){for(const e of this.subscriptions)e.container.off(e.eventName,e.handler);this.subscriptions=[]}clear(...e){let t=0;for(;this.children.length>e.length;){const s=this.children[t];e.includes(s)?t++:s.remove()}return this}remove(){if(!this.removed){if(this.removed=!0,this.unsubscribeFromAll(),this.parent){const e=this.parent.children.indexOf(this);e>-1&&this.parent.children.splice(e,1),this.parent=void 0}this.clear()}}}const i=new class{pull(e,...t){for(const s of t){const t=e.indexOf(s);-1!==t&&e.splice(t,1)}}};class o{delayMs;callback;timeoutId=null;constructor(e,t){if(this.delayMs=e,this.callback=t,e<0)throw new Error("Delay must be a non-negative number")}execute(...e){this.clearPendingExecution(),this.timeoutId=setTimeout((()=>{this.callback(...e),this.timeoutId=null}),this.delayMs)}cancel(){this.clearPendingExecution()}isPending(){return null!==this.timeoutId}clearPendingExecution(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}}new class{random(e,t){return Math.floor(Math.random()*(t-e+1)+e)}};const a=new class{parseWithUndefined(e){return JSON.parse(e,((e,t)=>null===t?void 0:t))}};const c=new class{isEqual(e,t){if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;const s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;for(const r of s)if(!n.includes(r)||!this.isEqual(e[r],t[r]))return!1;return!0}};const l=new class{capitalize(e){return e.split(" ").map((e=>0===e.length?e:e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())).join(" ")}isKebabCase(e){return/^[a-z]+(-[a-z]+)*$/.test(e)}formatNumberWithCommas(e,t){if(void 0===t||+ +e>Number.MAX_SAFE_INTEGER){const t=e.split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),"0"===t[1]?t[0]:t.join(".")}{const s=String(+(+e).toFixed(t)).split(".");return s[0]=s[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),s.join(".")}}}},54676:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>h});var r=s(83501),i=s(82787),o=s(49083),a=s(6204),c=e([r,i,o,a]);[r,i,o,a]=c.then?(await c)():c;class l{init(){r.JG.LoadingSpinner=i.j,r.JG.InfoIcon=a.mo,r.JG.ErrorIcon=a.IJ,r.JG.AccordionOpenIcon=a.EZ,r.JG.AccordionCloseIcon=a.aR,o.vE.LogoutIcon=a.o4}}const h=new l;n()}catch(e){n(e)}}))},63871:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{S:()=>r.A});var r=s(54676),i=e([r]);r=(i.then?(await i)():i)[0],n()}catch(e){n(e)}}))},69280:(e,t,s)=>{function n(e,...t){return n.impl(e,...t)}function r(e){return r.impl(e)}s.d(t,{el:()=>n,q:()=>r}),n.impl=(e,...t)=>{throw new Error("Not implemented")},r.impl=e=>{throw new Error("Not implemented")}},29393:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>a});var r=s(28393),i=e([r]);r=(i.then?(await i)():i)[0];class o{messageForWalletLogin="Login with Crypto Wallet";executeAfterLogin=async e=>{};_supabaesConnector;get supabaseConnector(){if(!this._supabaesConnector)throw new Error("Supabase connector not set");return this._supabaesConnector}set supabaseConnector(e){this._supabaesConnector=e}init(e){this.supabaseConnector=e.supabaseConnector,r.yT.init(e)}}const a=new o;n()}catch(e){n(e)}}))},50716:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>l});var r=s(35456),i=s(28393),o=s(53523),a=e([r,i,o]);[r,i,o]=a.then?(await a)():a;class c extends r.Jv{get loggedInWallet(){return this.store.get("loggedInWallet")}get loggedInAddress(){return this.store.get("loggedInAddress")}get loggedInUser(){return this.loggedInAddress}get isLoggedIn(){return!!this.token&&!!this.loggedInWallet&&!!this.loggedInAddress}constructor(){super("wallet-login-manager")}init(){i.Rx.init()}async login(){const{walletId:e,walletAddress:t,token:s}=await(new o.A).waitForLogin();return this.token=s,this.store.setPermanent("loggedInWallet",e),this.store.setPermanent("loggedInAddress",t),this.emit("loginStatusChanged",this.isLoggedIn),t}logout(){i.Rx.disconnect(),this.token=void 0,this.store.remove("loggedInWallet"),this.store.remove("loggedInAddress"),this.emit("loginStatusChanged",this.isLoggedIn)}}const l=new c;n()}catch(e){n(e)}}))},53523:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>h});var r=s(75321),i=s(83501),o=s(28393),a=s(45670),c=s(29393),l=e([r,i,o,c]);[r,i,o,c]=l.then?(await l)():l;class h extends i.h9{resolveLogin;rejectLogin;constructor(){super(".wallet-login-modal",!1),this.appendToHeader((0,r.el)("h1","Login with Crypto Wallet")),this.appendToMain(new i.e2(new i.$n({type:i.VQ.Outlined,icon:new o.VM,title:"Login with MetaMask",onClick:()=>this.handleLogin(o.jC)}),new i.$n({type:i.VQ.Outlined,icon:new o.Ry,title:"Login with Coinbase Wallet",onClick:()=>this.handleLogin(o.rS)}),new i.$n({type:i.VQ.Outlined,icon:new o.JV,title:"Login with WalletConnect",onClick:()=>this.handleLogin(o.FK)}))),this.appendToFooter(new i.$n(".cancel",{title:"Cancel",onClick:()=>this.remove()})),this.on("remove",(()=>this.rejectLogin?.(new Error("Login canceled by user"))))}async handleLogin(e){const t=(await e.connect()).accounts[0];if(!t)throw new Error("No accounts found");const{nonce:s,issuedAt:n}=await c.A.supabaseConnector.callEdgeFunction("generate-wallet-login-nonce",{walletAddress:t,domain:window.location.host,uri:window.location.origin});await new i.TM(".sign-message",{title:"Sign Message",message:["To complete the login process, please sign the message in your wallet. This signature verifies your ownership of the wallet address.",new i.Z0("No gas fees will be charged for this signature request.")],confirmButtonTitle:"Sign Message"}).waitForConfirmation();const r=(0,a.o)({domain:window.location.host,address:t,statement:c.A.messageForWalletLogin,uri:window.location.origin,version:"1",chainId:1,nonce:s,issuedAt:new Date(n)}),o=await e.signMessage(t,r),l=await c.A.supabaseConnector.callEdgeFunction("wallet-login",{walletAddress:t,signedMessage:o});await c.A.executeAfterLogin(l),this.resolveLogin?.({walletId:e.walletId,walletAddress:t,token:l}),this.rejectLogin=void 0,this.remove()}async waitForLogin(){return new Promise(((e,t)=>{this.resolveLogin=e,this.rejectLogin=t}))}}n()}catch(e){n(e)}}))},3041:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>i.A,r:()=>r.A});var r=s(29393),i=s(50716),o=e([r,i]);[r,i]=o.then?(await o)():o,n()}catch(e){n(e)}}))},2656:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>a});var r=s(75321),i=s(87782),o=e([r]);r=(o.then?(await o)():o)[0];class a extends i.QE{store;constructor(e){super(),this.store=new r.il(e)}get token(){return this.store.get("token")}set token(e){e?this.store.setPermanent("token",e):this.store.remove("token"),this.emit("tokenChanged",e)}}n()}catch(e){n(e)}}))},61893:(e,t,s)=>{s.a(e,(async(e,t)=>{try{var n=s(75321),r=s(87782),i=(s(47339),s(1920),s(10703),e([n]));n=(i.then?(await i)():i)[0];r.QE;t()}catch(e){t(e)}}))},10703:(e,t,s)=>{s.d(t,{A:()=>n});const n=new class{convertNullToUndefined(e){Object.keys(e).forEach((t=>{null===e[t]?e[t]=void 0:"object"==typeof e[t]&&null!==e[t]&&this.convertNullToUndefined(e[t])}))}safeResult(e){return Array.isArray(e)?e.forEach((e=>this.convertNullToUndefined(e))):"object"==typeof e&&this.convertNullToUndefined(e),e}}},35456:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{Jv:()=>r.A});var r=s(2656),i=s(61893),o=e([r,i]);[r,i]=o.then?(await o)():o,n()}catch(e){n(e)}}))},87782:(e,t,s)=>{s.d(t,{QE:()=>n,BF:()=>r});class n{events={};on(e,t){return this.events[e]||(this.events[e]=[]),this.events[e].push(t),this}off(e,t){if(!this.events[e])return this;const s=this.events[e].indexOf(t);return-1!==s&&this.events[e].splice(s,1),this}emit(e,...t){return this.events[e]?this.events[e].map((e=>e(...t))):[]}}new class{pull(e,...t){for(const s of t){const t=e.indexOf(s);-1!==t&&e.splice(t,1)}}};new class{random(e,t){return Math.floor(Math.random()*(t-e+1)+e)}};new class{parseWithUndefined(e){return JSON.parse(e,((e,t)=>null===t?void 0:t))}};const r=new class{isEqual(e,t){if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;const s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;for(const r of s)if(!n.includes(r)||!this.isEqual(e[r],t[r]))return!1;return!0}};new class{capitalize(e){return e.split(" ").map((e=>0===e.length?e:e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())).join(" ")}isKebabCase(e){return/^[a-z]+(-[a-z]+)*$/.test(e)}}},45670:(e,t,s)=>{s.d(t,{o:()=>fe});const n="2.21.47";let r={getDocsUrl:({docsBaseUrl:e,docsPath:t="",docsSlug:s})=>t?`${e??"https://viem.sh"}${t}${s?`#${s}`:""}`:void 0,version:`viem@${n}`};class i extends Error{constructor(e,t={}){const s=t.cause instanceof i?t.cause.details:t.cause?.message?t.cause.message:t.details,o=t.cause instanceof i&&t.cause.docsPath||t.docsPath,a=r.getDocsUrl?.({...t,docsPath:o});super([e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...a?[`Docs: ${a}`]:[],...s?[`Details: ${s}`]:[],...r.version?[`Version: ${r.version}`]:[]].join("\n"),t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=s,this.docsPath=o,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=n}walk(e){return o(this,e)}}function o(e,t){return t?.(e)?e:e&&"object"==typeof e&&"cause"in e&&void 0!==e.cause?o(e.cause,t):t?null:e}class a extends i{constructor(e){const{docsPath:t,field:s,metaMessages:n}=e;super(`Invalid Sign-In with Ethereum message field "${s}".`,{docsPath:t,metaMessages:n,name:"SiweInvalidMessageFieldError"})}}class c extends i{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}function l(e,{strict:t=!0}={}){return!!e&&("string"==typeof e&&(t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")))}class h extends i{constructor({size:e,targetSize:t,type:s}){super(`${s.charAt(0).toUpperCase()}${s.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}}function u(e,{dir:t,size:s=32}={}){return"string"==typeof e?function(e,{dir:t,size:s=32}={}){if(null===s)return e;const n=e.replace("0x","");if(n.length>2*s)throw new h({size:Math.ceil(n.length/2),targetSize:s,type:"hex"});return`0x${n["right"===t?"padEnd":"padStart"](2*s,"0")}`}(e,{dir:t,size:s}):function(e,{dir:t,size:s=32}={}){if(null===s)return e;if(e.length>s)throw new h({size:e.length,targetSize:s,type:"bytes"});const n=new Uint8Array(s);for(let r=0;r<s;r++){const i="right"===t;n[i?r:s-r-1]=e[i?r:e.length-r-1]}return n}(e,{dir:t,size:s})}class d extends i{constructor({max:e,min:t,signed:s,size:n,value:r}){super(`Number "${r}" is not in safe ${n?`${8*n}-bit ${s?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}}class f extends i{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function p(e){return l(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}function g(e,{size:t}){if(p(e)>t)throw new f({givenSize:p(e),maxSize:t})}const m=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function w(e,t={}){return"number"==typeof e||"bigint"==typeof e?y(e,t):"string"==typeof e?function(e,t={}){const s=b.encode(e);return v(s,t)}(e,t):"boolean"==typeof e?function(e,t={}){const s=`0x${Number(e)}`;if("number"==typeof t.size)return g(s,{size:t.size}),u(s,{size:t.size});return s}(e,t):v(e,t)}function v(e,t={}){let s="";for(let t=0;t<e.length;t++)s+=m[e[t]];const n=`0x${s}`;return"number"==typeof t.size?(g(n,{size:t.size}),u(n,{dir:"right",size:t.size})):n}function y(e,t={}){const{signed:s,size:n}=t,r=BigInt(e);let i;n?i=s?(1n<<8n*BigInt(n)-1n)-1n:2n**(8n*BigInt(n))-1n:"number"==typeof e&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o="bigint"==typeof i&&s?-i-1n:0;if(i&&r>i||r<o){const t="bigint"==typeof e?"n":"";throw new d({max:i?`${i}${t}`:void 0,min:`${o}${t}`,signed:s,size:n,value:`${e}${t}`})}const a=`0x${(s&&r<0?(1n<<BigInt(8*n))+BigInt(r):r).toString(16)}`;return n?u(a,{size:n}):a}const b=new TextEncoder;const _=new TextEncoder;function k(e,t={}){return"number"==typeof e||"bigint"==typeof e?function(e,t){const s=y(e,t);return A(s)}(e,t):"boolean"==typeof e?function(e,t={}){const s=new Uint8Array(1);if(s[0]=Number(e),"number"==typeof t.size)return g(s,{size:t.size}),u(s,{size:t.size});return s}(e,t):l(e)?A(e,t):S(e,t)}const C={zero:48,nine:57,A:65,F:70,a:97,f:102};function x(e){return e>=C.zero&&e<=C.nine?e-C.zero:e>=C.A&&e<=C.F?e-(C.A-10):e>=C.a&&e<=C.f?e-(C.a-10):void 0}function A(e,t={}){let s=e;t.size&&(g(s,{size:t.size}),s=u(s,{dir:"right",size:t.size}));let n=s.slice(2);n.length%2&&(n=`0${n}`);const r=n.length/2,o=new Uint8Array(r);for(let e=0,t=0;e<r;e++){const s=x(n.charCodeAt(t++)),r=x(n.charCodeAt(t++));if(void 0===s||void 0===r)throw new i(`Invalid byte sequence ("${n[t-2]}${n[t-1]}" in "${n}").`);o[e]=16*s+r}return o}function S(e,t={}){const s=_.encode(e);return"number"==typeof t.size?(g(s,{size:t.size}),u(s,{dir:"right",size:t.size})):s}function E(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function T(e,...t){if(!((s=e)instanceof Uint8Array||null!=s&&"object"==typeof s&&"Uint8Array"===s.constructor.name))throw new Error("Uint8Array expected");var s;if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function I(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function P(e,t){T(e);const s=t.outputLen;if(e.length<s)throw new Error(`digestInto() expects output buffer of length at least ${s}`)}const $=BigInt(2**32-1),j=BigInt(32);function O(e,t=!1){return t?{h:Number(e&$),l:Number(e>>j&$)}:{h:0|Number(e>>j&$),l:0|Number(e&$)}}function L(e,t=!1){let s=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let r=0;r<e.length;r++){const{h:i,l:o}=O(e[r],t);[s[r],n[r]]=[i,o]}return[s,n]}const U=(e,t,s)=>e<<s|t>>>32-s,R=(e,t,s)=>t<<s|e>>>32-s,M=(e,t,s)=>t<<s-32|e>>>64-s,N=(e,t,s)=>e<<s-32|t>>>64-s;const D=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],z=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255;function F(e){for(let t=0;t<e.length;t++)e[t]=z(e[t])}function B(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),T(e),e}class q{clone(){return this._cloneInto()}}const G=[],H=[],J=[],V=BigInt(0),K=BigInt(1),W=BigInt(2),Z=BigInt(7),X=BigInt(256),Q=BigInt(113);for(let e=0,t=K,s=1,n=0;e<24;e++){[s,n]=[n,(2*s+3*n)%5],G.push(2*(5*n+s)),H.push((e+1)*(e+2)/2%64);let r=V;for(let e=0;e<7;e++)t=(t<<K^(t>>Z)*Q)%X,t&W&&(r^=K<<(K<<BigInt(e))-K);J.push(r)}const[Y,ee]=L(J,!0),te=(e,t,s)=>s>32?M(e,t,s):U(e,t,s),se=(e,t,s)=>s>32?N(e,t,s):R(e,t,s);class ne extends q{constructor(e,t,s,n=!1,r=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=s,this.enableXOF=n,this.rounds=r,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,E(s),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var i;this.state=new Uint8Array(200),this.state32=(i=this.state,new Uint32Array(i.buffer,i.byteOffset,Math.floor(i.byteLength/4)))}keccak(){D||F(this.state32),function(e,t=24){const s=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)s[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const n=(t+8)%10,r=(t+2)%10,i=s[r],o=s[r+1],a=te(i,o,1)^s[n],c=se(i,o,1)^s[n+1];for(let s=0;s<50;s+=10)e[t+s]^=a,e[t+s+1]^=c}let t=e[2],r=e[3];for(let s=0;s<24;s++){const n=H[s],i=te(t,r,n),o=se(t,r,n),a=G[s];t=e[a],r=e[a+1],e[a]=i,e[a+1]=o}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)s[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~s[(n+2)%10]&s[(n+4)%10]}e[0]^=Y[n],e[1]^=ee[n]}s.fill(0)}(this.state32,this.rounds),D||F(this.state32),this.posOut=0,this.pos=0}update(e){I(this);const{blockLen:t,state:s}=this,n=(e=B(e)).length;for(let r=0;r<n;){const i=Math.min(t-this.pos,n-r);for(let t=0;t<i;t++)s[this.pos++]^=e[r++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:s,blockLen:n}=this;e[s]^=t,128&t&&s===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){I(this,!1),T(e),this.finish();const t=this.state,{blockLen:s}=this;for(let n=0,r=e.length;n<r;){this.posOut>=s&&this.keccak();const i=Math.min(s-this.posOut,r-n);e.set(t.subarray(this.posOut,this.posOut+i),n),this.posOut+=i,n+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return E(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(P(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:s,outputLen:n,rounds:r,enableXOF:i}=this;return e||(e=new ne(t,s,n,i,r)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=r,e.suffix=s,e.outputLen=n,e.enableXOF=i,e.destroyed=this.destroyed,e}}const re=(e,t,s)=>function(e){const t=t=>e().update(B(t)).digest(),s=e();return t.outputLen=s.outputLen,t.blockLen=s.blockLen,t.create=()=>e(),t}((()=>new ne(t,e,s))),ie=re(1,136,32);class oe extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&void 0!==t&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const e=this.keys().next().value;e&&this.delete(e)}return this}}const ae=/^0x[a-fA-F0-9]{40}$/,ce=new oe(8192);const le=new oe(8192);function he(e,t){if(le.has(`${e}.${t}`))return le.get(`${e}.${t}`);const s=t?`${t}${e.toLowerCase()}`:e.substring(2).toLowerCase(),n=function(e,t){const s=t||"hex",n=ie(l(e,{strict:!1})?k(e):e);return"bytes"===s?n:w(n)}(S(s),"bytes"),r=(t?s.substring(`${t}0x`.length):s).split("");for(let e=0;e<40;e+=2)n[e>>1]>>4>=8&&r[e]&&(r[e]=r[e].toUpperCase()),(15&n[e>>1])>=8&&r[e+1]&&(r[e+1]=r[e+1].toUpperCase());const i=`0x${r.join("")}`;return le.set(`${e}.${t}`,i),i}function ue(e,t){if(!function(e,t){const{strict:s=!0}=t??{},n=`${e}.${s}`;if(ce.has(n))return ce.get(n);const r=!(!ae.test(e)||e.toLowerCase()!==e&&s&&he(e)!==e);return ce.set(n,r),r}(e,{strict:!1}))throw new c({address:e});return he(e,t)}function de(e){if(/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(e))return!1;if(/%[^0-9a-f]/i.test(e))return!1;if(/%[0-9a-f](:?[^0-9a-f]|$)/i.test(e))return!1;const t=function(e){return e.match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/)}(e),s=t[1],n=t[2],r=t[3],i=t[4],o=t[5];if(!(s?.length&&r.length>=0))return!1;if(n?.length){if(0!==r.length&&!/^\//.test(r))return!1}else if(/^\/\//.test(r))return!1;if(!/^[a-z][a-z0-9\+\-\.]*$/.test(s.toLowerCase()))return!1;let a="";return a+=`${s}:`,n?.length&&(a+=`//${n}`),a+=r,i?.length&&(a+=`?${i}`),o?.length&&(a+=`#${o}`),a}function fe(e){const{chainId:t,domain:s,expirationTime:n,issuedAt:r=new Date,nonce:i,notBefore:o,requestId:c,resources:l,scheme:h,uri:u,version:d}=e;{if(t!==Math.floor(t))throw new a({field:"chainId",metaMessages:["- Chain ID must be a EIP-155 chain ID.","- See https://eips.ethereum.org/EIPS/eip-155","",`Provided value: ${t}`]});if(!(pe.test(s)||ge.test(s)||me.test(s)))throw new a({field:"domain",metaMessages:["- Domain must be an RFC 3986 authority.","- See https://www.rfc-editor.org/rfc/rfc3986","",`Provided value: ${s}`]});if(!we.test(i))throw new a({field:"nonce",metaMessages:["- Nonce must be at least 8 characters.","- Nonce must be alphanumeric.","",`Provided value: ${i}`]});if(!de(u))throw new a({field:"uri",metaMessages:["- URI must be a RFC 3986 URI referring to the resource that is the subject of the signing.","- See https://www.rfc-editor.org/rfc/rfc3986","",`Provided value: ${u}`]});if("1"!==d)throw new a({field:"version",metaMessages:["- Version must be '1'.","",`Provided value: ${d}`]});if(h&&!ve.test(h))throw new a({field:"scheme",metaMessages:["- Scheme must be an RFC 3986 URI scheme.","- See https://www.rfc-editor.org/rfc/rfc3986#section-3.1","",`Provided value: ${h}`]});const n=e.statement;if(n?.includes("\n"))throw new a({field:"statement",metaMessages:["- Statement must not include '\\n'.","",`Provided value: ${n}`]})}const f=ue(e.address),p=`${h?`${h}://${s}`:s} wants you to sign in with your Ethereum account:\n${f}\n\n${e.statement?`${e.statement}\n`:""}`;let g=`URI: ${u}\nVersion: ${d}\nChain ID: ${t}\nNonce: ${i}\nIssued At: ${r.toISOString()}`;if(n&&(g+=`\nExpiration Time: ${n.toISOString()}`),o&&(g+=`\nNot Before: ${o.toISOString()}`),c&&(g+=`\nRequest ID: ${c}`),l){let e="\nResources:";for(const t of l){if(!de(t))throw new a({field:"resources",metaMessages:["- Every resource must be a RFC 3986 URI.","- See https://www.rfc-editor.org/rfc/rfc3986","",`Provided value: ${t}`]});e+=`\n- ${t}`}g+=e}return`${p}\n${g}`}const pe=/^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}(:[0-9]{1,5})?$/,ge=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(:[0-9]{1,5})?$/,me=/^localhost(:[0-9]{1,5})?$/,we=/^[a-zA-Z0-9]{8,}$/,ve=/^([a-zA-Z][a-zA-Z0-9+-.]*)$/},17747:(e,t,s)=>{function n(){const e=new Set;let t=[];const s=()=>function(e){if("undefined"==typeof window)return;const t=t=>e(t.detail);return window.addEventListener("eip6963:announceProvider",t),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",t)}((s=>{t.some((({info:e})=>e.uuid===s.info.uuid))||(t=[...t,s],e.forEach((e=>e(t,{added:[s]}))))}));let n=s();return{_listeners:()=>e,clear(){e.forEach((e=>e([],{removed:[...t]}))),t=[]},destroy(){this.clear(),e.clear(),n?.()},findProvider:({rdns:e})=>t.find((t=>t.info.rdns===e)),getProviders:()=>t,reset(){this.clear(),n?.(),n=s()},subscribe:(s,{emitImmediately:n}={})=>(e.add(s),n&&s(t,{added:t}),()=>e.delete(s))}}s.d(t,{A:()=>W});var r=s(81417);const i=e=>(t,s,n)=>{const r=n.subscribe;n.subscribe=(e,t,s)=>{let i=e;if(t){const r=(null==s?void 0:s.equalityFn)||Object.is;let o=e(n.getState());i=s=>{const n=e(s);if(!r(o,n)){const e=o;t(o=n,e)}},(null==s?void 0:s.fireImmediately)&&t(o,o)}return r(i)};return e(t,s,n)};function o(e,t){let s;try{s=e()}catch(e){return}return{getItem:e=>{var n;const r=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),i=null!=(n=s.getItem(e))?n:null;return i instanceof Promise?i.then(r):r(i)},setItem:(e,n)=>s.setItem(e,JSON.stringify(n,null==t?void 0:t.replacer)),removeItem:e=>s.removeItem(e)}}const a=e=>t=>{try{const s=e(t);return s instanceof Promise?s:{then:e=>a(e)(s),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>a(t)(e)}}},c=(e,t)=>(s,n,r)=>{let i={storage:o((()=>localStorage)),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},c=!1;const l=new Set,h=new Set;let u=i.storage;if(!u)return e(((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),s(...e)}),n,r);const d=()=>{const e=i.partialize({...n()});return u.setItem(i.name,{state:e,version:i.version})},f=r.setState;r.setState=(e,t)=>{f(e,t),d()};const p=e(((...e)=>{s(...e),d()}),n,r);let g;r.getInitialState=()=>p;const m=()=>{var e,t;if(!u)return;c=!1,l.forEach((e=>{var t;return e(null!=(t=n())?t:p)}));const r=(null==(t=i.onRehydrateStorage)?void 0:t.call(i,null!=(e=n())?e:p))||void 0;return a(u.getItem.bind(u))(i.name).then((e=>{if(e){if("number"!=typeof e.version||e.version===i.version)return[!1,e.state];if(i.migrate)return[!0,i.migrate(e.state,e.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]})).then((e=>{var t;const[r,o]=e;if(g=i.merge(o,null!=(t=n())?t:p),s(g,!0),r)return d()})).then((()=>{null==r||r(g,void 0),g=n(),c=!0,h.forEach((e=>e(g)))})).catch((e=>{null==r||r(void 0,e)}))};return r.persist={setOptions:e=>{i={...i,...e},e.storage&&(u=e.storage)},clearStorage:()=>{null==u||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>m(),hasHydrated:()=>c,onHydrate:e=>(l.add(e),()=>{l.delete(e)}),onFinishHydration:e=>(h.add(e),()=>{h.delete(e)})},i.skipHydration||m(),g||p},l=e=>{let t;const s=new Set,n=(e,n)=>{const r="function"==typeof e?e(t):e;if(!Object.is(r,t)){const e=t;t=(null!=n?n:"object"!=typeof r||null===r)?r:Object.assign({},t,r),s.forEach((s=>s(t,e)))}},r=()=>t,i={setState:n,getState:r,getInitialState:()=>o,subscribe:e=>(s.add(e),()=>s.delete(e))},o=t=e(n,r,i);return i},h=e=>e?l(e):l;var u=s(47350),d=s(33604),f=s(86756),p=s(36399),g=s(53661),m=s(4679),w=s(74930),v=s(74237);const y=/(rabby|trustwallet)/;function b(e={}){const{shimDisconnect:t=!0,unstable_shimAsyncInject:s}=e;function n(){const t=e.target;if("function"==typeof t){const e=t();if(e)return e}return"object"==typeof t?t:"string"==typeof t?{..._[t]??{id:t,name:`${t[0].toUpperCase()}${t.slice(1)}`,provider:`is${t[0].toUpperCase()}${t.slice(1)}`}}:{id:"injected",name:"Injected",provider:e=>e?.ethereum}}let r,i,o,a;return(0,v.U)((c=>({get icon(){return n().icon},get id(){return n().id},get name(){return n().name},get supportsSimulation(){return y.test(this.id.toLowerCase())},type:b.type,async setup(){const t=await this.getProvider();t?.on&&e.target&&(o||(o=this.onConnect.bind(this),t.on("connect",o)),r||(r=this.onAccountsChanged.bind(this),t.on("accountsChanged",r)))},async connect({chainId:s,isReconnecting:n}={}){const l=await this.getProvider();if(!l)throw new w.N;let h=[];if(n)h=await this.getAccounts().catch((()=>[]));else if(t)try{const e=await l.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]});if(h=e[0]?.caveats?.[0]?.value?.map((e=>(0,u.b)(e))),h.length>0){h=await this.getAccounts()}}catch(e){const t=e;if(t.code===d.vx.code)throw new d.vx(t);if(t.code===d.qZ.code)throw t}try{if(!h?.length&&!n){h=(await l.request({method:"eth_requestAccounts"})).map((e=>(0,u.b)(e)))}o&&(l.removeListener("connect",o),o=void 0),r||(r=this.onAccountsChanged.bind(this),l.on("accountsChanged",r)),i||(i=this.onChainChanged.bind(this),l.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),l.on("disconnect",a));let f=await this.getChainId();if(s&&f!==s){const e=await this.switchChain({chainId:s}).catch((e=>{if(e.code===d.vx.code)throw e;return{id:f}}));f=e?.id??f}return t&&await(c.storage?.removeItem(`${this.id}.disconnected`)),e.target||await(c.storage?.setItem("injected.connected",!0)),{accounts:h,chainId:f}}catch(e){const t=e;if(t.code===d.vx.code)throw new d.vx(t);if(t.code===d.qZ.code)throw new d.qZ(t);throw t}},async disconnect(){const s=await this.getProvider();if(!s)throw new w.N;i&&(s.removeListener("chainChanged",i),i=void 0),a&&(s.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),s.on("connect",o));try{await(0,f.w)((()=>s.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]})),{timeout:100})}catch{}t&&await(c.storage?.setItem(`${this.id}.disconnected`,!0)),e.target||await(c.storage?.removeItem("injected.connected"))},async getAccounts(){const e=await this.getProvider();if(!e)throw new w.N;return(await e.request({method:"eth_accounts"})).map((e=>(0,u.b)(e)))},async getChainId(){const e=await this.getProvider();if(!e)throw new w.N;const t=await e.request({method:"eth_chainId"});return Number(t)},async getProvider(){if("undefined"==typeof window)return;let e;const t=n();return e="function"==typeof t.provider?t.provider(window):"string"==typeof t.provider?k(window,t.provider):t.provider,e&&!e.removeListener&&("off"in e&&"function"==typeof e.off?e.removeListener=e.off:e.removeListener=()=>{}),e},async isAuthorized(){try{if(t&&await(c.storage?.getItem(`${this.id}.disconnected`)))return!1;if(!e.target){if(!await(c.storage?.getItem("injected.connected")))return!1}if(!await this.getProvider()){if(void 0!==s&&!1!==s){const e=async()=>{"undefined"!=typeof window&&window.removeEventListener("ethereum#initialized",e);return!!await this.getProvider()},t="number"==typeof s?s:1e3;if(await Promise.race([..."undefined"!=typeof window?[new Promise((t=>window.addEventListener("ethereum#initialized",(()=>t(e())),{once:!0})))]:[],new Promise((s=>setTimeout((()=>s(e())),t)))]))return!0}throw new w.N}return!!(await(0,p.b)((()=>this.getAccounts()))).length}catch{return!1}},async switchChain({addEthereumChainParameter:e,chainId:t}){const s=await this.getProvider();if(!s)throw new w.N;const n=c.chains.find((e=>e.id===t));if(!n)throw new d.ch(new m.nk);const r=new Promise((e=>{const s=n=>{"chainId"in n&&n.chainId===t&&(c.emitter.off("change",s),e())};c.emitter.on("change",s)}));try{return await Promise.all([s.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,g.cK)(t)}]}).then((async()=>{await this.getChainId()===t&&c.emitter.emit("change",{chainId:t})})),r]),n}catch(i){const o=i;if(4902===o.code||4902===o?.data?.originalError?.code)try{const{default:i,...o}=n.blockExplorers??{};let a,l;e?.blockExplorerUrls?a=e.blockExplorerUrls:i&&(a=[i.url,...Object.values(o).map((e=>e.url))]),l=e?.rpcUrls?.length?e.rpcUrls:[n.rpcUrls.default?.http[0]??""];const h={blockExplorerUrls:a,chainId:(0,g.cK)(t),chainName:e?.chainName??n.name,iconUrls:e?.iconUrls,nativeCurrency:e?.nativeCurrency??n.nativeCurrency,rpcUrls:l};return await Promise.all([s.request({method:"wallet_addEthereumChain",params:[h]}).then((async()=>{if(await this.getChainId()!==t)throw new d.vx(new Error("User rejected switch after adding network."));c.emitter.emit("change",{chainId:t})})),r]),n}catch(e){throw new d.vx(e)}if(o.code===d.vx.code)throw new d.vx(o);throw new d.ch(o)}},async onAccountsChanged(e){if(0===e.length)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const e=(await this.getChainId()).toString();this.onConnect({chainId:e}),t&&await(c.storage?.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:e.map((e=>(0,u.b)(e)))})},onChainChanged(e){const t=Number(e);c.emitter.emit("change",{chainId:t})},async onConnect(e){const t=await this.getAccounts();if(0===t.length)return;const s=Number(e.chainId);c.emitter.emit("connect",{accounts:t,chainId:s});const n=await this.getProvider();n&&(o&&(n.removeListener("connect",o),o=void 0),r||(r=this.onAccountsChanged.bind(this),n.on("accountsChanged",r)),i||(i=this.onChainChanged.bind(this),n.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),n.on("disconnect",a)))},async onDisconnect(e){const t=await this.getProvider();e&&1013===e.code&&t&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),t&&(i&&(t.removeListener("chainChanged",i),i=void 0),a&&(t.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),t.on("connect",o))))}})))}b.type="injected";const _={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider:e=>e?.coinbaseWalletExtension?e.coinbaseWalletExtension:k(e,"isCoinbaseWallet")},metaMask:{id:"metaMask",name:"MetaMask",provider:e=>k(e,(e=>{if(!e.isMetaMask)return!1;if(e.isBraveWallet&&!e._events&&!e._state)return!1;const t=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const s of t)if(e[s])return!1;return!0}))},phantom:{id:"phantom",name:"Phantom",provider:e=>e?.phantom?.ethereum?e.phantom?.ethereum:k(e,"isPhantom")}};function k(e,t){function s(e){return"function"==typeof t?t(e):"string"!=typeof t||e[t]}const n=e.ethereum;return n?.providers?n.providers.find((e=>s(e))):n&&s(n)?n:void 0}var C=s(63859);class x{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new C.b})}on(e,t){this._emitter.on(e,t)}once(e,t){this._emitter.once(e,t)}off(e,t){this._emitter.off(e,t)}emit(e,...t){const s=t[0];this._emitter.emit(e,{uid:this.uid,...s})}listenerCount(e){return this._emitter.listenerCount(e)}}function A(e,t){return JSON.parse(e,((e,s)=>{let n=s;return"bigint"===n?.__type&&(n=BigInt(n.value)),"Map"===n?.__type&&(n=new Map(n.value)),t?.(e,n)??n}))}function S(e,t){return e.slice(0,t).join(".")||"."}function E(e,t){const{length:s}=e;for(let n=0;n<s;++n)if(e[n]===t)return n+1;return 0}function T(e,t,s,n){return JSON.stringify(e,function(e,t){const s="function"==typeof e,n="function"==typeof t,r=[],i=[];return function(o,a){if("object"==typeof a)if(r.length){const e=E(r,this);0===e?r[r.length]=this:(r.splice(e),i.splice(e)),i[i.length]=o;const s=E(r,a);if(0!==s)return n?t.call(this,o,a,S(i,s)):`[ref=${S(i,s)}]`}else r[0]=a,i[0]=o;return s?e.call(this,o,a):a}}(((e,s)=>{let n=s;return"bigint"==typeof n&&(n={__type:"bigint",value:s.toString()}),n instanceof Map&&(n={__type:"Map",value:Array.from(s.entries())}),t?.(e,n)??n}),n),s??void 0)}function I(e){const{deserialize:t=A,key:s="wagmi",serialize:n=T,storage:r=P}=e;function i(e){return e instanceof Promise?e.then((e=>e)).catch((()=>null)):e}return{...r,key:s,async getItem(e,n){const o=r.getItem(`${s}.${e}`),a=await i(o);return a?t(a)??null:n??null},async setItem(e,t){const o=`${s}.${e}`;null===t?await i(r.removeItem(o)):await i(r.setItem(o,n(t)))},async removeItem(e){await i(r.removeItem(`${s}.${e}`))}}}const P={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};let $,j=256;var O=s(27649);function L(e){const{multiInjectedProviderDiscovery:t=!0,storage:s=I({storage:"undefined"!=typeof window&&window.localStorage?window.localStorage:P}),syncConnectedChain:o=!0,ssr:a=!1,...l}=e,u="undefined"!=typeof window&&t?n():void 0,d=h((()=>l.chains)),f=h((()=>{const e=[],t=new Set;for(const s of l.connectors??[]){const n=p(s);if(e.push(n),!a&&n.rdns){const e="string"==typeof n.rdns?[n.rdns]:n.rdns;for(const s of e)t.add(s)}}if(!a&&u){const s=u.getProviders();for(const n of s)t.has(n.info.rdns)||e.push(p(g(n)))}return e}));function p(e){const t=function(e){return new x(e)}(function(e=11){if(!$||j+e>512){$="",j=0;for(let e=0;e<256;e++)$+=(256+256*Math.random()|0).toString(16).substring(1)}return $.substring(j,j+++e)}()),n={...e({emitter:t,chains:d.getState(),storage:s,transports:l.transports}),emitter:t,uid:t.uid};return t.on("connect",S),n.setup?.(),n}function g(e){const{info:t}=e,s=e.provider;return b({target:{...t,id:t.rdns,provider:s}})}const w=new Map;function v(){return{chainId:d.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let y;const _="0.0.0-canary-";y=O.r.startsWith(_)?Number.parseInt(O.r.replace(_,"")):Number.parseInt(O.r.split(".")[0]??"0");const k=h(i(s?c(v,{migrate(e,t){if(t===y)return e;const s=v(),n=C(e,s.chainId);return{...s,chainId:n}},name:"store",partialize:e=>({connections:{__type:"Map",value:Array.from(e.connections.entries()).map((([e,t])=>{const{id:s,name:n,type:r,uid:i}=t.connector,o={id:s,name:n,type:r,uid:i};return[e,{...t,connector:o}]}))},chainId:e.chainId,current:e.current}),merge(e,t){"object"==typeof e&&e&&"status"in e&&delete e.status;const s=C(e,t.chainId);return{...t,...e,chainId:s}},skipHydration:a,storage:s,version:y}):v));function C(e,t){return e&&"object"==typeof e&&"chainId"in e&&"number"==typeof e.chainId&&d.getState().some((t=>t.id===e.chainId))?e.chainId:t}function A(e){k.setState((t=>{const s=t.connections.get(e.uid);return s?{...t,connections:new Map(t.connections).set(e.uid,{accounts:e.accounts??s.accounts,chainId:e.chainId??s.chainId,connector:s.connector})}:t}))}function S(e){"connecting"!==k.getState().status&&"reconnecting"!==k.getState().status&&k.setState((t=>{const s=f.getState().find((t=>t.uid===e.uid));return s?(s.emitter.listenerCount("connect")&&s.emitter.off("connect",A),s.emitter.listenerCount("change")||s.emitter.on("change",A),s.emitter.listenerCount("disconnect")||s.emitter.on("disconnect",E),{...t,connections:new Map(t.connections).set(e.uid,{accounts:e.accounts,chainId:e.chainId,connector:s}),current:e.uid,status:"connected"}):t}))}function E(e){k.setState((t=>{const s=t.connections.get(e.uid);if(s){const e=s.connector;e.emitter.listenerCount("change")&&s.connector.emitter.off("change",A),e.emitter.listenerCount("disconnect")&&s.connector.emitter.off("disconnect",E),e.emitter.listenerCount("connect")||s.connector.emitter.on("connect",S)}if(t.connections.delete(e.uid),0===t.connections.size)return{...t,connections:new Map,current:null,status:"disconnected"};const n=t.connections.values().next().value;return{...t,connections:new Map(t.connections),current:n.connector.uid}}))}return k.setState(v()),o&&k.subscribe((({connections:e,current:t})=>t?e.get(t)?.chainId:void 0),(e=>{if(d.getState().some((t=>t.id===e)))return k.setState((t=>({...t,chainId:e??t.chainId})))})),u?.subscribe((e=>{const t=new Set,n=new Set;for(const e of f.getState())if(t.add(e.id),e.rdns){const t="string"==typeof e.rdns?[e.rdns]:e.rdns;for(const e of t)n.add(e)}const r=[];for(const s of e){if(n.has(s.info.rdns))continue;const e=p(g(s));t.has(e.id)||r.push(e)}s&&!k.persist.hasHydrated()||f.setState((e=>[...e,...r]),!0)})),{get chains(){return d.getState()},get connectors(){return f.getState()},storage:s,getClient:function(e={}){const t=e.chainId??k.getState().chainId,s=d.getState().find((e=>e.id===t));if(e.chainId&&!s)throw new m.nk;{const e=w.get(k.getState().chainId);if(e&&!s)return e;if(!s)throw new m.nk}{const e=w.get(t);if(e)return e}let n;if(l.client)n=l.client({chain:s});else{const e=s.id,t=d.getState().map((e=>e.id)),i={},o=Object.entries(l);for(const[s,n]of o)if("chains"!==s&&"client"!==s&&"connectors"!==s&&"transports"!==s)if("object"==typeof n)if(e in n)i[s]=n[e];else{if(t.some((e=>e in n)))continue;i[s]=n}else i[s]=n;n=(0,r.U)({...i,chain:s,batch:i.batch??{multicall:!0},transport:t=>l.transports[e]({...t,connectors:f})})}return w.set(t,n),n},get state(){return k.getState()},setState(e){let t;t="function"==typeof e?e(k.getState()):e;const s=v();"object"!=typeof t&&(t=s);Object.keys(s).some((e=>!(e in t)))&&(t=s),k.setState(t,!0)},subscribe:(e,t,s)=>k.subscribe(e,t,s?{...s,fireImmediately:s.emitImmediately}:void 0),_internal:{mipd:u,store:k,ssr:Boolean(a),syncConnectedChain:o,transports:l.transports,chains:{setState(e){const t="function"==typeof e?e(d.getState()):e;if(0!==t.length)return d.setState(t,!0)},subscribe:e=>d.subscribe(e)},connectors:{providerDetailToConnector:g,setup:p,setState:e=>f.setState("function"==typeof e?e(f.getState()):e,!0),subscribe:e=>f.subscribe(e)},events:{change:A,connect:S,disconnect:E}}}}var U=s(65154),R=s(22781);class M extends R.C{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}const N=new Map;function D({fn:e,id:t,shouldSplitBatch:s,wait:n=0,sort:r}){const i=async()=>{const t=a();o();const s=t.map((({args:e})=>e));0!==s.length&&e(s).then((e=>{r&&Array.isArray(e)&&e.sort(r);for(let s=0;s<t.length;s++){const{resolve:n}=t[s];n?.([e[s],e])}})).catch((e=>{for(let s=0;s<t.length;s++){const{reject:n}=t[s];n?.(e)}}))},o=()=>N.delete(t),a=()=>N.get(t)||[],c=e=>N.set(t,[...a(),e]);return{flush:o,async schedule(e){const{promise:t,resolve:r,reject:o}=function(){let e=()=>{},t=()=>{};return{promise:new Promise(((s,n)=>{e=s,t=n})),resolve:e,reject:t}}(),l=s?.([...a().map((({args:e})=>e)),e]);l&&i();return a().length>0?(c({args:e,resolve:r,reject:o}),t):(c({args:e,resolve:r,reject:o}),setTimeout(i,n),t)}}}var z=s(38064);function F(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const B=F();var q=s(37287);function G(e,t={}){const{batch:s,fetchOptions:n,key:r="http",name:i="HTTP JSON-RPC",onFetchRequest:o,onFetchResponse:a,retryDelay:c}=t;return({chain:l,retryCount:h,timeout:u})=>{const{batchSize:d=1e3,wait:p=0}="object"==typeof s?s:{},g=t.retryCount??h,m=u??t.timeout??1e4,w=e||l?.rpcUrls.default.http[0];if(!w)throw new M;const v=function(e,t={}){return{async request(s){const{body:n,onRequest:r=t.onRequest,onResponse:i=t.onResponse,timeout:o=t.timeout??1e4}=s,a={...t.fetchOptions??{},...s.fetchOptions??{}},{headers:c,method:l,signal:h}=a;try{const t=await(0,f.w)((async({signal:t})=>{const s={...a,body:Array.isArray(n)?(0,z.A)(n.map((e=>({jsonrpc:"2.0",id:e.id??B.take(),...e})))):(0,z.A)({jsonrpc:"2.0",id:n.id??B.take(),...n}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:h||(o>0?t:null)},i=new Request(e,s),u=await(r?.(i,s))??{...s,url:e};return await fetch(u.url??e,u)}),{errorInstance:new U.MU({body:n,url:e}),timeout:o,signal:!0});let s;if(i&&await i(t),t.headers.get("Content-Type")?.startsWith("application/json"))s=await t.json();else{s=await t.text();try{s=JSON.parse(s||"{}")}catch(e){if(t.ok)throw e;s={error:s}}}if(!t.ok)throw new U.Ci({body:n,details:(0,z.A)(s.error)||t.statusText,headers:t.headers,status:t.status,url:e});return s}catch(t){if(t instanceof U.Ci)throw t;if(t instanceof U.MU)throw t;throw new U.Ci({body:n,cause:t,url:e})}}}}(w,{fetchOptions:n,onRequest:o,onResponse:a,timeout:m});return(0,q.o)({key:r,name:i,async request({method:e,params:t}){const n={method:e,params:t},{schedule:r}=D({id:w,wait:p,shouldSplitBatch:e=>e.length>d,fn:e=>v.request({body:e}),sort:(e,t)=>e.id-t.id}),[{error:i,result:o}]=await(async e=>s?r(e):[await v.request({body:e})])(n);if(i)throw new U.J8({body:n,error:i,url:w});return o},retryCount:g,retryDelay:c,timeout:m,type:"http"},{fetchOptions:n,url:w})}}var H=s(3645),J=s(1136),V=s(5212),K=s(71356);const W=new class{_config;get config(){if(!this._config)throw new Error("Config not initialized");return this._config}set config(e){this._config=e}connectors=[V.A,J.A,H.A];init(){this.config=L({chains:K.A.chains,transports:Object.fromEntries(K.A.chains.map((e=>[e.id,G()])))});for(const e of this.connectors)e.init(this.config)}disconnect(){!async function(e,t={}){let s;if(t.connector)s=t.connector;else{const{connections:t,current:n}=e.state,r=t.get(n);s=r?.connector}const n=e.state.connections;s&&(await s.disconnect(),s.emitter.off("change",e._internal.events.change),s.emitter.off("disconnect",e._internal.events.disconnect),s.emitter.on("connect",e._internal.events.connect),n.delete(s.uid)),e.setState((e=>{if(0===n.size)return{...e,connections:new Map,current:null,status:"disconnected"};const t=n.values().next().value;return{...e,connections:new Map(n),current:t.connector.uid}}));{const t=e.state.current;if(!t)return;const s=e.state.connections.get(t)?.connector;if(!s)return;await(e.storage?.setItem("recentConnectorId",s.id))}}(this.config)}}},71356:(e,t,s)=>{function n(e){return{formatters:void 0,fees:void 0,serializers:void 0,...e}}s.d(t,{A:()=>i});const r=n({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://cloudflare-eth.com"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});const i=new class{chains=[r];_walletConnectProjectId;get walletConnectProjectId(){if(!this._walletConnectProjectId)throw new Error("WalletConnect project ID not set");return this._walletConnectProjectId}set walletConnectProjectId(e){this._walletConnectProjectId=e}init(e){this.chains=e.chains,this.walletConnectProjectId=e.walletConnectProjectId}}},6795:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>h});var r=s(75321),i=s(29950),o=s(12224),a=s(17747),c=e([r,o]);[r,o]=c.then?(await c)():c;class l extends i.QE{store=new r.il("wallet-session-manager");get connectedWallet(){return this.store.get("connectedWallet")}get connectedAddress(){return this.store.get("connectedAddress")}get isConnected(){return!!this.connectedWallet&&!!this.connectedAddress}init(){a.A.init()}async connect(){const e=await(new o.A).waitForLogin();this.store.setPermanent("connectedWallet",e.walletId),this.store.setPermanent("connectedAddress",e.walletAddress),this.emit("sessionChanged")}disconnect(){a.A.disconnect(),this.store.remove("connectedWallet"),this.store.remove("connectedAddress"),this.emit("sessionChanged")}}const h=new l;n()}catch(e){n(e)}}))},12980:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>p});var r=s(75321),i=s(47350),o=e([r]);r=(o.then?(await o)():o)[0];const a=3,c=80;function l(e){for(var t=0,s=0;s<e.length;s++){t=(t<<5)-t+e.charCodeAt(s),t|=0}return Math.abs(t)}function h(e,t,s){return t[e%s]}function u(e,t){return Math.floor(e/Math.pow(10,t)%10)}function d(e,t,s){let n=e%t;return s&&u(e,s)%2==0?-n:n}function f(e,t){const s=l(e),n=t&&t.length;return Array.from({length:a},((e,r)=>({color:h(s+r,t,n),translateX:d(s*(r+1),c/10,1),translateY:d(s*(r+1),c/10,2),scale:1.2+d(s*(r+1),c/20)/10,rotate:d(s*(r+1),360,1)})))}class p extends r.vs{constructor(e,t){super(".wallet-avatar");const s=f(e=(0,i.b)(e),["#92A1C6","#146A7C","#F0AB3D","#ADD8E6","#FF6347"]),n=`mask_${l(e)}`;this.htmlElement.innerHTML=`<svg viewBox="0 0 ${c} ${c}" fill="none" role="img" xmlns="http://www.w3.org/2000/svg" width="${t.size}" height="${t.size}">\n  <mask id="${n}" maskUnits="userSpaceOnUse" x="0" y="0" width="${c}" height="${c}">\n    <rect width="${c}" height="${c}" fill="#FFFFFF" rx="${2*c}"></rect>\n  </mask>\n  <g mask="url(#${n})">\n    <rect width="${c}" height="${c}" fill="${s[0].color}"></rect>\n    <path filter="url(#filter_${n})" d="M32.414 59.35L50.376 70.5H72.5v-71H33.728L26.5 13.381l19.057 27.08L32.414 59.35z" fill="${s[1].color}" transform="${"translate("+s[1].translateX+" "+s[1].translateY+") rotate("+s[1].rotate+" "+c/2+" "+c/2+") scale("+s[2].scale+")"}"></path>\n    <path filter="url(#filter_${n})" d="M22.216 24L0 46.75l14.108 38.129L78 86l-3.081-59.276-22.378 4.005 12.972 20.186-23.35 27.395L22.215 24z" fill="${s[2].color}" transform="${"translate("+s[2].translateX+" "+s[2].translateY+") rotate("+s[2].rotate+" "+c/2+" "+c/2+") scale("+s[2].scale+")"}" style="mix-blend-mode: overlay;"></path>\n  </g>\n  <defs>\n    <filter id="filter_${n}" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n      <feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood>\n      <feBlend in="SourceGraphic" in2="BackgroundImageFix" result="shape"></feBlend>\n      <feGaussianBlur stdDeviation="7" result="effect1_foregroundBlur"></feGaussianBlur>\n    </filter>\n  </defs>\n</svg>`}}n()}catch(g){n(g)}}))},12224:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>f});var r=s(75321),i=s(83501),o=s(3645),a=s(1136),c=s(5212),l=s(64699),h=s(34273),u=s(69021),d=e([r,i,l,h,u]);[r,i,l,h,u]=d.then?(await d)():d;class f extends i.h9{resolveConnection;rejectConnection;constructor(){super(".wallet-connection-modal",!1),this.appendToHeader((0,r.el)("h1","Connect Your Crypto Wallet")),this.appendToMain(new i.e2(new i.$n({type:i.VQ.Outlined,icon:new h.A,title:"Connect with MetaMask",onClick:()=>this.handleConnect(a.A)}),new i.$n({type:i.VQ.Outlined,icon:new l.A,title:"Connect with Coinbase Wallet",onClick:()=>this.handleConnect(o.A)}),new i.$n({type:i.VQ.Outlined,icon:new u.A,title:"Connect with WalletConnect",onClick:()=>this.handleConnect(c.A)}))),this.appendToFooter(new i.$n(".cancel",{title:"Cancel",onClick:()=>this.remove()})),this.on("remove",(()=>this.rejectConnection?.(new Error("Login canceled by user"))))}async handleConnect(e){const t=(await e.connect()).accounts[0];if(!t)throw new Error("No accounts found");this.resolveConnection?.({walletId:e.walletId,walletAddress:t}),this.rejectConnection=void 0,this.remove()}async waitForLogin(){return new Promise(((e,t)=>{this.resolveConnection=e,this.rejectConnection=t}))}}n()}catch(e){n(e)}}))},64699:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>o});var r=s(75321),i=e([r]);r=(i.then?(await i)():i)[0];class o extends r.vs{constructor(){super(".icon.coinbase-wallet"),this.htmlElement.innerHTML='<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g clip-path="url(#clip0_13571_129878)">\n<rect width="40" height="40" fill="#0052FF"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8.3312 0H31.6672C36.2704 0 40 4.0128 40 8.9632V31.0368C40 35.9872 36.2704 40 31.6688 40H8.3312C3.7296 40 0 35.9872 0 31.0368V8.9632C0 4.0128 3.7296 0 8.3312 0Z" fill="#0052FF"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M19.9989 5.79443C27.8453 5.79443 34.2053 12.1544 34.2053 20.0008C34.2053 27.8472 27.8453 34.2072 19.9989 34.2072C12.1525 34.2072 5.79254 27.8472 5.79254 20.0008C5.79254 12.1544 12.1525 5.79443 19.9989 5.79443Z" fill="white"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M16.5005 15.459H23.4973C24.0733 15.459 24.5389 15.9614 24.5389 16.579V23.419C24.5389 24.0382 24.0717 24.539 23.4973 24.539H16.5005C15.9245 24.539 15.4589 24.0366 15.4589 23.419V16.579C15.4589 15.9614 15.9261 15.459 16.5005 15.459Z" fill="#0052FF"/>\n</g>\n<defs>\n<clipPath id="clip0_13571_129878">\n<rect width="40" height="40" fill="white"/>\n</clipPath>\n</defs>\n</svg>'}}n()}catch(e){n(e)}}))},34273:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>o});var r=s(75321),i=e([r]);r=(i.then?(await i)():i)[0];class o extends r.vs{constructor(){super(".icon.metamask"),this.htmlElement.innerHTML='<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">\n<rect width="40" height="40" fill="#F7F9FB"/>\n<path d="M32.6877 6.6665L22.0555 14.5632L24.0216 9.90427L32.6877 6.6665Z" fill="#E2761B" stroke="#E2761B" stroke-width="0.106857" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M8.1433 6.6665L18.6901 14.638L16.8201 9.90427L8.1433 6.6665ZM28.8628 24.9711L26.0311 29.3095L32.0899 30.9764L33.8317 25.0672L28.8628 24.9711ZM7.0213 25.0672L8.75238 30.9764L14.8112 29.3095L11.9795 24.9711L7.0213 25.0672Z" fill="#E4761B" stroke="#E4761B" stroke-width="0.106857" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M14.4697 17.641L12.7814 20.1949L18.7974 20.462L18.5837 13.9972L14.4697 17.641ZM26.3629 17.641L22.1955 13.9224L22.0565 20.462L28.0619 20.1949L26.3629 17.641ZM14.8117 29.3097L18.4234 27.5466L15.3032 25.1103L14.8117 29.3097ZM22.4092 27.5466L26.0316 29.3097L25.5294 25.1103L22.4092 27.5466Z" fill="#E4761B" stroke="#E4761B" stroke-width="0.106857" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M26.0316 29.3095L22.4091 27.5464L22.6976 29.9079L22.6656 30.9017L26.0316 29.3095ZM14.8116 29.3095L18.1776 30.9017L18.1562 29.9079L18.4233 27.5464L14.8116 29.3095Z" fill="#D7C1B3" stroke="#D7C1B3" stroke-width="0.106857" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M18.2319 23.5497L15.2185 22.6628L17.345 21.6904L18.2319 23.5497ZM22.6023 23.5497L23.4892 21.6904L25.6264 22.6628L22.6023 23.5497Z" fill="#233447" stroke="#233447" stroke-width="0.106857" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M14.8106 29.3092L15.3236 24.9708L11.9789 25.067L14.8106 29.3092ZM25.5177 24.9708L26.0306 29.3092L28.8623 25.067L25.5177 24.9708ZM28.0609 20.1943L22.0555 20.4615L22.6112 23.5496L23.4981 21.6903L25.6352 22.6627L28.0609 20.1943ZM15.2167 22.6627L17.3538 21.6903L18.2301 23.5496L18.7964 20.4615L12.7804 20.1943L15.2167 22.6627Z" fill="#CD6116" stroke="#CD6116" stroke-width="0.106857" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M12.7814 20.1943L15.3032 25.1097L15.2177 22.6627L12.7814 20.1943ZM25.6362 22.6627L25.5294 25.1097L28.0619 20.1943L25.6362 22.6627ZM18.7974 20.4615L18.2311 23.5496L18.9363 27.1935L19.0966 22.3956L18.7974 20.4615ZM22.0565 20.4615L21.768 22.3849L21.8963 27.1935L22.6122 23.5496L22.0565 20.4615Z" fill="#E4751F" stroke="#E4751F" stroke-width="0.106857" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M22.613 23.5495L21.8971 27.1933L22.41 27.546L25.5302 25.1096L25.637 22.6626L22.613 23.5495ZM15.2185 22.6626L15.304 25.1096L18.4242 27.546L18.9371 27.1933L18.2319 23.5495L15.2185 22.6626Z" fill="#F6851B" stroke="#F6851B" stroke-width="0.106857" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M22.6656 30.9022L22.6976 29.9085L22.4305 29.6734H18.402L18.1562 29.9085L18.1776 30.9022L14.8116 29.3101L15.987 30.2718L18.3699 31.9281H22.4625L24.8561 30.2718L26.0316 29.3101L22.6656 30.9022Z" fill="#C0AD9E" stroke="#C0AD9E" stroke-width="0.106857" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M22.409 27.5465L21.8961 27.1938H18.9362L18.4233 27.5465L18.1561 29.908L18.4019 29.6729H22.4304L22.6975 29.908L22.409 27.5465Z" fill="#161616" stroke="#161616" stroke-width="0.106857" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M33.1371 15.0761L34.0454 10.7164L32.6883 6.6665L22.4087 14.2961L26.3624 17.6407L31.951 19.2756L33.1905 17.833L32.6562 17.4484L33.5111 16.6683L32.8486 16.1554L33.7034 15.5036L33.1371 15.0761ZM6.79688 10.7164L7.70516 15.0761L7.12813 15.5036L7.98299 16.1554L7.33116 16.6683L8.18601 17.4484L7.65173 17.833L8.88058 19.2756L14.4692 17.6407L18.4229 14.2961L8.14327 6.6665L6.79688 10.7164Z" fill="#763D16" stroke="#763D16" stroke-width="0.106857" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M31.951 19.2761L26.3624 17.6412L28.0614 20.1951L25.5289 25.1105L28.8628 25.0678H33.8317L31.951 19.2761ZM14.4692 17.6412L8.88061 19.2761L7.0213 25.0678H11.9795L15.3027 25.1105L12.7809 20.1951L14.4692 17.6412ZM22.0561 20.4622L22.4087 14.2966L24.0329 9.90479H16.8201L18.4229 14.2966L18.7969 20.4622L18.9252 22.407L18.9358 27.1942H21.8958L21.9171 22.407L22.0561 20.4622Z" fill="#F6851B" stroke="#F6851B" stroke-width="0.106857" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>'}}n()}catch(e){n(e)}}))},69021:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{A:()=>o});var r=s(75321),i=e([r]);r=(i.then?(await i)():i)[0];class o extends r.vs{constructor(){super(".icon.walletconnect"),this.htmlElement.innerHTML='<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">\n<rect width="40" height="40" fill="#3396FF"/>\n<path d="M20 40C31.0457 40 40 31.0457 40 20C40 8.9543 31.0457 0 20 0C8.9543 0 0 8.9543 0 20C0 31.0457 8.9543 40 20 40Z" fill="#3396FF"/>\n<path d="M12.2327 14.8836C16.5225 10.7003 23.4779 10.7003 27.7677 14.8836L28.284 15.3871C28.4985 15.5962 28.4985 15.9353 28.284 16.1445L26.5179 17.8668C26.4106 17.9713 26.2368 17.9713 26.1295 17.8668L25.419 17.1739C22.4263 14.2555 17.5741 14.2555 14.5813 17.1739L13.8204 17.9159C13.7132 18.0205 13.5393 18.0205 13.4321 17.9159L11.666 16.1936C11.4514 15.9845 11.4514 15.6453 11.666 15.4362L12.2327 14.8836ZM31.4203 18.4454L32.9922 19.9782C33.2067 20.1874 33.2067 20.5265 32.9922 20.7356L25.9045 27.6473C25.69 27.8565 25.3422 27.8565 25.1277 27.6473L20.0973 22.742C20.0437 22.6896 19.9568 22.6896 19.9031 22.742L14.8728 27.6473C14.6583 27.8565 14.3106 27.8565 14.096 27.6473L7.00816 20.7355C6.79367 20.5264 6.79367 20.1873 7.00816 19.9782L8.58004 18.4453C8.79454 18.2362 9.1423 18.2362 9.35679 18.4453L14.3873 23.3508C14.4409 23.4031 14.5278 23.4031 14.5814 23.3508L19.6117 18.4453C19.8262 18.2361 20.1739 18.2361 20.3885 18.4453L25.4189 23.3508C25.4726 23.4031 25.5595 23.4031 25.6131 23.3508L30.6436 18.4454C30.858 18.2362 31.2058 18.2362 31.4203 18.4454Z" fill="white"/>\n</svg>'}}n()}catch(e){n(e)}}))},28393:(e,t,s)=>{s.a(e,(async(e,n)=>{try{s.d(t,{FK:()=>u.A,JV:()=>o.A,L3:()=>a.A,Rx:()=>f.A,Ry:()=>r.A,VM:()=>i.A,jC:()=>h.A,rS:()=>l.A,wD:()=>c.A,yT:()=>d.A});var r=s(64699),i=s(34273),o=s(69021),a=s(12980),c=s(89190),l=s(3645),h=s(1136),u=s(5212),d=s(71356),f=s(6795),p=e([r,i,o,a,f]);[r,i,o,a,f]=p.then?(await p)():p,n()}catch(e){n(e)}}))},89190:(e,t,s)=>{s.d(t,{A:()=>r});var n=s(47350);const r=new class{shortenAddress(e,t=6,s=4){const r=(0,n.b)(e);if(r.length<=t+s)return r;return`${r.slice(0,t)}...${r.slice(-s)}`}}},3645:(e,t,s)=>{s.d(t,{A:()=>u});var n=s(74237),r=s(4679),i=s(47350),o=s(33604),a=s(53661);function c(e={}){return"3"===e.version||e.headlessMode?function(e){const t=!1;let l,h,u,d,f;return(0,n.U)((n=>({id:"coinbaseWalletSDK",name:"Coinbase Wallet",supportsSimulation:!0,type:c.type,async connect({chainId:e}={}){try{const t=await this.getProvider(),s=(await t.request({method:"eth_requestAccounts"})).map((e=>(0,i.b)(e)));u||(u=this.onAccountsChanged.bind(this),t.on("accountsChanged",u)),d||(d=this.onChainChanged.bind(this),t.on("chainChanged",d)),f||(f=this.onDisconnect.bind(this),t.on("disconnect",f));let n=await this.getChainId();if(e&&n!==e){const t=await this.switchChain({chainId:e}).catch((e=>{if(e.code===o.vx.code)throw e;return{id:n}}));n=t?.id??n}return{accounts:s,chainId:n}}catch(e){if(/(user closed modal|accounts received is empty|user denied account)/i.test(e.message))throw new o.vx(e);throw e}},async disconnect(){const e=await this.getProvider();u&&(e.removeListener("accountsChanged",u),u=void 0),d&&(e.removeListener("chainChanged",d),d=void 0),f&&(e.removeListener("disconnect",f),f=void 0),e.disconnect(),e.close()},async getAccounts(){const e=await this.getProvider();return(await e.request({method:"eth_accounts"})).map((e=>(0,i.b)(e)))},async getChainId(){const e=await this.getProvider(),t=await e.request({method:"eth_chainId"});return Number(t)},async getProvider(){if(!h){const r=await(async()=>{const{default:e}=await Promise.all([s.e(202),s.e(255)]).then(s.t.bind(s,97202,19));return"function"!=typeof e&&"function"==typeof e.default?e.default:e})();l=new r({...e,reloadOnDisconnect:t});const i=l.walletExtension?.getChainId(),o=n.chains.find((t=>e.chainId?t.id===e.chainId:t.id===i))||n.chains[0],a=e.chainId||o?.id,c=e.jsonRpcUrl||o?.rpcUrls.default.http[0];h=l.makeWeb3Provider(c,a)}return h},async isAuthorized(){try{return!!(await this.getAccounts()).length}catch{return!1}},async switchChain({addEthereumChainParameter:e,chainId:t}){const s=n.chains.find((e=>e.id===t));if(!s)throw new o.ch(new r.nk);const i=await this.getProvider();try{return await i.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,a.cK)(s.id)}]}),s}catch(n){if(4902===n.code)try{let n,r;n=e?.blockExplorerUrls?e.blockExplorerUrls:s.blockExplorers?.default.url?[s.blockExplorers?.default.url]:[],r=e?.rpcUrls?.length?e.rpcUrls:[s.rpcUrls.default?.http[0]??""];const o={blockExplorerUrls:n,chainId:(0,a.cK)(t),chainName:e?.chainName??s.name,iconUrls:e?.iconUrls,nativeCurrency:e?.nativeCurrency??s.nativeCurrency,rpcUrls:r};return await i.request({method:"wallet_addEthereumChain",params:[o]}),s}catch(e){throw new o.vx(e)}throw new o.ch(n)}},onAccountsChanged(e){0===e.length?this.onDisconnect():n.emitter.emit("change",{accounts:e.map((e=>(0,i.b)(e)))})},onChainChanged(e){const t=Number(e);n.emitter.emit("change",{chainId:t})},async onDisconnect(e){n.emitter.emit("disconnect");const t=await this.getProvider();u&&(t.removeListener("accountsChanged",u),u=void 0),d&&(t.removeListener("chainChanged",d),d=void 0),f&&(t.removeListener("disconnect",f),f=void 0)}})))}(e):function(e){let t,l,h,u;return(0,n.U)((n=>({id:"coinbaseWalletSDK",name:"Coinbase Wallet",rdns:"com.coinbase.wallet",supportsSimulation:!0,type:c.type,async connect({chainId:e}={}){try{const t=await this.getProvider(),s=(await t.request({method:"eth_requestAccounts"})).map((e=>(0,i.b)(e)));l||(l=this.onAccountsChanged.bind(this),t.on("accountsChanged",l)),h||(h=this.onChainChanged.bind(this),t.on("chainChanged",h)),u||(u=this.onDisconnect.bind(this),t.on("disconnect",u));let n=await this.getChainId();if(e&&n!==e){const t=await this.switchChain({chainId:e}).catch((e=>{if(e.code===o.vx.code)throw e;return{id:n}}));n=t?.id??n}return{accounts:s,chainId:n}}catch(e){if(/(user closed modal|accounts received is empty|user denied account|request rejected)/i.test(e.message))throw new o.vx(e);throw e}},async disconnect(){const e=await this.getProvider();l&&(e.removeListener("accountsChanged",l),l=void 0),h&&(e.removeListener("chainChanged",h),h=void 0),u&&(e.removeListener("disconnect",u),u=void 0),e.disconnect(),e.close?.()},async getAccounts(){const e=await this.getProvider();return(await e.request({method:"eth_accounts"})).map((e=>(0,i.b)(e)))},async getChainId(){const e=await this.getProvider(),t=await e.request({method:"eth_chainId"});return Number(t)},async getProvider(){if(!t){const r="string"==typeof e.preference?{options:e.preference}:{...e.preference,options:e.preference?.options??"all"},{createCoinbaseWalletSDK:i}=await s.e(377).then(s.bind(s,80377)),o=i({...e,appChainIds:n.chains.map((e=>e.id)),preference:r});t=o.getProvider()}return t},async isAuthorized(){try{return!!(await this.getAccounts()).length}catch{return!1}},async switchChain({addEthereumChainParameter:e,chainId:t}){const s=n.chains.find((e=>e.id===t));if(!s)throw new o.ch(new r.nk);const i=await this.getProvider();try{return await i.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,a.cK)(s.id)}]}),s}catch(n){if(4902===n.code)try{let n,r;n=e?.blockExplorerUrls?e.blockExplorerUrls:s.blockExplorers?.default.url?[s.blockExplorers?.default.url]:[],r=e?.rpcUrls?.length?e.rpcUrls:[s.rpcUrls.default?.http[0]??""];const o={blockExplorerUrls:n,chainId:(0,a.cK)(t),chainName:e?.chainName??s.name,iconUrls:e?.iconUrls,nativeCurrency:e?.nativeCurrency??s.nativeCurrency,rpcUrls:r};return await i.request({method:"wallet_addEthereumChain",params:[o]}),s}catch(e){throw new o.vx(e)}throw new o.ch(n)}},onAccountsChanged(e){0===e.length?this.onDisconnect():n.emitter.emit("change",{accounts:e.map((e=>(0,i.b)(e)))})},onChainChanged(e){const t=Number(e);n.emitter.emit("change",{chainId:t})},async onDisconnect(e){n.emitter.emit("disconnect");const t=await this.getProvider();l&&(t.removeListener("accountsChanged",l),l=void 0),h&&(t.removeListener("chainChanged",h),h=void 0),u&&(t.removeListener("disconnect",u),u=void 0)}})))}(e)}c.type="coinbaseWallet";var l=s(67572);class h extends l.A{walletId="coinbase-wallet";init(e){this.config=e,this.wagmiConnector=c()}}const u=new h},1136:(e,t,s)=>{s.d(t,{A:()=>w});var n=s(74237),r=s(32209),i=s(74930),o=s(4679),a=s(47350),c=s(33604),l=s(53661),h=s(36399),u=s(86756),d=s(59174);function f(e={}){let t,p,g,m,w,v,y,b;return(0,n.U)((n=>({id:"metaMaskSDK",name:"MetaMask",rdns:["io.metamask","io.metamask.mobile"],type:f.type,async setup(){const e=await this.getProvider();e?.on&&(v||(v=this.onConnect.bind(this),e.on("connect",v)),m||(m=this.onAccountsChanged.bind(this),e.on("accountsChanged",m)))},async connect({chainId:s,isReconnecting:n}={}){const r=await this.getProvider();y||(y=this.onDisplayUri,r.on("display_uri",y));let i=[];n&&(i=await this.getAccounts().catch((()=>[])));try{let n,o;if(!i?.length)if(e.connectAndSign||e.connectWith)e.connectAndSign?n=await t.connectAndSign({msg:e.connectAndSign}):e.connectWith&&(o=await t.connectWith({method:e.connectWith.method,params:e.connectWith.params})),i=await this.getAccounts();else{i=(await t.connect()).map((e=>(0,a.b)(e)))}let l=await this.getChainId();if(s&&l!==s){const e=await this.switchChain({chainId:s}).catch((e=>{if(e.code===c.vx.code)throw e;return{id:l}}));l=e?.id??l}return y&&(r.removeListener("display_uri",y),y=void 0),n?r.emit("connectAndSign",{accounts:i,chainId:l,signResponse:n}):o&&r.emit("connectWith",{accounts:i,chainId:l,connectWithResponse:o}),v&&(r.removeListener("connect",v),v=void 0),m||(m=this.onAccountsChanged.bind(this),r.on("accountsChanged",m)),w||(w=this.onChainChanged.bind(this),r.on("chainChanged",w)),b||(b=this.onDisconnect.bind(this),r.on("disconnect",b)),{accounts:i,chainId:l}}catch(e){const t=e;if(t.code===c.vx.code)throw new c.vx(t);if(t.code===c.qZ.code)throw new c.qZ(t);throw t}},async disconnect(){const e=await this.getProvider();w&&(e.removeListener("chainChanged",w),w=void 0),b&&(e.removeListener("disconnect",b),b=void 0),v||(v=this.onConnect.bind(this),e.on("connect",v)),await t.terminate()},async getAccounts(){const e=await this.getProvider();return(await e.request({method:"eth_accounts"})).map((e=>(0,a.b)(e)))},async getChainId(){const e=await this.getProvider(),t=e.getChainId()||await(e?.request({method:"eth_chainId"}));return Number(t)},getProvider:async()=>(p||(g||(g=async function(){const o=await(async()=>{const{default:e}=await s.e(579).then(s.t.bind(s,70579,19));return"function"!=typeof e&&"function"==typeof e.default?e.default:e})(),a={};for(const e of n.chains)a[(0,l.cK)(e.id)]=(0,r.R)({chain:e,transports:n.transports})?.[0];t=new o({_source:"wagmi",forceDeleteProvider:!1,forceInjectProvider:!1,injectProvider:!1,...e,readonlyRPCMap:a,dappMetadata:e.dappMetadata??("undefined"!=typeof window?{url:window.location.origin}:{name:"wagmi",url:"https://wagmi.sh"}),useDeeplink:e.useDeeplink??!0});const c=await t.init(),h=c?.activeProvider?c.activeProvider:t.getProvider();if(!h)throw new i.N;return h}()),p=await g),p),async isAuthorized(){try{const e=200;return!!(await(0,h.b)((()=>(0,u.w)((()=>this.getAccounts()),{timeout:e})),{delay:e+1,retryCount:3})).length}catch{return!1}},async switchChain({addEthereumChainParameter:e,chainId:t}){const s=await this.getProvider(),r=n.chains.find((e=>e.id===t));if(!r)throw new c.ch(new o.nk);try{return await Promise.all([s.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,l.cK)(t)}]}).then((async()=>{await this.getChainId()===t&&n.emitter.emit("change",{chainId:t})})),new Promise((e=>{const s=r=>{"chainId"in r&&r.chainId===t&&(n.emitter.off("change",s),e())};n.emitter.on("change",s)}))]),r}catch(n){const i=n;if(4902===i.code||4902===i?.data?.originalError?.code)try{const{default:n,...i}=r.blockExplorers??{};let o,a;e?.blockExplorerUrls?o=e.blockExplorerUrls:n&&(o=[n.url,...Object.values(i).map((e=>e.url))]),a=e?.rpcUrls?.length?e.rpcUrls:[r.rpcUrls.default?.http[0]??""];const h={blockExplorerUrls:o,chainId:(0,l.cK)(t),chainName:e?.chainName??r.name,iconUrls:e?.iconUrls,nativeCurrency:e?.nativeCurrency??r.nativeCurrency,rpcUrls:a};await s.request({method:"wallet_addEthereumChain",params:[h]});if((0,d.ME)(await s.request({method:"eth_chainId"}))!==t)throw new c.vx(new Error("User rejected switch after adding network."));return r}catch(e){throw new c.vx(e)}if(i.code===c.vx.code)throw new c.vx(i);throw new c.ch(i)}},async onAccountsChanged(e){if(0===e.length){if(!t.isExtensionActive())return;this.onDisconnect()}else if(n.emitter.listenerCount("connect")){const e=(await this.getChainId()).toString();this.onConnect({chainId:e})}else n.emitter.emit("change",{accounts:e.map((e=>(0,a.b)(e)))})},onChainChanged(e){const t=Number(e);n.emitter.emit("change",{chainId:t})},async onConnect(e){const t=await this.getAccounts();if(0===t.length)return;const s=Number(e.chainId);n.emitter.emit("connect",{accounts:t,chainId:s});const r=await this.getProvider();v&&(r.removeListener("connect",v),v=void 0),m||(m=this.onAccountsChanged.bind(this),r.on("accountsChanged",m)),w||(w=this.onChainChanged.bind(this),r.on("chainChanged",w)),b||(b=this.onDisconnect.bind(this),r.on("disconnect",b))},async onDisconnect(e){const t=await this.getProvider();e&&1013===e.code&&t&&(await this.getAccounts()).length||(n.emitter.emit("disconnect"),w&&(t.removeListener("chainChanged",w),w=void 0),b&&(t.removeListener("disconnect",b),b=void 0),v||(v=this.onConnect.bind(this),t.on("connect",v)))},onDisplayUri(e){n.emitter.emit("message",{type:"display_uri",data:e})}})))}f.type="metaMask";var p=s(58799),g=s(67572);class m extends g.A{walletId="metamask";init(e){this.config=e,this.wagmiConnector=f()}async connect(){return new Promise(((e,t)=>{let s=!1;const n=setInterval((()=>{document.querySelector(".install-model")?s||(s=!0):s&&(clearInterval(n),t(new Error("User rejected request")))}),1e3);(0,p.N)(this.config,{connector:this.wagmiConnector}).then((t=>e(t))).catch((e=>t(e))).finally((()=>clearInterval(n)))}))}}const w=new m},5212:(e,t,s)=>{s.d(t,{A:()=>p});var n=s(74237),r=s(74930),i=s(32209),o=s(4679),a=s(47350),c=s(33604),l=s(53661);function h(e){const t=e.isNewChainsStale??!0;let u,d;let f,p,g,m,w,v;return(0,n.U)((n=>({id:"walletConnect",name:"WalletConnect",type:h.type,async setup(){const e=await this.getProvider().catch((()=>null));e&&(g||(g=this.onConnect.bind(this),e.on("connect",g)),w||(w=this.onSessionDelete.bind(this),e.on("session_delete",w)))},async connect({chainId:e,...t}={}){try{const s=await this.getProvider();if(!s)throw new r.N;m||(m=this.onDisplayUri,s.on("display_uri",m));let i=e;if(!i){const e=await(n.storage?.getItem("state"))??{},t=n.chains.some((t=>t.id===e.chainId));i=t?e.chainId:n.chains[0]?.id}if(!i)throw new Error("No chains found on connector.");const o=await this.isChainsStale();if(s.session&&o&&await s.disconnect(),!s.session||o){const e=n.chains.filter((e=>e.id!==i)).map((e=>e.id));await s.connect({optionalChains:[i,...e],..."pairingTopic"in t?{pairingTopic:t.pairingTopic}:{}}),this.setRequestedChainsIds(n.chains.map((e=>e.id)))}const c=(await s.enable()).map((e=>(0,a.b)(e))),l=await this.getChainId();return m&&(s.removeListener("display_uri",m),m=void 0),g&&(s.removeListener("connect",g),g=void 0),f||(f=this.onAccountsChanged.bind(this),s.on("accountsChanged",f)),p||(p=this.onChainChanged.bind(this),s.on("chainChanged",p)),v||(v=this.onDisconnect.bind(this),s.on("disconnect",v)),w||(w=this.onSessionDelete.bind(this),s.on("session_delete",w)),{accounts:c,chainId:l}}catch(e){if(/(user rejected|connection request reset)/i.test(e?.message))throw new c.vx(e);throw e}},async disconnect(){const e=await this.getProvider();try{await(e?.disconnect())}catch(e){if(!/No matching key/i.test(e.message))throw e}finally{p&&(e?.removeListener("chainChanged",p),p=void 0),v&&(e?.removeListener("disconnect",v),v=void 0),g||(g=this.onConnect.bind(this),e?.on("connect",g)),f&&(e?.removeListener("accountsChanged",f),f=void 0),w&&(e?.removeListener("session_delete",w),w=void 0),this.setRequestedChainsIds([])}},async getAccounts(){return(await this.getProvider()).accounts.map((e=>(0,a.b)(e)))},async getProvider({chainId:t}={}){return u||(d||(d=async function(){const t=n.chains.map((e=>e.id));if(!t.length)return;const{EthereumProvider:r}=await Promise.all([s.e(230),s.e(667)]).then(s.bind(s,27230));return await r.init({...e,disableProviderPing:!0,optionalChains:t,projectId:e.projectId,rpcMap:Object.fromEntries(n.chains.map((e=>{const[t]=(0,i.R)({chain:e,transports:n.transports});return[e.id,t]}))),showQrModal:e.showQrModal??!0})}()),u=await d,u?.events.setMaxListeners(Number.POSITIVE_INFINITY)),t&&await(this.switchChain?.({chainId:t})),u},async getChainId(){return(await this.getProvider()).chainId},async isAuthorized(){try{const[e,t]=await Promise.all([this.getAccounts(),this.getProvider()]);if(!e.length)return!1;return!await this.isChainsStale()||!t.session||(await t.disconnect().catch((()=>{})),!1)}catch{return!1}},async switchChain({addEthereumChainParameter:e,chainId:t}){const s=await this.getProvider();if(!s)throw new r.N;const i=n.chains.find((e=>e.id===t));if(!i)throw new c.ch(new o.nk);try{await Promise.all([new Promise((e=>{const s=({chainId:r})=>{r===t&&(n.emitter.off("change",s),e())};n.emitter.on("change",s)})),s.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,l.cK)(t)}]})]);const e=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...e,t]),i}catch(n){const r=n;if(/(user rejected)/i.test(r.message))throw new c.vx(r);try{let n,r;n=e?.blockExplorerUrls?e.blockExplorerUrls:i.blockExplorers?.default.url?[i.blockExplorers?.default.url]:[],r=e?.rpcUrls?.length?e.rpcUrls:[...i.rpcUrls.default.http];const o={blockExplorerUrls:n,chainId:(0,l.cK)(t),chainName:e?.chainName??i.name,iconUrls:e?.iconUrls,nativeCurrency:e?.nativeCurrency??i.nativeCurrency,rpcUrls:r};await s.request({method:"wallet_addEthereumChain",params:[o]});const a=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...a,t]),i}catch(e){throw new c.vx(e)}}},onAccountsChanged(e){0===e.length?this.onDisconnect():n.emitter.emit("change",{accounts:e.map((e=>(0,a.b)(e)))})},onChainChanged(e){const t=Number(e);n.emitter.emit("change",{chainId:t})},async onConnect(e){const t=Number(e.chainId),s=await this.getAccounts();n.emitter.emit("connect",{accounts:s,chainId:t})},async onDisconnect(e){this.setRequestedChainsIds([]),n.emitter.emit("disconnect");const t=await this.getProvider();f&&(t.removeListener("accountsChanged",f),f=void 0),p&&(t.removeListener("chainChanged",p),p=void 0),v&&(t.removeListener("disconnect",v),v=void 0),w&&(t.removeListener("session_delete",w),w=void 0),g||(g=this.onConnect.bind(this),t.on("connect",g))},onDisplayUri(e){n.emitter.emit("message",{type:"display_uri",data:e})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){if(!u)return[];const e=u.session?.namespaces.eip155?.accounts?.map((e=>Number.parseInt(e.split(":")[1]||"")));return e??[]},async getRequestedChainsIds(){return await(n.storage?.getItem(this.requestedChainsStorageKey))??[]},async isChainsStale(){if(!t)return!1;const e=n.chains.map((e=>e.id)),s=this.getNamespaceChainsIds();if(s.length&&!s.some((t=>e.includes(t))))return!1;const r=await this.getRequestedChainsIds();return!e.every((e=>r.includes(e)))},async setRequestedChainsIds(e){await(n.storage?.setItem(this.requestedChainsStorageKey,e))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})))}h.type="walletConnect";var u=s(71356),d=s(67572);class f extends d.A{walletId="walletconnect";init(e){this.config=e,this.wagmiConnector=h({projectId:u.A.walletConnectProjectId,qrModalOptions:{themeVariables:{"--wcm-z-index":"99998"}}})}}const p=new f},67572:(e,t,s)=>{s.d(t,{A:()=>p});var n=s(58799),r=s(64874),i=s(22781);class o extends i.C{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join("\n"),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}i.C;var a=s(53661);async function c(e,{account:t=e.account,message:s}){if(!t)throw new o({docsPath:"/docs/actions/wallet/signMessage"});const n=(0,r.J)(t);if(n.signMessage)return n.signMessage({message:s});const i="string"==typeof s?(0,a.i3)(s):s.raw instanceof Uint8Array?(0,a.nj)(s.raw):s.raw;return e.request({method:"personal_sign",params:[i,n.address]},{retryCount:0})}var l=s(81417),h=s(37287);var u=s(47350),d=s(4679);async function f(e,t={}){let s;if(t.connector){const{connector:n}=t;if("reconnecting"===e.state.status&&!n.getAccounts&&!n.getChainId)throw new d.HF({connector:n});const[r,i]=await Promise.all([n.getAccounts(),n.getChainId()]);s={accounts:r,chainId:i,connector:n}}else s=e.state.connections.get(e.state.current);if(!s)throw new d.gC;const n=t.chainId??s.chainId,i=await s.connector.getChainId();if(i!==s.chainId)throw new d.xU({connectionChainId:s.chainId,connectorChainId:i});const o=s.connector;if(o.getClient)return o.getClient({chainId:n});const a=(0,r.J)(t.account??s.accounts[0]);if(a.address=(0,u.b)(a.address),t.account&&!s.accounts.some((e=>e.toLowerCase()===a.address.toLowerCase())))throw new d.aj({address:a.address,connector:o});const c=e.chains.find((e=>e.id===n)),f=await s.connector.getProvider({chainId:n});return(0,l.U)({account:a,chain:c,name:"Connector Client",transport:e=>function(e,t={}){const{key:s="custom",name:n="Custom Provider",retryDelay:r}=t;return({retryCount:i})=>(0,h.o)({key:s,name:n,request:e.request.bind(e),retryCount:t.retryCount??i,retryDelay:r,type:"custom"})}(f)({...e,retryCount:0})})}class p{_config;get config(){if(!this._config)throw new Error("Config not initialized");return this._config}set config(e){this._config=e}_wagmiConnector;get wagmiConnector(){if(!this._wagmiConnector)throw new Error("Connector not initialized");return this._wagmiConnector}set wagmiConnector(e){this._wagmiConnector=e}async connect(){return await(0,n.N)(this.config,{connector:this.wagmiConnector})}async signMessage(e,t){return await async function(e,t){const{account:s,connector:n,...r}=t;let i;i="object"==typeof s&&"local"===s.type?e.getClient():await f(e,{account:s,connector:n});return function(e,t,s){const n=e[t.name];if("function"==typeof n)return n;const r=e[s];return"function"==typeof r?r:s=>t(e,s)}(i,c,"signMessage")({...r,...s?{account:s}:{}})}(this.config,{account:e,message:t})}}},29950:(e,t,s)=>{s.d(t,{QE:()=>n});class n{events={};on(e,t){return this.events[e]||(this.events[e]=[]),this.events[e].push(t),this}off(e,t){if(!this.events[e])return this;const s=this.events[e].indexOf(t);return-1!==s&&this.events[e].splice(s,1),this}emit(e,...t){return this.events[e]?this.events[e].map((e=>e(...t))):[]}}new class{pull(e,...t){for(const s of t){const t=e.indexOf(s);-1!==t&&e.splice(t,1)}}};new class{random(e,t){return Math.floor(Math.random()*(t-e+1)+e)}};new class{parseWithUndefined(e){return JSON.parse(e,((e,t)=>null===t?void 0:t))}};new class{isEqual(e,t){if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;const s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;for(const r of s)if(!n.includes(r)||!this.isEqual(e[r],t[r]))return!1;return!0}};new class{capitalize(e){return e.split(" ").map((e=>0===e.length?e:e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())).join(" ")}isKebabCase(e){return/^[a-z]+(-[a-z]+)*$/.test(e)}}},99661:(e,t,s)=>{function n(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function r(e,...t){if(!((s=e)instanceof Uint8Array||null!=s&&"object"==typeof s&&"Uint8Array"===s.constructor.name))throw new Error("Uint8Array expected");var s;if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function i(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function o(e,t){r(e);const s=t.outputLen;if(e.length<s)throw new Error(`digestInto() expects output buffer of length at least ${s}`)}s.d(t,{CG:()=>o,ai:()=>n,ee:()=>r,t2:()=>i})},59519:(e,t,s)=>{s.d(t,{DH:()=>r,Fc:()=>l,My:()=>u,O8:()=>i,Ow:()=>o,Vw:()=>f,ZJ:()=>d,ld:()=>p,qv:()=>a});var n=s(99661);const r=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),i=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),o=(e,t)=>e<<32-t|e>>>t,a=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],c=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255;function l(e){for(let t=0;t<e.length;t++)e[t]=c(e[t])}const h=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function u(e){(0,n.ee)(e);let t="";for(let s=0;s<e.length;s++)t+=h[e[s]];return t}function d(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),(0,n.ee)(e),e}class f{clone(){return this._cloneInto()}}function p(e){const t=t=>e().update(d(t)).digest(),s=e();return t.outputLen=s.outputLen,t.blockLen=s.blockLen,t.create=()=>e(),t}},58799:(e,t,s)=>{s.d(t,{N:()=>r});var n=s(4679);async function r(e,t){let s;if(s="function"==typeof t.connector?e._internal.connectors.setup(t.connector):t.connector,s.uid===e.state.current)throw new n.nM;try{e.setState((e=>({...e,status:"connecting"}))),s.emitter.emit("message",{type:"connecting"});const n=await s.connect({chainId:t.chainId}),r=n.accounts;return s.emitter.off("connect",e._internal.events.connect),s.emitter.on("change",e._internal.events.change),s.emitter.on("disconnect",e._internal.events.disconnect),await(e.storage?.setItem("recentConnectorId",s.id)),e.setState((e=>({...e,connections:new Map(e.connections).set(s.uid,{accounts:r,chainId:n.chainId,connector:s}),current:s.uid,status:"connected"}))),{accounts:r,chainId:n.chainId}}catch(t){throw e.setState((e=>({...e,status:e.current?"connected":"disconnected"}))),t}}},74237:(e,t,s)=>{function n(e){return e}s.d(t,{U:()=>n})},79171:(e,t,s)=>{s.d(t,{C:()=>a});var n=s(27649);var r,i,o=function(e,t,s,n){if("a"===s&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)};class a extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return`@wagmi/core@${n.r}`}constructor(e,t={}){super(),r.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const s=t.cause instanceof a?t.cause.details:t.cause?.message?t.cause.message:t.details,n=t.cause instanceof a&&t.cause.docsPath||t.docsPath;this.message=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...n?[`Docs: ${this.docsBaseUrl}${n}.html${t.docsSlug?`#${t.docsSlug}`:""}`]:[],...s?[`Details: ${s}`]:[],`Version: ${this.version}`].join("\n"),t.cause&&(this.cause=t.cause),this.details=s,this.docsPath=n,this.metaMessages=t.metaMessages,this.shortMessage=e}walk(e){return o(this,r,"m",i).call(this,this,e)}}r=new WeakSet,i=function e(t,s){return s?.(t)?t:t.cause?o(this,r,"m",e).call(this,t.cause,s):t}},4679:(e,t,s)=>{s.d(t,{HF:()=>l,aj:()=>a,gC:()=>o,nM:()=>i,nk:()=>r,xU:()=>c});var n=s(79171);class r extends n.C{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class i extends n.C{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class o extends n.C{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}n.C;class a extends n.C{constructor({address:e,connector:t}){super(`Account "${e}" not found for connector "${t.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class c extends n.C{constructor({connectionChainId:e,connectorChainId:t}){super(`The current chain of the connector (id: ${t}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${t}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class l extends n.C{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uuid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}},74930:(e,t,s)=>{s.d(t,{N:()=>r});var n=s(79171);class r extends n.C{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}n.C},32209:(e,t,s)=>{function n(e){const{chain:t}=e,s=t.rpcUrls.default.http[0];if(!e.transports)return[s];const n=e.transports?.[t.id]?.({chain:t});return(n?.value?.transports||[n]).map((({value:e})=>e?.url||s))}s.d(t,{R:()=>n})},27649:(e,t,s)=>{s.d(t,{r:()=>n});const n="2.14.6"},63859:(e,t,s)=>{s.d(t,{b:()=>n});var n=s(62353)},64874:(e,t,s)=>{function n(e){return"string"==typeof e?{address:e,type:"json-rpc"}:e}s.d(t,{J:()=>n})},81417:(e,t,s)=>{s.d(t,{U:()=>i});var n=s(64874),r=s(55631);function i(e){const{batch:t,cacheTime:s=e.pollingInterval??4e3,ccipRead:i,key:o="base",name:a="Base Client",pollingInterval:c=4e3,type:l="base"}=e,h=e.chain,u=e.account?(0,n.J)(e.account):void 0,{config:d,request:f,value:p}=e.transport({chain:h,pollingInterval:c}),g={account:u,batch:t,cacheTime:s,ccipRead:i,chain:h,key:o,name:a,pollingInterval:c,request:f,transport:{...d,...p},type:l,uid:(0,r.L)()};return Object.assign(g,{extend:function e(t){return s=>{const n=s(t);for(const e in g)delete n[e];const r={...t,...n};return Object.assign(r,{extend:e(r)})}}(g)})}},37287:(e,t,s)=>{s.d(t,{o:()=>f});var n=s(22781),r=s(65154),i=s(33604),o=s(53661),a=s(58402);const c=new(s(83220).A)(8192);var l=s(36399),h=s(38064);function u(e,t={}){return async(s,u={})=>{const{dedupe:d=!1,retryDelay:f=150,retryCount:p=3,uid:g}={...t,...u};return function(e,{enabled:t=!0,id:s}){if(!t||!s)return e();if(c.get(s))return c.get(s);const n=e().finally((()=>c.delete(s)));return c.set(s,n),n}((()=>(0,l.b)((async()=>{try{return await e(s)}catch(e){const t=e;switch(t.code){case i.XU.code:throw new i.XU(t);case i.CL.code:throw new i.CL(t);case i.Gi.code:throw new i.Gi(t,{method:s.method});case i.D5.code:throw new i.D5(t);case i.bq.code:throw new i.bq(t);case i.Di.code:throw new i.Di(t);case i.hA.code:throw new i.hA(t);case i.qZ.code:throw new i.qZ(t);case i.YW.code:throw new i.YW(t);case i.ab.code:throw new i.ab(t,{method:s.method});case i.s0.code:throw new i.s0(t);case i.xQ.code:throw new i.xQ(t);case i.vx.code:throw new i.vx(t);case i.sV.code:throw new i.sV(t);case i.Sf.code:throw new i.Sf(t);case i.RV.code:throw new i.RV(t);case i.xq.code:throw new i.xq(t);case i.ch.code:throw new i.ch(t);case 5e3:throw new i.vx(t);default:if(e instanceof n.C)throw e;throw new i.MI(t)}}}),{delay:({count:e,error:t})=>{if(t&&t instanceof r.Ci){const e=t?.headers?.get("Retry-After");if(e?.match(/\d/))return 1e3*Number.parseInt(e)}return(1<<e)*f},retryCount:p,shouldRetry:({error:e})=>function(e){if("code"in e&&"number"==typeof e.code)return-1===e.code||(e.code===i.s0.code||e.code===i.bq.code);if(e instanceof r.Ci&&e.status)return 403===e.status||(408===e.status||(413===e.status||(429===e.status||(500===e.status||(502===e.status||(503===e.status||504===e.status))))));return!0}(e)})),{enabled:d,id:d?(0,a.S)((0,o.i3)(`${g}.${(0,h.A)(s)}`)):void 0})}}var d=s(55631);function f({key:e,name:t,request:s,retryCount:n=3,retryDelay:r=150,timeout:i,type:o},a){return{config:{key:e,name:t,request:s,retryCount:n,retryDelay:r,timeout:i,type:o},request:u(s,{retryCount:n,retryDelay:r,uid:(0,d.L)()}),value:a}}},22781:(e,t,s)=>{s.d(t,{C:()=>i});const n="2.21.47";let r={getDocsUrl:({docsBaseUrl:e,docsPath:t="",docsSlug:s})=>t?`${e??"https://viem.sh"}${t}${s?`#${s}`:""}`:void 0,version:`viem@${n}`};class i extends Error{constructor(e,t={}){const s=t.cause instanceof i?t.cause.details:t.cause?.message?t.cause.message:t.details,o=t.cause instanceof i&&t.cause.docsPath||t.docsPath,a=r.getDocsUrl?.({...t,docsPath:o});super([e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...a?[`Docs: ${a}`]:[],...s?[`Details: ${s}`]:[],...r.version?[`Version: ${r.version}`]:[]].join("\n"),t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=s,this.docsPath=o,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=n}walk(e){return o(this,e)}}function o(e,t){return t?.(e)?e:e&&"object"==typeof e&&"cause"in e&&void 0!==e.cause?o(e.cause,t):t?null:e}},57002:(e,t,s)=>{s.d(t,{Ty:()=>r,u:()=>i});var n=s(22781);class r extends n.C{constructor({max:e,min:t,signed:s,size:n,value:r}){super(`Number "${r}" is not in safe ${n?`${8*n}-bit ${s?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}}n.C;n.C;n.C;class i extends n.C{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}},65154:(e,t,s)=>{s.d(t,{Ci:()=>i,J8:()=>o,MU:()=>a});var n=s(38064),r=s(22781);class i extends r.C{constructor({body:e,cause:t,details:s,headers:r,status:i,url:o}){super("HTTP request failed.",{cause:t,details:s,metaMessages:[i&&`Status: ${i}`,`URL: ${o}`,e&&`Request body: ${(0,n.A)(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=r,this.status=i,this.url=o}}r.C;class o extends r.C{constructor({body:e,error:t,url:s}){super("RPC Request failed.",{cause:t,details:t.message,metaMessages:[`URL: ${s}`,`Request body: ${(0,n.A)(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t.code}}r.C;class a extends r.C{constructor({body:e,url:t}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${t}`,`Request body: ${(0,n.A)(e)}`],name:"TimeoutError"})}}},33604:(e,t,s)=>{s.d(t,{CL:()=>c,D5:()=>h,Di:()=>d,Gi:()=>l,MI:()=>A,RV:()=>k,Sf:()=>_,XU:()=>a,YW:()=>g,ab:()=>m,bq:()=>u,ch:()=>x,hA:()=>f,qZ:()=>p,s0:()=>w,sV:()=>b,vx:()=>y,xQ:()=>v,xq:()=>C});var n=s(22781),r=s(65154);class i extends n.C{constructor(e,{code:t,docsPath:s,metaMessages:n,name:i,shortMessage:o}){super(o,{cause:e,docsPath:s,metaMessages:n||e?.metaMessages,name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof r.J8?e.code:t??-1}}class o extends i{constructor(e,t){super(e,t),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t.data}}class a extends i{constructor(e){super(e,{code:a.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(a,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class c extends i{constructor(e){super(e,{code:c.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(c,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class l extends i{constructor(e,{method:t}={}){super(e,{code:l.code,name:"MethodNotFoundRpcError",shortMessage:`The method${t?` "${t}"`:""} does not exist / is not available.`})}}Object.defineProperty(l,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class h extends i{constructor(e){super(e,{code:h.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join("\n")})}}Object.defineProperty(h,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class u extends i{constructor(e){super(e,{code:u.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(u,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class d extends i{constructor(e){super(e,{code:d.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join("\n")})}}Object.defineProperty(d,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class f extends i{constructor(e){super(e,{code:f.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(f,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class p extends i{constructor(e){super(e,{code:p.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(p,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class g extends i{constructor(e){super(e,{code:g.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(g,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class m extends i{constructor(e,{method:t}={}){super(e,{code:m.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${t?` "${t}"`:""} is not implemented.`})}}Object.defineProperty(m,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class w extends i{constructor(e){super(e,{code:w.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(w,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class v extends i{constructor(e){super(e,{code:v.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(v,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class y extends o{constructor(e){super(e,{code:y.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(y,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class b extends o{constructor(e){super(e,{code:b.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(b,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class _ extends o{constructor(e,{method:t}={}){super(e,{code:_.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${t?` " ${t}"`:""}.`})}}Object.defineProperty(_,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class k extends o{constructor(e){super(e,{code:k.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(k,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class C extends o{constructor(e){super(e,{code:C.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(C,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class x extends o{constructor(e){super(e,{code:x.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(x,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class A extends i{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}},47350:(e,t,s)=>{s.d(t,{o:()=>u,b:()=>d});var n=s(22781);class r extends n.C{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}var i=s(59331),o=s(58402),a=s(83220);const c=/^0x[a-fA-F0-9]{40}$/,l=new a.A(8192);const h=new a.A(8192);function u(e,t){if(h.has(`${e}.${t}`))return h.get(`${e}.${t}`);const s=t?`${t}${e.toLowerCase()}`:e.substring(2).toLowerCase(),n=(0,o.S)((0,i.Af)(s),"bytes"),r=(t?s.substring(`${t}0x`.length):s).split("");for(let e=0;e<40;e+=2)n[e>>1]>>4>=8&&r[e]&&(r[e]=r[e].toUpperCase()),(15&n[e>>1])>=8&&r[e+1]&&(r[e+1]=r[e+1].toUpperCase());const a=`0x${r.join("")}`;return h.set(`${e}.${t}`,a),a}function d(e,t){if(!function(e,t){const{strict:s=!0}=t??{},n=`${e}.${s}`;if(l.has(n))return l.get(n);const r=!(!c.test(e)||e.toLowerCase()!==e&&s&&u(e)!==e);return l.set(n,r),r}(e,{strict:!1}))throw new r({address:e});return u(e,t)}},92627:(e,t,s)=>{function n(e,{strict:t=!0}={}){return!!e&&("string"==typeof e&&(t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")))}s.d(t,{q:()=>n})},99424:(e,t,s)=>{s.d(t,{eV:()=>i});var n=s(22781);n.C;class r extends n.C{constructor({size:e,targetSize:t,type:s}){super(`${s.charAt(0).toUpperCase()}${s.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}}n.C;function i(e,{dir:t,size:s=32}={}){return"string"==typeof e?function(e,{dir:t,size:s=32}={}){if(null===s)return e;const n=e.replace("0x","");if(n.length>2*s)throw new r({size:Math.ceil(n.length/2),targetSize:s,type:"hex"});return`0x${n["right"===t?"padEnd":"padStart"](2*s,"0")}`}(e,{dir:t,size:s}):function(e,{dir:t,size:s=32}={}){if(null===s)return e;if(e.length>s)throw new r({size:e.length,targetSize:s,type:"bytes"});const n=new Uint8Array(s);for(let r=0;r<s;r++){const i="right"===t;n[i?r:s-r-1]=e[i?r:e.length-r-1]}return n}(e,{dir:t,size:s})}},59174:(e,t,s)=>{s.d(t,{Sl:()=>o,ME:()=>c});var n=s(57002),r=s(92627);function i(e){return(0,r.q)(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}function o(e,{size:t}){if(i(e)>t)throw new n.u({givenSize:i(e),maxSize:t})}function a(e,t={}){const{signed:s}=t;t.size&&o(e,{size:t.size});const n=BigInt(e);if(!s)return n;const r=(e.length-2)/2;return n<=(1n<<8n*BigInt(r)-1n)-1n?n:n-BigInt(`0x${"f".padStart(2*r,"f")}`)-1n}function c(e,t={}){return Number(a(e,t))}},59331:(e,t,s)=>{s.d(t,{Af:()=>f,ZJ:()=>l});var n=s(22781),r=s(92627),i=s(99424),o=s(59174),a=s(53661);const c=new TextEncoder;function l(e,t={}){return"number"==typeof e||"bigint"==typeof e?function(e,t){const s=(0,a.cK)(e,t);return d(s)}(e,t):"boolean"==typeof e?function(e,t={}){const s=new Uint8Array(1);if(s[0]=Number(e),"number"==typeof t.size)return(0,o.Sl)(s,{size:t.size}),(0,i.eV)(s,{size:t.size});return s}(e,t):(0,r.q)(e)?d(e,t):f(e,t)}const h={zero:48,nine:57,A:65,F:70,a:97,f:102};function u(e){return e>=h.zero&&e<=h.nine?e-h.zero:e>=h.A&&e<=h.F?e-(h.A-10):e>=h.a&&e<=h.f?e-(h.a-10):void 0}function d(e,t={}){let s=e;t.size&&((0,o.Sl)(s,{size:t.size}),s=(0,i.eV)(s,{dir:"right",size:t.size}));let r=s.slice(2);r.length%2&&(r=`0${r}`);const a=r.length/2,c=new Uint8Array(a);for(let e=0,t=0;e<a;e++){const s=u(r.charCodeAt(t++)),i=u(r.charCodeAt(t++));if(void 0===s||void 0===i)throw new n.C(`Invalid byte sequence ("${r[t-2]}${r[t-1]}" in "${r}").`);c[e]=16*s+i}return c}function f(e,t={}){const s=c.encode(e);return"number"==typeof t.size?((0,o.Sl)(s,{size:t.size}),(0,i.eV)(s,{dir:"right",size:t.size})):s}},53661:(e,t,s)=>{s.d(t,{cK:()=>l,i3:()=>u,nj:()=>a});var n=s(57002),r=s(99424),i=s(59174);const o=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function a(e,t={}){return"number"==typeof e||"bigint"==typeof e?l(e,t):"string"==typeof e?u(e,t):"boolean"==typeof e?function(e,t={}){const s=`0x${Number(e)}`;if("number"==typeof t.size)return(0,i.Sl)(s,{size:t.size}),(0,r.eV)(s,{size:t.size});return s}(e,t):c(e,t)}function c(e,t={}){let s="";for(let t=0;t<e.length;t++)s+=o[e[t]];const n=`0x${s}`;return"number"==typeof t.size?((0,i.Sl)(n,{size:t.size}),(0,r.eV)(n,{dir:"right",size:t.size})):n}function l(e,t={}){const{signed:s,size:i}=t,o=BigInt(e);let a;i?a=s?(1n<<8n*BigInt(i)-1n)-1n:2n**(8n*BigInt(i))-1n:"number"==typeof e&&(a=BigInt(Number.MAX_SAFE_INTEGER));const c="bigint"==typeof a&&s?-a-1n:0;if(a&&o>a||o<c){const t="bigint"==typeof e?"n":"";throw new n.Ty({max:a?`${a}${t}`:void 0,min:`${c}${t}`,signed:s,size:i,value:`${e}${t}`})}const l=`0x${(s&&o<0?(1n<<BigInt(8*i))+BigInt(o):o).toString(16)}`;return i?(0,r.eV)(l,{size:i}):l}const h=new TextEncoder;function u(e,t={}){return c(h.encode(e),t)}},58402:(e,t,s)=>{s.d(t,{S:()=>j});var n=s(99661);const r=BigInt(2**32-1),i=BigInt(32);function o(e,t=!1){return t?{h:Number(e&r),l:Number(e>>i&r)}:{h:0|Number(e>>i&r),l:0|Number(e&r)}}function a(e,t=!1){let s=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let r=0;r<e.length;r++){const{h:i,l:a}=o(e[r],t);[s[r],n[r]]=[i,a]}return[s,n]}const c=(e,t,s)=>e<<s|t>>>32-s,l=(e,t,s)=>t<<s|e>>>32-s,h=(e,t,s)=>t<<s-32|e>>>64-s,u=(e,t,s)=>e<<s-32|t>>>64-s;var d=s(59519);const f=[],p=[],g=[],m=BigInt(0),w=BigInt(1),v=BigInt(2),y=BigInt(7),b=BigInt(256),_=BigInt(113);for(let e=0,t=w,s=1,n=0;e<24;e++){[s,n]=[n,(2*s+3*n)%5],f.push(2*(5*n+s)),p.push((e+1)*(e+2)/2%64);let r=m;for(let e=0;e<7;e++)t=(t<<w^(t>>y)*_)%b,t&v&&(r^=w<<(w<<BigInt(e))-w);g.push(r)}const[k,C]=a(g,!0),x=(e,t,s)=>s>32?h(e,t,s):c(e,t,s),A=(e,t,s)=>s>32?u(e,t,s):l(e,t,s);class S extends d.Vw{constructor(e,t,s,r=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=s,this.enableXOF=r,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,n.ai)(s),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,d.DH)(this.state)}keccak(){d.qv||(0,d.Fc)(this.state32),function(e,t=24){const s=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)s[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const n=(t+8)%10,r=(t+2)%10,i=s[r],o=s[r+1],a=x(i,o,1)^s[n],c=A(i,o,1)^s[n+1];for(let s=0;s<50;s+=10)e[t+s]^=a,e[t+s+1]^=c}let t=e[2],r=e[3];for(let s=0;s<24;s++){const n=p[s],i=x(t,r,n),o=A(t,r,n),a=f[s];t=e[a],r=e[a+1],e[a]=i,e[a+1]=o}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)s[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~s[(n+2)%10]&s[(n+4)%10]}e[0]^=k[n],e[1]^=C[n]}s.fill(0)}(this.state32,this.rounds),d.qv||(0,d.Fc)(this.state32),this.posOut=0,this.pos=0}update(e){(0,n.t2)(this);const{blockLen:t,state:s}=this,r=(e=(0,d.ZJ)(e)).length;for(let n=0;n<r;){const i=Math.min(t-this.pos,r-n);for(let t=0;t<i;t++)s[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:s,blockLen:n}=this;e[s]^=t,128&t&&s===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){(0,n.t2)(this,!1),(0,n.ee)(e),this.finish();const t=this.state,{blockLen:s}=this;for(let n=0,r=e.length;n<r;){this.posOut>=s&&this.keccak();const i=Math.min(s-this.posOut,r-n);e.set(t.subarray(this.posOut,this.posOut+i),n),this.posOut+=i,n+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,n.ai)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,n.CG)(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:s,outputLen:n,rounds:r,enableXOF:i}=this;return e||(e=new S(t,s,n,i,r)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=r,e.suffix=s,e.outputLen=n,e.enableXOF=i,e.destroyed=this.destroyed,e}}const E=(e,t,s)=>(0,d.ld)((()=>new S(t,e,s))),T=E(1,136,32);var I=s(92627),P=s(59331),$=s(53661);function j(e,t){const s=t||"hex",n=T((0,I.q)(e,{strict:!1})?(0,P.ZJ)(e):e);return"bytes"===s?n:(0,$.nj)(n)}},83220:(e,t,s)=>{s.d(t,{A:()=>n});class n extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&void 0!==t&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const e=this.keys().next().value;e&&this.delete(e)}return this}}},36399:(e,t,s)=>{function n(e,{delay:t=100,retryCount:s=2,shouldRetry:n=()=>!0}={}){return new Promise(((r,i)=>{const o=async({count:a=0}={})=>{const c=async({error:e})=>{const s="function"==typeof t?t({count:a,error:e}):t;s&&await async function(e){return new Promise((t=>setTimeout(t,e)))}(s),o({count:a+1})};try{const t=await e();r(t)}catch(e){if(a<s&&await n({count:a,error:e}))return c({error:e});i(e)}};o()}))}s.d(t,{b:()=>n})},86756:(e,t,s)=>{function n(e,{errorInstance:t=new Error("timed out"),timeout:s,signal:n}){return new Promise(((r,i)=>{(async()=>{let o;try{const a=new AbortController;s>0&&(o=setTimeout((()=>{n?a.abort():i(t)}),s)),r(await e({signal:a?.signal||null}))}catch(e){"AbortError"===e?.name&&i(t),i(e)}finally{clearTimeout(o)}})()}))}s.d(t,{w:()=>n})},38064:(e,t,s)=>{s.d(t,{A:()=>n});const n=(e,t,s)=>JSON.stringify(e,((e,s)=>{const n="bigint"==typeof s?s.toString():s;return"function"==typeof t?t(e,n):n}),s)},55631:(e,t,s)=>{s.d(t,{L:()=>o});const n=256;let r,i=n;function o(e=11){if(!r||i+e>2*n){r="",i=0;for(let e=0;e<n;e++)r+=(256+256*Math.random()|0).toString(16).substring(1)}return r.substring(i,i+++e)}}},c={};function l(e){var t=c[e];if(void 0!==t)return t.exports;var s=c[e]={id:e,loaded:!1,exports:{}};return a[e].call(s.exports,s,s.exports,l),s.loaded=!0,s.exports}l.m=a,e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",s="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",n=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},l.a=(r,i,o)=>{var a;o&&((a=[]).d=-1);var c,l,h,u=new Set,d=r.exports,f=new Promise(((e,t)=>{h=t,l=e}));f[t]=d,f[e]=e=>(a&&e(a),u.forEach(e),f.catch((e=>{}))),r.exports=f,i((r=>{var i;c=(r=>r.map((r=>{if(null!==r&&"object"==typeof r){if(r[e])return r;if(r.then){var i=[];i.d=0,r.then((e=>{o[t]=e,n(i)}),(e=>{o[s]=e,n(i)}));var o={};return o[e]=e=>e(i),o}}var a={};return a[e]=e=>{},a[t]=r,a})))(r);var o=()=>c.map((e=>{if(e[s])throw e[s];return e[t]})),l=new Promise((t=>{(i=()=>t(o)).r=0;var s=e=>e!==a&&!u.has(e)&&(u.add(e),e&&!e.d&&(i.r++,e.push(i)));c.map((t=>t[e](s)))}));return i.r?l:o()}),(e=>(e?h(f[s]=e):l(d),n(a)))),a&&a.d<0&&(a.d=0)},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},i=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,l.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var s=Object.create(null);l.r(s);var n={};r=r||[null,i({}),i([]),i(i)];for(var o=2&t&&e;"object"==typeof o&&!~r.indexOf(o);o=i(o))Object.getOwnPropertyNames(o).forEach((t=>n[t]=()=>e[t]));return n.default=()=>e,l.d(s,n),s},l.d=(e,t)=>{for(var s in t)l.o(t,s)&&!l.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},l.f={},l.e=e=>Promise.all(Object.keys(l.f).reduce(((t,s)=>(l.f[s](e,t),t)),[])),l.u=e=>e+".js",l.miniCssF=e=>{},l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o={},l.l=(e,t,s,n)=>{if(o[e])o[e].push(t);else{var r,i;if(void 0!==s)for(var a=document.getElementsByTagName("script"),c=0;c<a.length;c++){var h=a[c];if(h.getAttribute("src")==e){r=h;break}}r||(i=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,l.nc&&r.setAttribute("nonce",l.nc),r.src=e),o[e]=[t];var u=(t,s)=>{r.onerror=r.onload=null,clearTimeout(d);var n=o[e];if(delete o[e],r.parentNode&&r.parentNode.removeChild(r),n&&n.forEach((e=>e(s))),t)return t(s)},d=setTimeout(u.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=u.bind(null,r.onerror),r.onload=u.bind(null,r.onload),i&&document.head.appendChild(r)}},l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;l.g.importScripts&&(e=l.g.location+"");var t=l.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var s=t.getElementsByTagName("script");if(s.length)for(var n=s.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=s[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),l.p=e})(),(()=>{var e={23:0};l.f.j=(t,s)=>{var n=l.o(e,t)?e[t]:void 0;if(0!==n)if(n)s.push(n[2]);else{var r=new Promise(((s,r)=>n=e[t]=[s,r]));s.push(n[2]=r);var i=l.p+l.u(t),o=new Error;l.l(i,(s=>{if(l.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var r=s&&("load"===s.type?"missing":s.type),i=s&&s.target&&s.target.src;o.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",o.name="ChunkLoadError",o.type=r,o.request=i,n[1](o)}}),"chunk-"+t,t)}};var t=(t,s)=>{var n,r,[i,o,a]=s,c=0;if(i.some((t=>0!==e[t]))){for(n in o)l.o(o,n)&&(l.m[n]=o[n]);if(a)a(l)}for(t&&t(s);c<i.length;c++)r=i[c],l.o(e,r)&&e[r]&&e[r][0](),e[r]=0},s=self.webpackChunk=self.webpackChunk||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();l(72484)})();